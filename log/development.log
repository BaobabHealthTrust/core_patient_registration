/!\ FAILSAFE /!\  Mon Dec 10 09:31:22 +0200 2012
  Status: 500 Internal Server Error
  Access denied for user 'root'@'localhost' (using password: NO)
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/mysql_adapter.rb:589:in `real_connect'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/mysql_adapter.rb:589:in `connect'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/mysql_adapter.rb:203:in `initialize'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/mysql_adapter.rb:75:in `new'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/mysql_adapter.rb:75:in `mysql_connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:223:in `send'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:223:in `new_connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:245:in `checkout_new_connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:188:in `checkout'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `loop'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `checkout'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/monitor.rb:242:in `synchronize'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:183:in `checkout'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:98:in `connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:326:in `retrieve_connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:123:in `retrieve_connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:115:in `connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:9:in `cache'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:28:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/string_coercion.rb:25:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/params_parser.rb:15:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/session/cookie_store.rb:93:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/failsafe.rb:26:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:114:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:34:in `run'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rails-2.3.5/lib/rails/rack/static.rb:31:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/urlmap.rb:46:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `each'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rails-2.3.5/lib/rails/rack/log_tailer.rb:17:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/content_length.rb:13:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/handler/webrick.rb:50:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/handler/webrick.rb:14:in `run'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rails-2.3.5/lib/commands/server.rb:111
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    script/server:3
/!\ FAILSAFE /!\  Mon Dec 10 09:31:42 +0200 2012
  Status: 500 Internal Server Error
  Access denied for user 'root'@'localhost' (using password: NO)
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/mysql_adapter.rb:589:in `real_connect'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/mysql_adapter.rb:589:in `connect'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/mysql_adapter.rb:203:in `initialize'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/mysql_adapter.rb:75:in `new'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/mysql_adapter.rb:75:in `mysql_connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:223:in `send'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:223:in `new_connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:245:in `checkout_new_connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:188:in `checkout'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `loop'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `checkout'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/monitor.rb:242:in `synchronize'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:183:in `checkout'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:98:in `connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:326:in `retrieve_connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:123:in `retrieve_connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:115:in `connection'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:9:in `cache'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:28:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/string_coercion.rb:25:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/params_parser.rb:15:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/session/cookie_store.rb:93:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/failsafe.rb:26:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:114:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:34:in `run'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rails-2.3.5/lib/rails/rack/static.rb:31:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/urlmap.rb:46:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `each'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/urlmap.rb:40:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rails-2.3.5/lib/rails/rack/log_tailer.rb:17:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/content_length.rb:13:in `call'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/handler/webrick.rb:50:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/handler/webrick.rb:14:in `run'
    /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rails-2.3.5/lib/commands/server.rb:111
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    script/server:3
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 09:33:19) [GET]

ActionController::RoutingError (No route matches "/new" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 09:33:51) [GET]
Rendering core_patient_registration/new
Completed in 3ms (View: 2, DB: 0) | 200 OK [http://localhost/core_patient_registration/new]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW FIELDS FROM `active_list`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `active_list`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `active_list`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW FIELDS FROM `active_list_allergy`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `active_list_allergy`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `active_list_allergy`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `active_list_problem`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `active_list_problem`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `active_list_problem`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `active_list_type`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mdescribe `active_list_type`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `active_list_type`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW FIELDS FROM `cohort`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `cohort`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `cohort`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `cohort_member`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `cohort_member`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `cohort_member`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mdescribe `concept`[0m
  [4;36;1mSQL (6.7ms)[0m   [0;1mSHOW KEYS FROM `concept`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_answer`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mdescribe `concept_answer`[0m
  [4;35;1mSQL (4.6ms)[0m   [0mSHOW KEYS FROM `concept_answer`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_class`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mdescribe `concept_class`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `concept_class`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `concept_complex`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `concept_complex`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `concept_complex`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_datatype`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mdescribe `concept_datatype`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `concept_datatype`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW FIELDS FROM `concept_derived`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mdescribe `concept_derived`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `concept_derived`[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW FIELDS FROM `concept_description`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mdescribe `concept_description`[0m
  [4;36;1mSQL (3.7ms)[0m   [0;1mSHOW KEYS FROM `concept_description`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW FIELDS FROM `concept_map`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `concept_map`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW KEYS FROM `concept_map`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mdescribe `concept_name`[0m
  [4;36;1mSQL (6.0ms)[0m   [0;1mSHOW KEYS FROM `concept_name`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW FIELDS FROM `concept_name_tag`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mdescribe `concept_name_tag`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `concept_name_tag`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept_name_tag_map`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mdescribe `concept_name_tag_map`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `concept_name_tag_map`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_numeric`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mdescribe `concept_numeric`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSHOW KEYS FROM `concept_numeric`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_proposal`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mdescribe `concept_proposal`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `concept_proposal`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `concept_proposal_tag_map`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mdescribe `concept_proposal_tag_map`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `concept_proposal_tag_map`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_set`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mdescribe `concept_set`[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `concept_set`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `concept_set_derived`[0m
  [4;36;1mSQL (4.2ms)[0m   [0;1mdescribe `concept_set_derived`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW KEYS FROM `concept_set_derived`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_source`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mdescribe `concept_source`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `concept_source`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW FIELDS FROM `concept_state_conversion`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `concept_state_conversion`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `concept_state_conversion`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept_synonym`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mdescribe `concept_synonym`[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `concept_synonym`[0m
  [4;35;1mSQL (4.6ms)[0m   [0mSHOW FIELDS FROM `concept_word`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mdescribe `concept_word`[0m
  [4;35;1mSQL (4.2ms)[0m   [0mSHOW KEYS FROM `concept_word`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW FIELDS FROM `drug`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mdescribe `drug`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW KEYS FROM `drug`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_ingredient`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `drug_ingredient`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `drug_ingredient`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mdescribe `drug_order`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `drug_order`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_substance`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mdescribe `drug_substance`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `drug_substance`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `encounter`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `encounter`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mdescribe `encounter_type`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `encounter_type`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW FIELDS FROM `external_source`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mdescribe `external_source`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `external_source`[0m
  [4;35;1mSQL (1.3ms)[0m   [0mSHOW FIELDS FROM `field`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mdescribe `field`[0m
  [4;35;1mSQL (1.5ms)[0m   [0mSHOW KEYS FROM `field`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW FIELDS FROM `field_answer`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mdescribe `field_answer`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `field_answer`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW FIELDS FROM `field_type`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mdescribe `field_type`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `field_type`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW FIELDS FROM `form`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mdescribe `form`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `form`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `form_field`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mdescribe `form_field`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `form_field`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSHOW FIELDS FROM `formentry_archive`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mdescribe `formentry_archive`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `formentry_archive`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW FIELDS FROM `formentry_error`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mdescribe `formentry_error`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSHOW KEYS FROM `formentry_error`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW FIELDS FROM `formentry_queue`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mdescribe `formentry_queue`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `formentry_queue`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `formentry_xsn`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `formentry_xsn`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `formentry_xsn`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mdescribe `global_property`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSHOW KEYS FROM `global_property`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW FIELDS FROM `hl7_in_archive`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mdescribe `hl7_in_archive`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `hl7_in_archive`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW FIELDS FROM `hl7_in_error`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mdescribe `hl7_in_error`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `hl7_in_error`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW FIELDS FROM `hl7_in_queue`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mdescribe `hl7_in_queue`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `hl7_in_queue`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW FIELDS FROM `hl7_source`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mdescribe `hl7_source`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `hl7_source`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `htmlformentry_html_form`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mdescribe `htmlformentry_html_form`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `htmlformentry_html_form`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW FIELDS FROM `liquibasechangelog`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mdescribe `liquibasechangelog`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `liquibasechangelog`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW FIELDS FROM `liquibasechangeloglock`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mdescribe `liquibasechangeloglock`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `liquibasechangeloglock`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mSQL (1.3ms)[0m   [0mdescribe `location`[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mSHOW KEYS FROM `location`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `location_tag`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mdescribe `location_tag`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `location_tag`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW FIELDS FROM `location_tag_map`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mdescribe `location_tag_map`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW KEYS FROM `location_tag_map`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `logic_rule_definition`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mdescribe `logic_rule_definition`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSHOW KEYS FROM `logic_rule_definition`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW FIELDS FROM `logic_rule_token`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `logic_rule_token`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `logic_rule_token`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `logic_rule_token_tag`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mdescribe `logic_rule_token_tag`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `logic_rule_token_tag`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW FIELDS FROM `logic_token_registration`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mdescribe `logic_token_registration`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `logic_token_registration`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW FIELDS FROM `logic_token_registration_tag`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `logic_token_registration_tag`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `logic_token_registration_tag`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `note`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `note`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `note`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mSHOW FIELDS FROM `notification_alert`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mdescribe `notification_alert`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `notification_alert`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW FIELDS FROM `notification_alert_recipient`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mdescribe `notification_alert_recipient`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `notification_alert_recipient`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW FIELDS FROM `notification_template`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mdescribe `notification_template`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `notification_template`[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `obs`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `obs`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW FIELDS FROM `order_type`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mdescribe `order_type`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `order_type`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mSQL (1.3ms)[0m   [0mdescribe `orders`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `orders`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mdescribe `patient`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `patient`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `patient_identifier`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `patient_identifier`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mdescribe `patient_identifier_type`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `patient_identifier_type`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_program`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mdescribe `patient_program`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSHOW KEYS FROM `patient_program`[0m
  [4;35;1mSQL (1.8ms)[0m   [0mSHOW FIELDS FROM `patient_state`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mdescribe `patient_state`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `patient_state`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mdescribe `person`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `person`[0m
  [4;35;1mSQL (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mdescribe `person_address`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `person_address`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `person_attribute`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSHOW KEYS FROM `person_attribute`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mdescribe `person_attribute_type`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `person_attribute_type`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mSQL (1.2ms)[0m   [0mdescribe `person_name`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSHOW KEYS FROM `person_name`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW FIELDS FROM `privilege`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `privilege`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSHOW KEYS FROM `privilege`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW FIELDS FROM `program`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mdescribe `program`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `program`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mSHOW FIELDS FROM `program_workflow`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mdescribe `program_workflow`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `program_workflow`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW FIELDS FROM `program_workflow_state`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `program_workflow_state`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSHOW KEYS FROM `program_workflow_state`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mdescribe `relationship`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `relationship`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship_type`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `relationship_type`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `relationship_type`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mSHOW FIELDS FROM `report_object`[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mdescribe `report_object`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW KEYS FROM `report_object`[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSHOW FIELDS FROM `report_schema_xml`[0m
  [4;35;1mSQL (0.9ms)[0m   [0mdescribe `report_schema_xml`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `report_schema_xml`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW FIELDS FROM `role`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `role`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `role`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW FIELDS FROM `role_privilege`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mdescribe `role_privilege`[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW KEYS FROM `role_privilege`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `role_role`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `role_role`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `role_role`[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW FIELDS FROM `scheduler_task_config`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mdescribe `scheduler_task_config`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `scheduler_task_config`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `scheduler_task_config_property`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mdescribe `scheduler_task_config_property`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `scheduler_task_config_property`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `serialized_object`[0m
  [4;35;1mSQL (1.1ms)[0m   [0mdescribe `serialized_object`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `serialized_object`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `tribe`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `tribe`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW KEYS FROM `tribe`[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSHOW FIELDS FROM `user_property`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mdescribe `user_property`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW KEYS FROM `user_property`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW FIELDS FROM `user_role`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mdescribe `user_role`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSHOW KEYS FROM `user_role`[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mSQL (1.0ms)[0m   [0mdescribe `users`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW KEYS FROM `users`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (135.1ms)[0m   [0mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (201.3ms)[0m   [0;1mCREATE UNIQUE INDEX `unique_schema_migrations` ON `schema_migrations` (`version`)[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 10:43:41) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 10:46:35) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 10:46:39) [GET]
Rendering core_patient_registration/new
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://localhost/core_patient_registration/new]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 10:48:18) [GET]
Rendering core_patient_registration/new
Completed in 3ms (View: 2, DB: 0) | 200 OK [http://localhost/core_patient_registration/new]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 10:48:27) [GET]
Rendering core_patient_registration/new
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/core_patient_registration/new]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 10:48:35) [GET]
Rendering core_patient_registration/new
Completed in 1ms (View: 0, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 10:48:38) [GET]
Rendering core_patient_registration/new
Completed in 1ms (View: 0, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 10:51:19) [GET]
Rendering core_patient_registration/new
Completed in 3ms (View: 2, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 10:51:20) [GET]
Rendering core_patient_registration/new
Completed in 2ms (View: 1, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 10:51:22) [GET]
Rendering core_patient_registration/new
Completed in 2ms (View: 1, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 10:51:23) [GET]
Rendering core_patient_registration/new
Completed in 1ms (View: 0, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 10:54:14) [GET]
Rendering core_patient_registration/new
Completed in 1ms (View: 0, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:17:45) [GET]
Rendering core_patient_registration/new

ActionView::TemplateError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id) on line #5 of app/views/core_patient_registration/new.rhtml:
2: 
3: <script type="text/javascript" language="javascript">
4: 	<!--
5: 		tt_cancel_show = "/patients/show/<%= @patient.id %>";
6: 		tt_cancel_destination = "/patients/show/<%= @patient.id %>";
7: 	//-->
8: </script>

    app/views/core_patient_registration/new.rhtml:5:in `_run_rhtml_app47views47core_patient_registration47new46rhtml'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (52.9ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:20:53) [GET]
Rendering core_patient_registration/new

ActionView::TemplateError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id) on line #5 of app/views/core_patient_registration/new.rhtml:
2: 
3: <script type="text/javascript" language="javascript">
4: 	<!--
5: 		tt_cancel_show = "/patients/show/<%= @patient.id %>";
6: 		tt_cancel_destination = "/patients/show/<%= @patient.id %>";
7: 	//-->
8: </script>

    app/views/core_patient_registration/new.rhtml:5:in `_run_rhtml_app47views47core_patient_registration47new46rhtml'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (24.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:22:35) [GET]
Rendering core_patient_registration/new
Completed in 62ms (View: 61, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:22:56) [GET]
Rendering core_patient_registration/new
Completed in 51ms (View: 20, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:26:42) [GET]
Rendering core_patient_registration/new
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:26:45) [GET]
Rendering core_patient_registration/new
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:28:36) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new

ActionView::TemplateError (undefined local variable or method `current_user' for #<ActionView::Base:0x7f01c2aa6700>) on line #9 of app/views/layouts/application.rhtml:
6:     <% @title = "#{controller.controller_name.humanize} #{controller.action_name.humanize}" rescue ""  %>
7:     <script language="javascript" defer="true">
8:       <!--
9:       tstUsername = "<%= current_user.username unless current_user.nil? %>";
10:       tstUserKeyboardPref = "<%=
11: current_user.user_properties.last(:conditions => ["property = 'preferred.keyboard'"]).property_value rescue "abc"
12: %>";

    app/views/layouts/application.rhtml:9:in `_run_rhtml_app47views47layouts47application46rhtml'
    app/controllers/core_patient_registration_controller.rb:5:in `new'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (25.3ms)
Rendered rescues/_request_and_response (0.7ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:30:09) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new

ActionView::TemplateError (undefined local variable or method `show_intro_text' for #<ActionView::Base:0x7f01c2c81750>) on line #60 of app/views/layouts/application.rhtml:
57:     <div id="container">
58:       <div id="content">
59:         <div id="description" style="color:#777;position:absolute;margin-top:-70px;">
60:           <% if show_intro_text %>
61:             This demonstration site contains the work of <a href="http://pih.org" style="color:white">Partners In Health</a>
62:             and <a href="http://baobabhealth.org" style="color:white">Baobab Health.</a>
63:             This EMR is built on top of OpenMRS 1.4 and is currently being used in Neno and Ngoni, Malawi.

    app/views/layouts/application.rhtml:60:in `_run_rhtml_app47views47layouts47application46rhtml'
    app/controllers/core_patient_registration_controller.rb:5:in `new'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:32:37) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new

ActionView::TemplateError (undefined local variable or method `show_intro_text' for #<ActionView::Base:0x7f01c16cc540>) on line #60 of app/views/layouts/application.rhtml:
57:     <div id="container">
58:       <div id="content">
59:         <div id="description" style="color:#777;position:absolute;margin-top:-70px;">
60:           <% if show_intro_text %>
61:             This demonstration site contains the work of <a href="http://pih.org" style="color:white">Partners In Health</a>
62:             and <a href="http://baobabhealth.org" style="color:white">Baobab Health.</a>
63:             This EMR is built on top of OpenMRS 1.4 and is currently being used in Neno and Ngoni, Malawi.

    app/views/layouts/application.rhtml:60:in `_run_rhtml_app47views47layouts47application46rhtml'
    app/controllers/core_patient_registration_controller.rb:5:in `new'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (55.7ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:32:38) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new

ActionView::TemplateError (undefined local variable or method `show_intro_text' for #<ActionView::Base:0x7f01c1a4c5f8>) on line #60 of app/views/layouts/application.rhtml:
57:     <div id="container">
58:       <div id="content">
59:         <div id="description" style="color:#777;position:absolute;margin-top:-70px;">
60:           <% if show_intro_text %>
61:             This demonstration site contains the work of <a href="http://pih.org" style="color:white">Partners In Health</a>
62:             and <a href="http://baobabhealth.org" style="color:white">Baobab Health.</a>
63:             This EMR is built on top of OpenMRS 1.4 and is currently being used in Neno and Ngoni, Malawi.

    app/views/layouts/application.rhtml:60:in `_run_rhtml_app47views47layouts47application46rhtml'
    app/controllers/core_patient_registration_controller.rb:5:in `new'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:32:55) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new

ActionView::TemplateError (undefined local variable or method `show_intro_text' for #<ActionView::Base:0x7fb99ad9a520>) on line #60 of app/views/layouts/application.rhtml:
57:     <div id="container">
58:       <div id="content">
59:         <div id="description" style="color:#777;position:absolute;margin-top:-70px;">
60:           <% if show_intro_text %>
61:             This demonstration site contains the work of <a href="http://pih.org" style="color:white">Partners In Health</a>
62:             and <a href="http://baobabhealth.org" style="color:white">Baobab Health.</a>
63:             This EMR is built on top of OpenMRS 1.4 and is currently being used in Neno and Ngoni, Malawi.

    app/views/layouts/application.rhtml:60:in `_run_rhtml_app47views47layouts47application46rhtml'
    app/controllers/core_patient_registration_controller.rb:5:in `new'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.0ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:34:18) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 16ms (View: 16, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 11:34:18) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 11:53:20) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 17ms (View: 16, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 11:53:20) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:00:37) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 12ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 12:00:37) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:00:45) [POST]
  Parameters: {"FIRST NAME"=>"Test", "LAST NAME"=>"Fe", "GENDER"=>"Female"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 12:00:46) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:02:06) [POST]
  Parameters: {"FIRST NAME"=>"Test", "LAST NAME"=>"Fe", "GENDER"=>"Female"}

NameError (undefined local variable or method `show_middle_name' for #<CorePatientRegistrationController:0x7fd331290db8>):
  app/controllers/core_patient_registration_controller.rb:5:in `new'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (21.4ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:02:48) [POST]
  Parameters: {"FIRST NAME"=>"Test", "LAST NAME"=>"Fe", "GENDER"=>"Female"}
Rendering template within layouts/application
Rendering core_patient_registration/new

ActionView::TemplateError (--- false
) on line #9 of app/views/core_patient_registration/new.rhtml:
6: 
7: <% form_tag :controller => "core_patient_registration", :action => "new" do |f| %>
8: 
9:         <% raise show_middle_name.to_yaml %>
10: 
11: 	<%# session_date = session[:datetime] || Time.now() %>
12: 

    app/views/core_patient_registration/new.rhtml:9:in `_run_rhtml_app47views47core_patient_registration47new46rhtml'
    app/views/core_patient_registration/new.rhtml:7:in `_run_rhtml_app47views47core_patient_registration47new46rhtml'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (32.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:03:09) [POST]
  Parameters: {"FIRST NAME"=>"Test", "LAST NAME"=>"Fe", "GENDER"=>"Female"}
Rendering template within layouts/application
Rendering core_patient_registration/new

ActionView::TemplateError (--- true
) on line #10 of app/views/core_patient_registration/new.rhtml:
7: <% form_tag :controller => "core_patient_registration", :action => "new" do |f| %>
8: 
9:         <% show_middle_name = true %>
10:         <% raise show_middle_name.to_yaml %>
11: 
12: 	<%# session_date = session[:datetime] || Time.now() %>
13: 

    app/views/core_patient_registration/new.rhtml:10:in `_run_rhtml_app47views47core_patient_registration47new46rhtml'
    app/views/core_patient_registration/new.rhtml:7:in `_run_rhtml_app47views47core_patient_registration47new46rhtml'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.7ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:03:17) [POST]
  Parameters: {"FIRST NAME"=>"Test", "LAST NAME"=>"Fe", "GENDER"=>"Female"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 15ms (View: 14, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 12:03:17) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:04:51) [POST]
  Parameters: {"FIRST NAME"=>"Test", "LAST NAME"=>"Fe", "GENDER"=>"Female"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 17ms (View: 15, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 12:04:51) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:16:28) [POST]
  Parameters: {"FIRST NAME"=>"Test", "LAST NAME"=>"Fe", "GENDER"=>"Female"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 12:16:28) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:16:57) [GET]
  Parameters: {"show_middle_name"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 12:16:57) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:17:20) [GET]
  Parameters: {"show_middle_name"=>"true", "show_birthyear"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_birthyear=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 12:17:20) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:17:51) [GET]
  Parameters: {"show_middle_name"=>"false", "show_birthyear"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=false&show_birthyear=true]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 12:17:51) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:18:00) [POST]
  Parameters: {"YEAR OF BIRTH"=>"P", "FIRST NAME"=>"F", "LAST NAME"=>"G", "GENDER"=>"Female"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 12:18:00) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 12:47:57) [POST]
  Parameters: {"YEAR OF BIRTH"=>"P", "FIRST NAME"=>"F", "LAST NAME"=>"G", "GENDER"=>"Female"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-10 12:47:57) [GET]

ActionController::RoutingError (No route matches "/javascripts/dateselector.js" with {:method=>:get}):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 12:48:08) [POST]
  Parameters: {"FIRST NAME"=>"Test", "LAST NAME"=>"Patient", "GENDER"=>"Female"}

RuntimeError (--- !map:HashWithIndifferentAccess 
action: create
controller: core_patient_registration
FIRST NAME: Test
GENDER: Female
LAST NAME: Patient
):
  app/controllers/core_patient_registration_controller.rb:47:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (20.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 14:15:13) [POST]
  Parameters: {"LAST NAME"=>"Patient", "GENDER"=>"Female", "FIRST NAME"=>"Test"}

RuntimeError (--- !map:HashWithIndifferentAccess 
controller: core_patient_registration
GENDER: Female
LAST NAME: Patient
action: create
FIRST NAME: Test
):
  app/controllers/core_patient_registration_controller.rb:47:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (20.4ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mCorePerson Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mCoreGlobalProperty Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 15:48:56) [GET]
  Parameters: {"show_middle_name"=>"false", "show_age"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 18ms (View: 17, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=false&show_age=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 15:48:59) [GET]
  Parameters: {"show_middle_name"=>"false", "show_age"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=false&show_age=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 15:49:33) [GET]
  Parameters: {"show_middle_name"=>"false", "show_age"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=false&show_age=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 15:50:11) [GET]
  Parameters: {"show_middle_name"=>"false", "show_age"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 10ms (View: 8, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=false&show_age=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 15:52:11) [GET]
  Parameters: {"show_middle_name"=>"false", "show_age"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=false&show_age=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 15:53:26) [GET]
  Parameters: {"show_middle_name"=>"false", "show_age"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 9ms (View: 7, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=false&show_age=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 15:53:40) [GET]
  Parameters: {"show_middle_name"=>"false", "show_age"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=false&show_age=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 15:54:03) [GET]
  Parameters: {"show_middle_name"=>"false", "show_age"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=false&show_age=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 15:54:33) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "age_estimate"=>"26", "names"=>{"given_name"=>"test", "family_name"=>"patient"}}}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

NameError (uninitialized constant CorePerson::RestClient):
  app/models/core_person.rb:108:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:53:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (51.3ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-10 16:51:45) [GET]
  Parameters: {"show_age"=>"true", "show_middle_name"=>"false"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 41ms (View: 40, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=false&show_age=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 16:51:58) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "age_estimate"=>"36"}}

NameError (undefined local variable or method `create_from_dde_server' for #<CorePatientRegistrationController:0x7f637e64d960>):
  app/controllers/core_patient_registration_controller.rb:53:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (57.6ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 16:52:42) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"family_name"=>"Banda", "given_name"=>"Mary"}, "age_estimate"=>"36"}}

NameError (undefined local variable or method `create_from_dde_server' for #<CorePatientRegistrationController:0x7ff79419bbd8>):
  app/controllers/core_patient_registration_controller.rb:53:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (44.9ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 16:52:46) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"family_name"=>"Banda", "given_name"=>"Mary"}, "age_estimate"=>"36"}}

NameError (undefined local variable or method `create_from_dde_server' for #<CorePatientRegistrationController:0x7ff790dc2ca8>):
  app/controllers/core_patient_registration_controller.rb:53:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (22.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 16:55:52) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"family_name"=>"Banda", "given_name"=>"Mary"}, "age_estimate"=>"36"}}

NameError (undefined local variable or method `create_from_dde_server' for #<CorePatientRegistrationController:0x7ff794356478>):
  app/controllers/core_patient_registration_controller.rb:53:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (23.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 16:57:08) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "age_estimate"=>"36", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}}}

NameError (undefined local variable or method `create_from_dde_server' for #<CorePatientRegistrationController:0x7f694b30f168>):
  app/controllers/core_patient_registration_controller.rb:53:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (52.8ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 16:57:56) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "age_estimate"=>"36", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}}}

RuntimeError (--- false
):
  app/controllers/core_patient_registration_controller.rb:53:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (22.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 16:58:28) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "age_estimate"=>"36", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}}}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

NameError (uninitialized constant CorePerson::RestClient):
  app/models/core_person.rb:108:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (24.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 17:01:51) [POST]
  Parameters: {"person"=>{"names"=>{"family_name"=>"Banda", "given_name"=>"Mary"}, "gender"=>"Female", "age_estimate"=>"36"}}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

URI::InvalidURIError (the scheme http does not accept registry part: :@ (or bad hostname?)):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/generic.rb:195:in `initialize'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/http.rb:78:in `initialize'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/common.rb:488:in `new'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/common.rb:488:in `parse'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:112:in `parse_url'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:116:in `parse_url_with_auth'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:63:in `execute'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:33:in `execute'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient.rb:72:in `post'
  app/models/core_person.rb:108:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.1ms)
Rendered rescues/_request_and_response (6.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 17:02:26) [POST]
  Parameters: {"person"=>{"names"=>{"family_name"=>"Banda", "given_name"=>"Mary"}, "gender"=>"Female", "age_estimate"=>"36"}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

NameError (uninitialized constant CorePerson::Person):
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (23.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-10 17:03:32) [POST]
  Parameters: {"person"=>{"names"=>{"family_name"=>"Banda", "given_name"=>"Mary"}, "gender"=>"Female", "age_estimate"=>"36"}}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::UnknownAttributeError (unknown attribute: person):
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (58.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (26.8ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 10:33:56) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 10:36:13) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 10:36:19) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 162ms (View: 161, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 11:03:28) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:03:33) [POST]
  Parameters: {"person"=>{"names"=>{"family_name"=>"Banda", "given_name"=>"Mary"}, "gender"=>"Female"}}

RuntimeError (--- false
):
  app/controllers/core_patient_registration_controller.rb:56:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (72.6ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:04:32) [POST]
  Parameters: {"person"=>{"names"=>{"family_name"=>"Banda", "given_name"=>"Mary"}, "gender"=>"Female"}}

NameError (uninitialized constant ApplicationController::Settings):
  app/controllers/application_controller.rb:6:in `get_global_property_value'
  app/controllers/application_controller.rb:15:in `create_from_dde_server'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.8ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 11:06:05) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:06:13) [POST]
  Parameters: {"person"=>{"names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "gender"=>"Female"}}

MissingSourceFile (no such file to load -- settingslogic):
  lib/settings.rb:1
  app/controllers/application_controller.rb:6:in `get_global_property_value'
  app/controllers/application_controller.rb:15:in `create_from_dde_server'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (79.2ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 11:08:23) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:08:27) [POST]
  Parameters: {"person"=>{"names"=>{"family_name"=>"Banda", "given_name"=>"Mary"}, "gender"=>"Female"}}

RuntimeError (--- "true"
):
  app/controllers/application_controller.rb:15:in `create_from_dde_server'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (75.4ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:08:57) [POST]
  Parameters: {"person"=>{"names"=>{"family_name"=>"Banda", "given_name"=>"Mary"}, "gender"=>"Female"}}
  [4;36;1mCorePerson Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCoreGlobalProperty Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (15.6ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'dde_server_ip') LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Load (0.3ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'dde_server_username') LIMIT 1[0m
  [4;36;1mCoreGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'dde_server_password') LIMIT 1[0m

URI::InvalidURIError (the scheme http does not accept registry part: :@ (or bad hostname?)):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/generic.rb:195:in `initialize'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/http.rb:78:in `initialize'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/common.rb:488:in `new'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/common.rb:488:in `parse'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:112:in `parse_url'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:116:in `parse_url_with_auth'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:63:in `execute'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:33:in `execute'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient.rb:72:in `post'
  app/models/core_person.rb:108:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (62.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 11:09:37) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:09:42) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}}}

RuntimeError (--- false
):
  app/controllers/core_patient_registration_controller.rb:56:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (71.3ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:09:59) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}}}

RuntimeError (--- 
):
  app/controllers/core_patient_registration_controller.rb:56:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:10:13) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}}}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (10.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::UnknownAttributeError (unknown attribute: person):
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (28.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:10:41) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

RuntimeError (--- !map:HashWithIndifferentAccess 
person: !map:HashWithIndifferentAccess 
  gender: Female
  names: !map:HashWithIndifferentAccess 
    given_name: Mary
    family_name: Banda
action: create
controller: core_patient_registration
):
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (60.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:11:25) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}}}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

RuntimeError (--- !map:HashWithIndifferentAccess 
person: !map:HashWithIndifferentAccess 
  gender: Female
  names: !map:HashWithIndifferentAccess 
    given_name: Mary
    family_name: Banda
action: create
controller: core_patient_registration
):
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.8ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:11:29) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}}}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

RuntimeError (--- !map:HashWithIndifferentAccess 
person: !map:HashWithIndifferentAccess 
  gender: Female
  names: !map:HashWithIndifferentAccess 
    given_name: Mary
    family_name: Banda
action: create
controller: core_patient_registration
):
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:14:33) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
ERROR: compiling _run_rhtml_app47views47core_patient_registration47new46rhtml RAISED compile error
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:53: syntax error, unexpected ';', expecting '}'
; @output_buffer.concat(( selec...
 ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:115: syntax error, unexpected kEND, expecting ')'
;  end ; @output_buffer.concat "\n"
      ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:117: syntax error, unexpected kENSURE, expecting ')'
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:119: syntax error, unexpected kEND, expecting ')'
Function body:           def _run_rhtml_app47views47core_patient_registration47new46rhtml(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<script type=\"text/javascript\" language=\"javascript\">\n\t<!--\n\t\t\n\t//-->\n</script>\n\n"





;  form_tag :controller => "core_patient_registration", :action => "create" do |f| ; @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][given_name]", params[:first_name],
		{:id => "first_name",
		 :helptext => "First Name" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][middle_name]", nil,
		{:id => "middle_name",
		 :helptext => "Middle Name" } if @show_middle_name ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][family_name]", params[:last_name],
		{:id => "last_name",
		 :helptext => "Last Name" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[gender]", options_for_select([["Male", "Male"], ["Female", "Female"], ["", ""]], params[:gender]),
		{:id => "gender",
		 :helptext => "Gender" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][family_name2]", nil,
		{:id => "maiden_name",
                 :condition => "__$('gender').value == 'Female'",
		 :helptext => "Maiden Name" } if @show_maiden_name ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[birth_year]", nil,
		{:id => "year_of_birth",
		 :helptext => "Year Of Birth" } # if @show_birthyear ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[birth_month]", options_for_select([["Jan", "Jan"], ["Feb", "Feb"], ["Mar", "Mar"], ["Apr", "Apr"], ["May", "May"], ["Jun", "Jun"], ["Jul", "Jul"], ["Aug", "Aug"], ["Sep", "Sep"], ["Oct", "Oct"], ["Nov", "Nov"], ["Dec", "Dec"], ["Unknown", "Unknown"], ["", ""]]),
		{:id => "month_of_birth",
		 :helptext => "Month Of Birth",
		:condition => '__$("year_of_birth").value != "Unknown"' } #if @show_birthyear and @show_birthmonth ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[birth_day]", nil,
		{:id => "date_of_birth_if_month_of_birth_!=_unknown",
		 :helptext => "Date Of Birth If Month Of Birth != Unknown",
		:condition => '$("month_of_birth").value != "Unknown"' } # if @show_birthmonth and @show_birthdate ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[age_estimate]", nil,
		{:id => "age_if_year_of_birth_=_unknown",
                 :field_type => "number",
                 :tt_pageStyleClass => "NumbersOnly",
                 :max => 90,
                 :absoluteMax => 120,
		 :helptext => "Age" # ,
		# :condition => (@show_birthyear ? "__$('year_of_birth').value == 'Unknown'" : "") } if @show_age ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[citizenship]", options_for_select([["", ""], ["Malawian", "Malawian"], ["Other", "Other"]]),
		{:id => "nationality",
		 :helptext => "Nationality" } if @show_nationality ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[race]", nil,
		{:id => "race",
		 :helptext => "Specify nationality",
		:condition => '__$("nationality").value == "Other"' } if @show_nationality ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "REGION OF ORIGIN", options_for_select([["Northern Region", "Northern Region"], ["Central Region", "Central Region"], ["Southern Region", "Southern Region"], ["", ""]]),
		{:id => "region_of_origin",
		 :helptext => "Region Of Origin" } if @show_region_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][subregion]", options_for_select([["", ""], ["List of districts", "List of districts"], ["", ""]]),
		{:id => "district_of_origin",
		 :helptext => "District Of Origin" } if @show_district_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][county_district]", options_for_select([["", ""], ["List of T/As in district", "List of T/As in district"], ["", ""]]),
		{:id => "ancestral_traditional_authority",
		 :helptext => "Ancestral Traditional Authority" } if @show_t_a_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][neighborhood_cell]", options_for_select([["", ""], ["List of villages under T/A", "List of villages under T/A"]]),
		{:id => "home_village",
		 :helptext => "Home Village" } if @show_home_village ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "CURRENT REGION", options_for_select([["Northern Region", "Northern Region"], ["Central Region", "Central Region"], ["Southern Region", "Southern Region"], ["", ""]]),
		{:id => "current_region",
		 :helptext => "Current Region" } if @show_current_region ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][address2]", options_for_select([["", ""], ["List of districts", "List of districts"], ["", ""]]),
		{:id => "current_district",
		 :helptext => "Current District" } if @show_current_district ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "CURRENT AREA OF RESIDENCE", options_for_select([["", ""], ["List of areas", "List of areas"], ["", ""]]),
		{:id => "current_area_of_residence",
		 :helptext => "Current Area Of Residence" } if @show_current_t_a ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][city_village]", options_for_select([["", ""], ["List of villages", "List of villages"]]),
		{:id => "current_location_or_village",
		 :helptext => "Current Location Or Village" } if @show_current_village ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[addresses][address1]", nil,
		{:id => "closest_landmark_or_plot_number",
		 :helptext => "Closest Landmark Or Plot Number" } if @show_current_landmark ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[cell_phone_number]", nil,
		{:id => "cell_phone_number",
		 :helptext => "Cell Phone Number" } if @show_cell_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[office_phone_number]", nil,
		{:id => "office_phone_number",
		 :helptext => "Office Phone Number" } if @show_office_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[home_phone_number]", nil,
		{:id => "home_phone_number",
		 :helptext => "Home Phone Number" } if @show_home_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[occupation]", options_for_select(@occupations),
		{:id => "occupation",
		 :helptext => "Occupation" } if @show_occupation ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( submit_tag 'Finish' ).to_s); @output_buffer.concat "\n"
;  end ; @output_buffer.concat "\n"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:119:in `compile!'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/renderable.rb:61:in `compile'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/renderable.rb:28:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/template.rb:205:in `render_template'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:265:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:348:in `_render_with_layout'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:262:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1250:in `render_for_file'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:945:in `render_without_benchmark'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1326:in `default_render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:617:in `call_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/flash.rb:146:in `perform_action'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `send'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `process_without_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:606:in `process'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:391:in `process'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:386:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/routing/route_set.rb:437:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:121:in `_call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:29:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:29:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:9:in `cache'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:28:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/string_coercion.rb:25:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/params_parser.rb:15:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/session/cookie_store.rb:93:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/failsafe.rb:26:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:114:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:34:in `run'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

ActionView::TemplateError (compile error
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:53: syntax error, unexpected ';', expecting '}'
; @output_buffer.concat(( selec...
 ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:115: syntax error, unexpected kEND, expecting ')'
;  end ; @output_buffer.concat "\n"
      ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:117: syntax error, unexpected kENSURE, expecting ')'
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:119: syntax error, unexpected kEND, expecting ')') on line #53 of app/views/core_patient_registration/new.rhtml:
50: 		 :helptext => "Age" # ,
51: 		# :condition => (@show_birthyear ? "__$('year_of_birth').value == 'Unknown'" : "") } if @show_age %>
52: 
53: 	<%= select_tag "person[citizenship]", options_for_select([["", ""], ["Malawian", "Malawian"], ["Other", "Other"]]),
54: 		{:id => "nationality",
55: 		 :helptext => "Nationality" } if @show_nationality %>
56: 

    app/views/core_patient_registration/new.rhtml:119:in `compile!'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (63.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:15:09) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
ERROR: compiling _run_rhtml_app47views47core_patient_registration47new46rhtml RAISED compile error
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:52: syntax error, unexpected ';', expecting '}'
; @output_buffer.concat(( selec...
 ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:114: syntax error, unexpected kEND, expecting ')'
;  end ; @output_buffer.concat "\n"
      ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:116: syntax error, unexpected kENSURE, expecting ')'
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:118: syntax error, unexpected kEND, expecting ')'
Function body:           def _run_rhtml_app47views47core_patient_registration47new46rhtml(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<script type=\"text/javascript\" language=\"javascript\">\n\t<!--\n\t\t\n\t//-->\n</script>\n\n"





;  form_tag :controller => "core_patient_registration", :action => "create" do |f| ; @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][given_name]", params[:first_name],
		{:id => "first_name",
		 :helptext => "First Name" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][middle_name]", nil,
		{:id => "middle_name",
		 :helptext => "Middle Name" } if @show_middle_name ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][family_name]", params[:last_name],
		{:id => "last_name",
		 :helptext => "Last Name" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[gender]", options_for_select([["Male", "Male"], ["Female", "Female"], ["", ""]], params[:gender]),
		{:id => "gender",
		 :helptext => "Gender" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][family_name2]", nil,
		{:id => "maiden_name",
                 :condition => "__$('gender').value == 'Female'",
		 :helptext => "Maiden Name" } if @show_maiden_name ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[birth_year]", nil,
		{:id => "year_of_birth",
		 :helptext => "Year Of Birth" } # if @show_birthyear ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[birth_month]", options_for_select([["Jan", "Jan"], ["Feb", "Feb"], ["Mar", "Mar"], ["Apr", "Apr"], ["May", "May"], ["Jun", "Jun"], ["Jul", "Jul"], ["Aug", "Aug"], ["Sep", "Sep"], ["Oct", "Oct"], ["Nov", "Nov"], ["Dec", "Dec"], ["Unknown", "Unknown"], ["", ""]]),
		{:id => "month_of_birth",
		 :helptext => "Month Of Birth",
		:condition => '__$("year_of_birth").value != "Unknown"' } #if @show_birthyear and @show_birthmonth ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[birth_day]", nil,
		{:id => "date_of_birth_if_month_of_birth_!=_unknown",
		 :helptext => "Date Of Birth If Month Of Birth != Unknown",
		:condition => '$("month_of_birth").value != "Unknown"' } # if @show_birthmonth and @show_birthdate ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[age_estimate]", nil,
		{:id => "age_if_year_of_birth_=_unknown",
                 :field_type => "number",
                 :tt_pageStyleClass => "NumbersOnly",
                 :max => 90,
                 :absoluteMax => 120,
		 :helptext => "Age" # , :condition => (@show_birthyear ? "__$('year_of_birth').value == 'Unknown'" : "") } if @show_age ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[citizenship]", options_for_select([["", ""], ["Malawian", "Malawian"], ["Other", "Other"]]),
		{:id => "nationality",
		 :helptext => "Nationality" } if @show_nationality ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[race]", nil,
		{:id => "race",
		 :helptext => "Specify nationality",
		:condition => '__$("nationality").value == "Other"' } if @show_nationality ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "REGION OF ORIGIN", options_for_select([["Northern Region", "Northern Region"], ["Central Region", "Central Region"], ["Southern Region", "Southern Region"], ["", ""]]),
		{:id => "region_of_origin",
		 :helptext => "Region Of Origin" } if @show_region_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][subregion]", options_for_select([["", ""], ["List of districts", "List of districts"], ["", ""]]),
		{:id => "district_of_origin",
		 :helptext => "District Of Origin" } if @show_district_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][county_district]", options_for_select([["", ""], ["List of T/As in district", "List of T/As in district"], ["", ""]]),
		{:id => "ancestral_traditional_authority",
		 :helptext => "Ancestral Traditional Authority" } if @show_t_a_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][neighborhood_cell]", options_for_select([["", ""], ["List of villages under T/A", "List of villages under T/A"]]),
		{:id => "home_village",
		 :helptext => "Home Village" } if @show_home_village ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "CURRENT REGION", options_for_select([["Northern Region", "Northern Region"], ["Central Region", "Central Region"], ["Southern Region", "Southern Region"], ["", ""]]),
		{:id => "current_region",
		 :helptext => "Current Region" } if @show_current_region ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][address2]", options_for_select([["", ""], ["List of districts", "List of districts"], ["", ""]]),
		{:id => "current_district",
		 :helptext => "Current District" } if @show_current_district ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "CURRENT AREA OF RESIDENCE", options_for_select([["", ""], ["List of areas", "List of areas"], ["", ""]]),
		{:id => "current_area_of_residence",
		 :helptext => "Current Area Of Residence" } if @show_current_t_a ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][city_village]", options_for_select([["", ""], ["List of villages", "List of villages"]]),
		{:id => "current_location_or_village",
		 :helptext => "Current Location Or Village" } if @show_current_village ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[addresses][address1]", nil,
		{:id => "closest_landmark_or_plot_number",
		 :helptext => "Closest Landmark Or Plot Number" } if @show_current_landmark ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[cell_phone_number]", nil,
		{:id => "cell_phone_number",
		 :helptext => "Cell Phone Number" } if @show_cell_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[office_phone_number]", nil,
		{:id => "office_phone_number",
		 :helptext => "Office Phone Number" } if @show_office_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[home_phone_number]", nil,
		{:id => "home_phone_number",
		 :helptext => "Home Phone Number" } if @show_home_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[occupation]", options_for_select(@occupations),
		{:id => "occupation",
		 :helptext => "Occupation" } if @show_occupation ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( submit_tag 'Finish' ).to_s); @output_buffer.concat "\n"
;  end ; @output_buffer.concat "\n"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:118:in `compile!'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/renderable.rb:61:in `compile'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/renderable.rb:28:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/template.rb:205:in `render_template'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:265:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:348:in `_render_with_layout'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:262:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1250:in `render_for_file'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:945:in `render_without_benchmark'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1326:in `default_render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:617:in `call_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/flash.rb:146:in `perform_action'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `send'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `process_without_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:606:in `process'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:391:in `process'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:386:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/routing/route_set.rb:437:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:121:in `_call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:29:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:29:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:9:in `cache'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:28:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/string_coercion.rb:25:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/params_parser.rb:15:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/session/cookie_store.rb:93:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/failsafe.rb:26:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:114:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:34:in `run'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

ActionView::TemplateError (compile error
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:52: syntax error, unexpected ';', expecting '}'
; @output_buffer.concat(( selec...
 ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:114: syntax error, unexpected kEND, expecting ')'
;  end ; @output_buffer.concat "\n"
      ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:116: syntax error, unexpected kENSURE, expecting ')'
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:118: syntax error, unexpected kEND, expecting ')') on line #52 of app/views/core_patient_registration/new.rhtml:
49:                  :absoluteMax => 120,
50: 		 :helptext => "Age" # , :condition => (@show_birthyear ? "__$('year_of_birth').value == 'Unknown'" : "") } if @show_age %>
51: 
52: 	<%= select_tag "person[citizenship]", options_for_select([["", ""], ["Malawian", "Malawian"], ["Other", "Other"]]),
53: 		{:id => "nationality",
54: 		 :helptext => "Nationality" } if @show_nationality %>
55: 

    app/views/core_patient_registration/new.rhtml:118:in `compile!'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (28.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:15:35) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
ERROR: compiling _run_rhtml_app47views47core_patient_registration47new46rhtml RAISED compile error
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:50: syntax error, unexpected ')', expecting '}'
		 :helptext => "Age" ).to_s); @output_buffer.concat ...
		                     ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:114: syntax error, unexpected kEND, expecting ')'
;  end ; @output_buffer.concat "\n"
      ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:116: syntax error, unexpected kENSURE, expecting ')'
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:118: syntax error, unexpected kEND, expecting ')'
Function body:           def _run_rhtml_app47views47core_patient_registration47new46rhtml(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<script type=\"text/javascript\" language=\"javascript\">\n\t<!--\n\t\t\n\t//-->\n</script>\n\n"





;  form_tag :controller => "core_patient_registration", :action => "create" do |f| ; @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][given_name]", params[:first_name],
		{:id => "first_name",
		 :helptext => "First Name" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][middle_name]", nil,
		{:id => "middle_name",
		 :helptext => "Middle Name" } if @show_middle_name ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][family_name]", params[:last_name],
		{:id => "last_name",
		 :helptext => "Last Name" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[gender]", options_for_select([["Male", "Male"], ["Female", "Female"], ["", ""]], params[:gender]),
		{:id => "gender",
		 :helptext => "Gender" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][family_name2]", nil,
		{:id => "maiden_name",
                 :condition => "__$('gender').value == 'Female'",
		 :helptext => "Maiden Name" } if @show_maiden_name ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[birth_year]", nil,
		{:id => "year_of_birth",
		 :helptext => "Year Of Birth" } # if @show_birthyear ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[birth_month]", options_for_select([["Jan", "Jan"], ["Feb", "Feb"], ["Mar", "Mar"], ["Apr", "Apr"], ["May", "May"], ["Jun", "Jun"], ["Jul", "Jul"], ["Aug", "Aug"], ["Sep", "Sep"], ["Oct", "Oct"], ["Nov", "Nov"], ["Dec", "Dec"], ["Unknown", "Unknown"], ["", ""]]),
		{:id => "month_of_birth",
		 :helptext => "Month Of Birth",
		:condition => '__$("year_of_birth").value != "Unknown"' } #if @show_birthyear and @show_birthmonth ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[birth_day]", nil,
		{:id => "date_of_birth_if_month_of_birth_!=_unknown",
		 :helptext => "Date Of Birth If Month Of Birth != Unknown",
		:condition => '$("month_of_birth").value != "Unknown"' } # if @show_birthmonth and @show_birthdate ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[age_estimate]", nil,
		{:id => "age_if_year_of_birth_=_unknown",
                 :field_type => "number",
                 :tt_pageStyleClass => "NumbersOnly",
                 :max => 90,
                 :absoluteMax => 120,
		 :helptext => "Age" ).to_s); @output_buffer.concat " "; @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[citizenship]", options_for_select([["", ""], ["Malawian", "Malawian"], ["Other", "Other"]]),
		{:id => "nationality",
		 :helptext => "Nationality" } if @show_nationality ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[race]", nil,
		{:id => "race",
		 :helptext => "Specify nationality",
		:condition => '__$("nationality").value == "Other"' } if @show_nationality ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "REGION OF ORIGIN", options_for_select([["Northern Region", "Northern Region"], ["Central Region", "Central Region"], ["Southern Region", "Southern Region"], ["", ""]]),
		{:id => "region_of_origin",
		 :helptext => "Region Of Origin" } if @show_region_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][subregion]", options_for_select([["", ""], ["List of districts", "List of districts"], ["", ""]]),
		{:id => "district_of_origin",
		 :helptext => "District Of Origin" } if @show_district_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][county_district]", options_for_select([["", ""], ["List of T/As in district", "List of T/As in district"], ["", ""]]),
		{:id => "ancestral_traditional_authority",
		 :helptext => "Ancestral Traditional Authority" } if @show_t_a_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][neighborhood_cell]", options_for_select([["", ""], ["List of villages under T/A", "List of villages under T/A"]]),
		{:id => "home_village",
		 :helptext => "Home Village" } if @show_home_village ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "CURRENT REGION", options_for_select([["Northern Region", "Northern Region"], ["Central Region", "Central Region"], ["Southern Region", "Southern Region"], ["", ""]]),
		{:id => "current_region",
		 :helptext => "Current Region" } if @show_current_region ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][address2]", options_for_select([["", ""], ["List of districts", "List of districts"], ["", ""]]),
		{:id => "current_district",
		 :helptext => "Current District" } if @show_current_district ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "CURRENT AREA OF RESIDENCE", options_for_select([["", ""], ["List of areas", "List of areas"], ["", ""]]),
		{:id => "current_area_of_residence",
		 :helptext => "Current Area Of Residence" } if @show_current_t_a ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][city_village]", options_for_select([["", ""], ["List of villages", "List of villages"]]),
		{:id => "current_location_or_village",
		 :helptext => "Current Location Or Village" } if @show_current_village ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[addresses][address1]", nil,
		{:id => "closest_landmark_or_plot_number",
		 :helptext => "Closest Landmark Or Plot Number" } if @show_current_landmark ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[cell_phone_number]", nil,
		{:id => "cell_phone_number",
		 :helptext => "Cell Phone Number" } if @show_cell_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[office_phone_number]", nil,
		{:id => "office_phone_number",
		 :helptext => "Office Phone Number" } if @show_office_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[home_phone_number]", nil,
		{:id => "home_phone_number",
		 :helptext => "Home Phone Number" } if @show_home_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[occupation]", options_for_select(@occupations),
		{:id => "occupation",
		 :helptext => "Occupation" } if @show_occupation ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( submit_tag 'Finish' ).to_s); @output_buffer.concat "\n"
;  end ; @output_buffer.concat "\n"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:118:in `compile!'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/renderable.rb:61:in `compile'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/renderable.rb:28:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/template.rb:205:in `render_template'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:265:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:348:in `_render_with_layout'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:262:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1250:in `render_for_file'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:945:in `render_without_benchmark'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1326:in `default_render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:617:in `call_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/flash.rb:146:in `perform_action'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `send'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `process_without_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:606:in `process'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:391:in `process'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:386:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/routing/route_set.rb:437:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:121:in `_call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:29:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:29:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:9:in `cache'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:28:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/string_coercion.rb:25:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/params_parser.rb:15:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/session/cookie_store.rb:93:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/failsafe.rb:26:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:114:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:34:in `run'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

ActionView::TemplateError (compile error
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:50: syntax error, unexpected ')', expecting '}'
		 :helptext => "Age" ).to_s); @output_buffer.concat ...
		                     ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:114: syntax error, unexpected kEND, expecting ')'
;  end ; @output_buffer.concat "\n"
      ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:116: syntax error, unexpected kENSURE, expecting ')'
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:118: syntax error, unexpected kEND, expecting ')') on line #50 of app/views/core_patient_registration/new.rhtml:
47:                  :tt_pageStyleClass => "NumbersOnly",
48:                  :max => 90,
49:                  :absoluteMax => 120,
50: 		 :helptext => "Age" %> <%# , :condition => (@show_birthyear ? "__$('year_of_birth').value == 'Unknown'" : "") } if @show_age %>
51: 
52: 	<%= select_tag "person[citizenship]", options_for_select([["", ""], ["Malawian", "Malawian"], ["Other", "Other"]]),
53: 		{:id => "nationality",

    app/views/core_patient_registration/new.rhtml:118:in `compile!'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (62.7ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:16:04) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
ERROR: compiling _run_rhtml_app47views47core_patient_registration47new46rhtml RAISED compile error
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:115: syntax error, unexpected kEND, expecting ')'
;  end ; @output_buffer.concat "\n"
      ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:117: syntax error, unexpected kENSURE, expecting ')'
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:119: syntax error, unexpected kEND, expecting ')'
Function body:           def _run_rhtml_app47views47core_patient_registration47new46rhtml(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<script type=\"text/javascript\" language=\"javascript\">\n\t<!--\n\t\t\n\t//-->\n</script>\n\n"





;  form_tag :controller => "core_patient_registration", :action => "create" do |f| ; @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][given_name]", params[:first_name],
		{:id => "first_name",
		 :helptext => "First Name" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][middle_name]", nil,
		{:id => "middle_name",
		 :helptext => "Middle Name" } if @show_middle_name ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][family_name]", params[:last_name],
		{:id => "last_name",
		 :helptext => "Last Name" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[gender]", options_for_select([["Male", "Male"], ["Female", "Female"], ["", ""]], params[:gender]),
		{:id => "gender",
		 :helptext => "Gender" } ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[names][family_name2]", nil,
		{:id => "maiden_name",
                 :condition => "__$('gender').value == 'Female'",
		 :helptext => "Maiden Name" } if @show_maiden_name ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[birth_year]", nil,
		{:id => "year_of_birth",
		 :helptext => "Year Of Birth" } # if @show_birthyear ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[birth_month]", options_for_select([["Jan", "Jan"], ["Feb", "Feb"], ["Mar", "Mar"], ["Apr", "Apr"], ["May", "May"], ["Jun", "Jun"], ["Jul", "Jul"], ["Aug", "Aug"], ["Sep", "Sep"], ["Oct", "Oct"], ["Nov", "Nov"], ["Dec", "Dec"], ["Unknown", "Unknown"], ["", ""]]),
		{:id => "month_of_birth",
		 :helptext => "Month Of Birth",
		:condition => '__$("year_of_birth").value != "Unknown"' } #if @show_birthyear and @show_birthmonth ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[birth_day]", nil,
		{:id => "date_of_birth_if_month_of_birth_!=_unknown",
		 :helptext => "Date Of Birth If Month Of Birth != Unknown",
		:condition => '$("month_of_birth").value != "Unknown"' } # if @show_birthmonth and @show_birthdate ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[age_estimate]", nil,
		{:id => "age_if_year_of_birth_=_unknown",
                 :field_type => "number",
                 :tt_pageStyleClass => "NumbersOnly",
                 :max => 90,
                 :absoluteMax => 120,
		 :helptext => "Age" } # ,
		# :condition => (@show_birthyear ? "__$('year_of_birth').value == 'Unknown'" : "") } if @show_age ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[citizenship]", options_for_select([["", ""], ["Malawian", "Malawian"], ["Other", "Other"]]),
		{:id => "nationality",
		 :helptext => "Nationality" } if @show_nationality ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[race]", nil,
		{:id => "race",
		 :helptext => "Specify nationality",
		:condition => '__$("nationality").value == "Other"' } if @show_nationality ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "REGION OF ORIGIN", options_for_select([["Northern Region", "Northern Region"], ["Central Region", "Central Region"], ["Southern Region", "Southern Region"], ["", ""]]),
		{:id => "region_of_origin",
		 :helptext => "Region Of Origin" } if @show_region_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][subregion]", options_for_select([["", ""], ["List of districts", "List of districts"], ["", ""]]),
		{:id => "district_of_origin",
		 :helptext => "District Of Origin" } if @show_district_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][county_district]", options_for_select([["", ""], ["List of T/As in district", "List of T/As in district"], ["", ""]]),
		{:id => "ancestral_traditional_authority",
		 :helptext => "Ancestral Traditional Authority" } if @show_t_a_of_origin ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][neighborhood_cell]", options_for_select([["", ""], ["List of villages under T/A", "List of villages under T/A"]]),
		{:id => "home_village",
		 :helptext => "Home Village" } if @show_home_village ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "CURRENT REGION", options_for_select([["Northern Region", "Northern Region"], ["Central Region", "Central Region"], ["Southern Region", "Southern Region"], ["", ""]]),
		{:id => "current_region",
		 :helptext => "Current Region" } if @show_current_region ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][address2]", options_for_select([["", ""], ["List of districts", "List of districts"], ["", ""]]),
		{:id => "current_district",
		 :helptext => "Current District" } if @show_current_district ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "CURRENT AREA OF RESIDENCE", options_for_select([["", ""], ["List of areas", "List of areas"], ["", ""]]),
		{:id => "current_area_of_residence",
		 :helptext => "Current Area Of Residence" } if @show_current_t_a ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[addresses][city_village]", options_for_select([["", ""], ["List of villages", "List of villages"]]),
		{:id => "current_location_or_village",
		 :helptext => "Current Location Or Village" } if @show_current_village ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[addresses][address1]", nil,
		{:id => "closest_landmark_or_plot_number",
		 :helptext => "Closest Landmark Or Plot Number" } if @show_current_landmark ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[cell_phone_number]", nil,
		{:id => "cell_phone_number",
		 :helptext => "Cell Phone Number" } if @show_cell_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[office_phone_number]", nil,
		{:id => "office_phone_number",
		 :helptext => "Office Phone Number" } if @show_office_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( text_field_tag "person[home_phone_number]", nil,
		{:id => "home_phone_number",
		 :helptext => "Home Phone Number" } if @show_home_phone_number ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( select_tag "person[occupation]", options_for_select(@occupations),
		{:id => "occupation",
		 :helptext => "Occupation" } if @show_occupation ).to_s); @output_buffer.concat "\n\n\t"

; @output_buffer.concat(( submit_tag 'Finish' ).to_s); @output_buffer.concat "\n"
;  end ; @output_buffer.concat "\n"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:119:in `compile!'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/renderable.rb:61:in `compile'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/renderable.rb:28:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/template.rb:205:in `render_template'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:265:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:348:in `_render_with_layout'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:262:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1250:in `render_for_file'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:945:in `render_without_benchmark'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1326:in `default_render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:617:in `call_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/flash.rb:146:in `perform_action'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `send'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `process_without_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:606:in `process'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:391:in `process'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:386:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/routing/route_set.rb:437:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:121:in `_call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:29:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:29:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:9:in `cache'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:28:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/string_coercion.rb:25:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/params_parser.rb:15:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/session/cookie_store.rb:93:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/failsafe.rb:26:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:114:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:34:in `run'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

ActionView::TemplateError (compile error
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:115: syntax error, unexpected kEND, expecting ')'
;  end ; @output_buffer.concat "\n"
      ^
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:117: syntax error, unexpected kENSURE, expecting ')'
/var/www/components/core_patient_registration/app/views/core_patient_registration/new.rhtml:119: syntax error, unexpected kEND, expecting ')') on line #115 of app/views/core_patient_registration/new.rhtml:
112: 		 :helptext => "Occupation" } if @show_occupation %>
113: 
114: 	<%= submit_tag 'Finish' %>
115: <% end %>

    app/views/core_patient_registration/new.rhtml:119:in `compile!'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (25.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:17:14) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 12ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:19:10) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 17ms (View: 16, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:19:47) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:20:59) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 18ms (View: 16, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:22:03) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 12ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:22:56) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 11ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:24:19) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 12ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:25:21) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 16ms (View: 15, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:25:35) [POST]
  Parameters: {"person"=>{"birth_day"=>"", "gender"=>"Female", "age_estimate"=>"", "birth_year"=>"1900", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "birth_month"=>"Unknown"}}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

RuntimeError (--- !map:HashWithIndifferentAccess 
person: !map:HashWithIndifferentAccess 
  gender: Female
  birth_day: ""
  age_estimate: ""
  names: !map:HashWithIndifferentAccess 
    given_name: Mary
    family_name: Banda
  birth_year: "1900"
  birth_month: Unknown
action: create
controller: core_patient_registration
):
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (54.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:28:35) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 11ms (View: 10, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:32:34) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 11ms (View: 10, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:32:51) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:33:39) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 11:40:44) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:41:43) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "gender"=>"Female", "age_estimate"=>"", "patient"=>"", "birth_year"=>"1956", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "birth_month"=>"2"}}
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

RuntimeError (--- !map:HashWithIndifferentAccess 
gender: Female
birth_day: "10"
age_estimate: ""
patient: ""
names: !map:HashWithIndifferentAccess 
  given_name: Mary
  family_name: Banda
birth_year: "1956"
birth_month: "2"
):
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:42:09) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "gender"=>"Female", "age_estimate"=>"", "patient"=>"", "birth_year"=>"1956", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "birth_month"=>"2"}}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m

NameError (uninitialized constant CoreOpenmrs::User):
  app/models/core_openmrs.rb:45:in `before_save'
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (29.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 11:44:39) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "gender"=>"Female", "age_estimate"=>"", "patient"=>"", "birth_year"=>"1956", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "birth_month"=>"2"}}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m

NameError (uninitialized constant CoreOpenmrs::Person):
  app/models/core_openmrs.rb:53:in `before_create'
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (29.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 12:02:08) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:02:18) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "birth_year"=>"1956", "patient"=>"", "birth_month"=>"2", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "gender"=>"Female", "age_estimate"=>""}}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m

NameError (uninitialized constant CoreOpenmrs::User):
  app/models/core_openmrs.rb:64:in `before_create'
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (29.9ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:03:20) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "birth_year"=>"1956", "patient"=>"", "birth_month"=>"2", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "gender"=>"Female", "age_estimate"=>""}}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.0ms)[0m   [0mROLLBACK[0m

NameError (uninitialized constant CoreOpenmrs::User):
  app/models/core_openmrs.rb:64:in `before_create'
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (31.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:03:34) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "birth_year"=>"1956", "patient"=>"", "birth_month"=>"2", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "gender"=>"Female", "age_estimate"=>""}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m

NameError (uninitialized constant CoreOpenmrs::CoreUser):
  app/models/core_openmrs.rb:64:in `before_create'
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (68.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:05:03) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "birth_year"=>"1956", "patient"=>"", "birth_month"=>"2", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "gender"=>"Female", "age_estimate"=>""}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW TABLES[0m

NoMethodError (undefined method `devise' for CoreUser(Table doesn't exist):Class):
  app/models/core_user.rb:5
  app/models/core_openmrs.rb:64:in `before_create'
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
Rendered rescues/_trace (70.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:05:29) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "birth_year"=>"1956", "patient"=>"", "birth_month"=>"2", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "gender"=>"Female", "age_estimate"=>""}}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m

NameError (uninitialized constant CoreOpenmrs::CoreUser):
  app/models/core_openmrs.rb:64:in `before_create'
  app/models/core_person.rb:148:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (73.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:07:20) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "birth_year"=>"1956", "patient"=>"", "birth_month"=>"2", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "gender"=>"Female", "age_estimate"=>""}}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (23.3ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (133.7ms)[0m   [0;1mINSERT INTO `person` (`dead`, `voided`, `voided_by`, `date_voided`, `uuid`, `changed_by`, `void_reason`, `birthdate_estimated`, `date_created`, `gender`, `death_date`, `cause_of_death`, `creator`, `date_changed`, `birthdate`) VALUES(0, 0, NULL, NULL, '8d0ccaeb-437a-11e2-aa70-30f9edafb6df', 1, NULL, 0, '2012-12-11 10:07:20', 'F', NULL, NULL, 1, '2012-12-11 10:07:20', NULL)[0m
  [4;35;1mSQL (92.8ms)[0m   [0mCOMMIT[0m

RuntimeError (--- !map:HashWithIndifferentAccess 
gender: F
):
  app/models/core_person.rb:150:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:07:50) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "birth_year"=>"1956", "patient"=>"", "birth_month"=>"2", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "gender"=>"Female", "age_estimate"=>""}}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (16.6ms)[0m   [0mINSERT INTO `person` (`dead`, `voided`, `voided_by`, `date_voided`, `uuid`, `changed_by`, `void_reason`, `birthdate_estimated`, `date_created`, `gender`, `death_date`, `cause_of_death`, `creator`, `date_changed`, `birthdate`) VALUES(0, 0, NULL, NULL, '9eab1029-437a-11e2-aa70-30f9edafb6df', 1, NULL, 0, '2012-12-11 10:07:50', 'F', NULL, NULL, 1, '2012-12-11 10:07:50', NULL)[0m
  [4;36;1mSQL (67.4ms)[0m   [0;1mCOMMIT[0m

RuntimeError (--- &id001 !ruby/object:CorePerson 
attributes: 
  dead: 0
  voided: 0
  uuid: 9eab1029-437a-11e2-aa70-30f9edafb6df
  date_voided: 
  voided_by: 
  changed_by: 1
  void_reason: 
  date_created: 2012-12-11 10:07:50.161624 Z
  birthdate_estimated: 0
  creator: 1
  cause_of_death: 
  death_date: 
  gender: F
  date_changed: 2012-12-11 10:07:50.161373 Z
  person_id: 25
  birthdate: 
attributes_cache: {}

changed_attributes: {}

errors: !ruby/object:ActiveRecord::Errors 
  base: *id001
  errors: !map:ActiveSupport::OrderedHash {}

new_record: false
new_record_before_save: true
):
  app/models/core_person.rb:150:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:08:03) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "birth_year"=>"1956", "patient"=>"", "birth_month"=>"2", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "gender"=>"Female", "age_estimate"=>""}}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (0.4ms)[0m   [0;1mINSERT INTO `person` (`dead`, `voided`, `voided_by`, `date_voided`, `uuid`, `changed_by`, `void_reason`, `birthdate_estimated`, `date_created`, `gender`, `death_date`, `cause_of_death`, `creator`, `date_changed`, `birthdate`) VALUES(0, 0, NULL, NULL, 'a6778279-437a-11e2-aa70-30f9edafb6df', 1, NULL, 0, '2012-12-11 10:08:03', 'F', NULL, NULL, 1, '2012-12-11 10:08:03', NULL)[0m
  [4;35;1mSQL (76.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (50.3ms)[0m   [0mUPDATE `person` SET `date_changed` = '2012-12-11 10:08:03', `birthdate` = '1956-02-10' WHERE `person_id` = 26[0m
  [4;36;1mSQL (103.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m

NoMethodError (undefined method `soundex' for "Mary":String):
  app/models/core_person_name.rb:11:in `before_save'
  app/models/core_person.rb:159:in `create_from_form'
  app/controllers/core_patient_registration_controller.rb:58:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (65.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:09:05) [POST]
  Parameters: {"person"=>{"birth_day"=>"10", "birth_year"=>"1956", "patient"=>"", "birth_month"=>"2", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "gender"=>"Female", "age_estimate"=>""}}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (0.5ms)[0m   [0;1mINSERT INTO `person` (`dead`, `voided`, `voided_by`, `date_voided`, `uuid`, `changed_by`, `void_reason`, `birthdate_estimated`, `date_created`, `gender`, `death_date`, `cause_of_death`, `creator`, `date_changed`, `birthdate`) VALUES(0, 0, NULL, NULL, 'cb8284c6-437a-11e2-aa70-30f9edafb6df', 1, NULL, 0, '2012-12-11 10:09:05', 'F', NULL, NULL, 1, '2012-12-11 10:09:05', NULL)[0m
  [4;35;1mSQL (89.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (20.5ms)[0m   [0mUPDATE `person` SET `date_changed` = '2012-12-11 10:09:05', `birthdate` = '1956-02-10' WHERE `person_id` = 27[0m
  [4;36;1mSQL (67.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (18.7ms)[0m   [0mINSERT INTO `person_name` (`given_name`, `degree`, `family_name2`, `voided`, `family_name_suffix`, `voided_by`, `date_voided`, `uuid`, `changed_by`, `prefix`, `middle_name`, `void_reason`, `date_created`, `preferred`, `creator`, `family_name_prefix`, `date_changed`, `person_id`, `family_name`) VALUES('Mary', NULL, NULL, 0, NULL, NULL, NULL, 'cb9eba43-437a-11e2-aa70-30f9edafb6df', 1, NULL, NULL, NULL, '2012-12-11 10:09:05', 0, 1, NULL, '2012-12-11 10:09:05', 27, 'Banda')[0m
  [4;36;1mSQL (43.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (14.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (7.7ms)[0m   [0mINSERT INTO `patient` (`voided`, `voided_by`, `date_voided`, `changed_by`, `void_reason`, `date_created`, `creator`, `patient_id`, `tribe`, `date_changed`) VALUES(0, NULL, NULL, 1, NULL, '2012-12-11 10:09:05', 1, 27, NULL, '2012-12-11 10:09:05')[0m
  [4;36;1mSQL (56.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonName Load (14.9ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC[0m

RuntimeError (--- &id002 !ruby/object:CorePerson 
attributes: 
  dead: 0
  voided: 0
  uuid: cb8284c6-437a-11e2-aa70-30f9edafb6df
  date_voided: 
  voided_by: 
  changed_by: 1
  void_reason: 
  date_created: 2012-12-11 10:09:05.393344 Z
  birthdate_estimated: 0
  creator: 1
  cause_of_death: 
  death_date: 
  gender: F
  date_changed: 2012-12-11 10:09:05.486244 Z
  person_id: 27
  birthdate: 1956-02-10
attributes_cache: {}

changed_attributes: {}

errors: !ruby/object:ActiveRecord::Errors 
  base: *id002
  errors: !map:ActiveSupport::OrderedHash {}

names: 
- !ruby/object:CorePersonName 
  attributes: 
    given_name: Mary
    degree: 
    family_name2: 
    voided: "0"
    family_name_suffix: 
    voided_by: 
    date_voided: 
    uuid: cb9eba43-437a-11e2-aa70-30f9edafb6df
    changed_by: "1"
    prefix: 
    middle_name: 
    void_reason: 
    date_created: 2012-12-11 10:09:05
    person_name_id: "24"
    preferred: "0"
    creator: "1"
    family_name_prefix: 
    date_changed: 2012-12-11 10:09:05
    person_id: "27"
    family_name: Banda
  attributes_cache: {}

new_record: false
new_record_before_save: false
patient: &id001 !ruby/object:CorePatient 
  attributes: 
    voided: 0
    date_voided: 
    voided_by: 
    changed_by: 1
    void_reason: 
    date_created: 2012-12-11 10:09:05.666071 Z
    patient_id: 27
    creator: 1
    date_changed: 2012-12-11 10:09:05.665881 Z
    tribe: 
  attributes_cache: {}

  changed_attributes: {}

  errors: !ruby/object:ActiveRecord::Errors 
    base: *id001
    errors: !map:ActiveSupport::OrderedHash {}

  new_record: false
  new_record_before_save: true
):
  app/controllers/core_patient_registration_controller.rb:62:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:13:48) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 15ms (View: 13, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:14:34) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 14ms (View: 13, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:14:45) [POST]
  Parameters: {"person"=>{"birth_day"=>"", "birth_year"=>"Unknown", "patient"=>"", "birth_month"=>"", "names"=>{"given_name"=>"John", "family_name"=>"Banda"}, "gender"=>"Male", "age_estimate"=>"36"}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (17.4ms)[0m   [0mINSERT INTO `person` (`dead`, `voided`, `voided_by`, `date_voided`, `uuid`, `changed_by`, `void_reason`, `birthdate_estimated`, `date_created`, `gender`, `death_date`, `cause_of_death`, `creator`, `date_changed`, `birthdate`) VALUES(0, 0, NULL, NULL, '960d7ac8-437b-11e2-aa70-30f9edafb6df', 1, NULL, 0, '2012-12-11 10:14:45', 'M', NULL, NULL, 1, '2012-12-11 10:14:45', NULL)[0m
  [4;36;1mSQL (109.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (20.1ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `date_changed` = '2012-12-11 10:14:45', `birthdate` = '1976-07-01' WHERE `person_id` = 28[0m
  [4;35;1mSQL (111.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (13.4ms)[0m   [0;1mINSERT INTO `person_name` (`given_name`, `degree`, `family_name2`, `voided`, `family_name_suffix`, `voided_by`, `date_voided`, `uuid`, `changed_by`, `prefix`, `middle_name`, `void_reason`, `date_created`, `preferred`, `creator`, `family_name_prefix`, `date_changed`, `person_id`, `family_name`) VALUES('John', NULL, NULL, 0, NULL, NULL, NULL, '96360499-437b-11e2-aa70-30f9edafb6df', 1, NULL, NULL, NULL, '2012-12-11 10:14:45', 0, 1, NULL, '2012-12-11 10:14:45', 28, 'Banda')[0m
  [4;35;1mSQL (93.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 28 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (15.5ms)[0m   [0;1mINSERT INTO `patient` (`voided`, `voided_by`, `date_voided`, `changed_by`, `void_reason`, `date_created`, `creator`, `patient_id`, `tribe`, `date_changed`) VALUES(0, NULL, NULL, 1, NULL, '2012-12-11 10:14:45', 1, 28, NULL, '2012-12-11 10:14:45')[0m
  [4;35;1mSQL (89.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC[0m

RuntimeError (--- &id002 !ruby/object:CorePerson 
attributes: 
  dead: 0
  voided: 0
  uuid: 960d7ac8-437b-11e2-aa70-30f9edafb6df
  date_voided: 
  voided_by: 
  changed_by: 1
  void_reason: 
  date_created: 2012-12-11 10:14:45.203804 Z
  birthdate_estimated: 1
  creator: 1
  cause_of_death: 
  death_date: 
  gender: M
  date_changed: 2012-12-11 10:14:45.333726 Z
  person_id: 28
  birthdate: 1976-07-01
attributes_cache: {}

changed_attributes: {}

errors: !ruby/object:ActiveRecord::Errors 
  base: *id002
  errors: !map:ActiveSupport::OrderedHash {}

names: 
- !ruby/object:CorePersonName 
  attributes: 
    given_name: John
    degree: 
    family_name2: 
    voided: "0"
    family_name_suffix: 
    voided_by: 
    date_voided: 
    uuid: 96360499-437b-11e2-aa70-30f9edafb6df
    changed_by: "1"
    prefix: 
    middle_name: 
    void_reason: 
    date_created: 2012-12-11 10:14:45
    person_name_id: "25"
    preferred: "0"
    creator: "1"
    family_name_prefix: 
    date_changed: 2012-12-11 10:14:45
    person_id: "28"
    family_name: Banda
  attributes_cache: {}

new_record: false
new_record_before_save: false
patient: &id001 !ruby/object:CorePatient 
  attributes: 
    voided: 0
    date_voided: 
    voided_by: 
    changed_by: 1
    void_reason: 
    date_created: 2012-12-11 10:14:45.593588 Z
    patient_id: 28
    creator: 1
    date_changed: 2012-12-11 10:14:45.593187 Z
    tribe: 
  attributes_cache: {}

  changed_attributes: {}

  errors: !ruby/object:ActiveRecord::Errors 
    base: *id001
    errors: !map:ActiveSupport::OrderedHash {}

  new_record: false
  new_record_before_save: true
):
  app/controllers/core_patient_registration_controller.rb:62:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (20.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:29:37) [POST]
  Parameters: {"person"=>{"birth_day"=>"", "birth_year"=>"Unknown", "patient"=>"", "birth_month"=>"", "names"=>{"given_name"=>"John", "family_name"=>"Banda"}, "gender"=>"Male", "age_estimate"=>"36"}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (16.6ms)[0m   [0;1mINSERT INTO `person` (`dead`, `voided`, `voided_by`, `date_voided`, `uuid`, `changed_by`, `void_reason`, `birthdate_estimated`, `date_created`, `gender`, `death_date`, `cause_of_death`, `creator`, `date_changed`, `birthdate`) VALUES(0, 0, NULL, NULL, 'a9bbd2eb-437d-11e2-aa70-30f9edafb6df', 1, NULL, 0, '2012-12-11 10:29:37', 'M', NULL, NULL, 1, '2012-12-11 10:29:37', NULL)[0m
  [4;35;1mSQL (67.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (18.2ms)[0m   [0mUPDATE `person` SET `birthdate_estimated` = 1, `date_changed` = '2012-12-11 10:29:37', `birthdate` = '1976-07-01' WHERE `person_id` = 29[0m
  [4;36;1mSQL (68.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (18.1ms)[0m   [0mINSERT INTO `person_name` (`given_name`, `degree`, `family_name2`, `voided`, `family_name_suffix`, `voided_by`, `date_voided`, `uuid`, `changed_by`, `prefix`, `middle_name`, `void_reason`, `date_created`, `preferred`, `creator`, `family_name_prefix`, `date_changed`, `person_id`, `family_name`) VALUES('John', NULL, NULL, 0, NULL, NULL, NULL, 'a9d72283-437d-11e2-aa70-30f9edafb6df', 1, NULL, NULL, NULL, '2012-12-11 10:29:37', 0, 1, NULL, '2012-12-11 10:29:37', 29, 'Banda')[0m
  [4;36;1mSQL (64.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 29 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (18.7ms)[0m   [0mINSERT INTO `patient` (`voided`, `voided_by`, `date_voided`, `changed_by`, `void_reason`, `date_created`, `creator`, `patient_id`, `tribe`, `date_changed`) VALUES(0, NULL, NULL, 1, NULL, '2012-12-11 10:29:37', 1, 29, NULL, '2012-12-11 10:29:37')[0m
  [4;36;1mSQL (58.6ms)[0m   [0;1mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 381ms (View: 5, DB: 336) | 200 OK [http://localhost/core_patient_registration/create]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:29:37) [GET]
  Parameters: {"patient_id"=>"29"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 29) AND (person.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 29 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError (Unable to find patient (29) or generate a national id label for that patient):
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (26.8ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:29:43) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:29:55) [POST]
  Parameters: {"person"=>{"birth_day"=>"", "birth_year"=>"Unknown", "patient"=>"", "birth_month"=>"", "names"=>{"given_name"=>"John", "family_name"=>"Banda"}, "gender"=>"Male", "age_estimate"=>"36"}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (17.5ms)[0m   [0mINSERT INTO `person` (`dead`, `voided`, `voided_by`, `date_voided`, `uuid`, `changed_by`, `void_reason`, `birthdate_estimated`, `date_created`, `gender`, `death_date`, `cause_of_death`, `creator`, `date_changed`, `birthdate`) VALUES(0, 0, NULL, NULL, 'b4915fb6-437d-11e2-aa70-30f9edafb6df', 1, NULL, 0, '2012-12-11 10:29:55', 'M', NULL, NULL, 1, '2012-12-11 10:29:55', NULL)[0m
  [4;36;1mSQL (62.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (12.6ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `date_changed` = '2012-12-11 10:29:55', `birthdate` = '1976-07-01' WHERE `person_id` = 30[0m
  [4;35;1mSQL (74.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (15.3ms)[0m   [0;1mINSERT INTO `person_name` (`given_name`, `degree`, `family_name2`, `voided`, `family_name_suffix`, `voided_by`, `date_voided`, `uuid`, `changed_by`, `prefix`, `middle_name`, `void_reason`, `date_created`, `preferred`, `creator`, `family_name_prefix`, `date_changed`, `person_id`, `family_name`) VALUES('John', NULL, NULL, 0, NULL, NULL, NULL, 'b4abe9b5-437d-11e2-aa70-30f9edafb6df', 1, NULL, NULL, NULL, '2012-12-11 10:29:55', 0, 1, NULL, '2012-12-11 10:29:55', 30, 'Banda')[0m
  [4;35;1mSQL (58.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (21.6ms)[0m   [0;1mINSERT INTO `patient` (`voided`, `voided_by`, `date_voided`, `changed_by`, `void_reason`, `date_created`, `creator`, `patient_id`, `tribe`, `date_changed`) VALUES(0, NULL, NULL, 1, NULL, '2012-12-11 10:29:55', 1, 30, NULL, '2012-12-11 10:29:55')[0m
  [4;35;1mSQL (53.6ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 395ms (View: 3, DB: 320) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:29:55) [GET]
  Parameters: {"patient_id"=>"30"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError (Unable to find patient (30) or generate a national id label for that patient):
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (20.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:30:01) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 47ms (View: 45, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 12:30:11) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:30:34) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "age_estimate"=>"35", "names"=>{"family_name"=>"Banda", "given_name"=>"Jane"}, "birth_month"=>"", "birth_day"=>"", "patient"=>"", "birth_year"=>"Unknown"}}
  [4;36;1mCorePerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (15.4ms)[0m   [0mINSERT INTO `person` (`gender`, `uuid`, `creator`, `date_created`, `date_changed`, `death_date`, `date_voided`, `birthdate`, `changed_by`, `birthdate_estimated`, `cause_of_death`, `dead`, `voided_by`, `void_reason`, `voided`) VALUES('F', 'cbf3850e-437d-11e2-aa70-30f9edafb6df', 1, '2012-12-11 10:30:34', '2012-12-11 10:30:34', NULL, NULL, NULL, 1, 0, NULL, 0, NULL, NULL, 0)[0m
  [4;36;1mSQL (93.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (16.9ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1977-07-01', `date_changed` = '2012-12-11 10:30:34', `birthdate_estimated` = 1 WHERE `person_id` = 31[0m
  [4;35;1mSQL (81.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (0.2ms)[0m   [0;1mINSERT INTO `person_name` (`prefix`, `uuid`, `family_name2`, `creator`, `date_created`, `date_changed`, `person_id`, `family_name`, `date_voided`, `given_name`, `family_name_prefix`, `changed_by`, `preferred`, `middle_name`, `family_name_suffix`, `voided_by`, `void_reason`, `voided`, `degree`) VALUES(NULL, 'cc14b681-437d-11e2-aa70-30f9edafb6df', NULL, 1, '2012-12-11 10:30:34', '2012-12-11 10:30:34', 31, 'Banda', NULL, 'Jane', NULL, 1, 0, NULL, NULL, NULL, NULL, 0, NULL)[0m
  [4;35;1mSQL (50.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 31 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (16.1ms)[0m   [0;1mINSERT INTO `patient` (`patient_id`, `creator`, `date_created`, `date_changed`, `date_voided`, `changed_by`, `tribe`, `voided_by`, `void_reason`, `voided`) VALUES(31, 1, '2012-12-11 10:30:34', '2012-12-11 10:30:34', NULL, 1, NULL, NULL, NULL, 0)[0m
  [4;35;1mSQL (73.7ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 475ms (View: 9, DB: 353) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:30:35) [GET]
  Parameters: {"patient_id"=>"31"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 31) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 31 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 31 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError (Unable to find patient (31) or generate a national id label for that patient):
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (30.9ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:30:41) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 12:31:35) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:31:40) [POST]
  Parameters: {"person"=>{"age_estimate"=>"35", "birth_month"=>"", "gender"=>"Female", "birth_day"=>"", "birth_year"=>"Unknown", "names"=>{"given_name"=>"Jane", "family_name"=>"Banda"}, "patient"=>""}}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (12.1ms)[0m   [0mINSERT INTO `person` (`gender`, `date_changed`, `birthdate_estimated`, `creator`, `voided`, `cause_of_death`, `voided_by`, `uuid`, `dead`, `death_date`, `changed_by`, `date_voided`, `void_reason`, `birthdate`, `date_created`) VALUES('F', '2012-12-11 10:31:40', 0, 1, 0, NULL, NULL, 'f34714c2-437d-11e2-aa70-30f9edafb6df', 0, NULL, 1, NULL, NULL, NULL, '2012-12-11 10:31:40')[0m
  [4;36;1mSQL (64.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (15.4ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `date_changed` = '2012-12-11 10:31:40', `birthdate` = '1977-07-01' WHERE `person_id` = 32[0m
  [4;35;1mSQL (82.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (12.7ms)[0m   [0;1mINSERT INTO `person_name` (`date_changed`, `given_name`, `preferred`, `person_id`, `creator`, `voided`, `family_name_prefix`, `voided_by`, `uuid`, `prefix`, `middle_name`, `family_name_suffix`, `date_voided`, `changed_by`, `family_name`, `void_reason`, `date_created`, `family_name2`, `degree`) VALUES('2012-12-11 10:31:40', 'Jane', 0, 32, 1, 0, NULL, NULL, 'f363394b-437d-11e2-aa70-30f9edafb6df', NULL, NULL, NULL, NULL, 1, 'Banda', NULL, '2012-12-11 10:31:40', NULL, NULL)[0m
  [4;35;1mSQL (59.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 32 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (20.7ms)[0m   [0;1mINSERT INTO `patient` (`date_changed`, `tribe`, `creator`, `voided`, `voided_by`, `changed_by`, `date_voided`, `void_reason`, `date_created`, `patient_id`) VALUES('2012-12-11 10:31:40', NULL, 1, 0, NULL, 1, NULL, NULL, '2012-12-11 10:31:40', 32)[0m
  [4;35;1mSQL (69.8ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 489ms (View: 8, DB: 343) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:31:41) [GET]
  Parameters: {"patient_id"=>"32"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.5ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 32) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 32 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 32 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError (Unable to find patient (32) or generate a national id label for that patient):
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (25.6ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:31:47) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 14ms (View: 13, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:32:29) [POST]
  Parameters: {"person"=>{"age_estimate"=>"35", "birth_month"=>"", "gender"=>"Female", "birth_day"=>"", "birth_year"=>"Unknown", "names"=>{"given_name"=>"Jane", "family_name"=>"Banda"}, "patient"=>""}}
  [4;35;1mCorePerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (14.0ms)[0m   [0;1mINSERT INTO `person` (`gender`, `date_changed`, `birthdate_estimated`, `creator`, `voided`, `cause_of_death`, `voided_by`, `uuid`, `dead`, `death_date`, `changed_by`, `date_voided`, `void_reason`, `birthdate`, `date_created`) VALUES('F', '2012-12-11 10:32:29', 0, 1, 0, NULL, NULL, '1092abd9-437e-11e2-aa70-30f9edafb6df', 0, NULL, 1, NULL, NULL, NULL, '2012-12-11 10:32:29')[0m
  [4;35;1mSQL (88.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (15.4ms)[0m   [0mUPDATE `person` SET `birthdate_estimated` = 1, `date_changed` = '2012-12-11 10:32:29', `birthdate` = '1977-07-01' WHERE `person_id` = 33[0m
  [4;36;1mSQL (82.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (0.3ms)[0m   [0mINSERT INTO `person_name` (`date_changed`, `given_name`, `preferred`, `person_id`, `creator`, `voided`, `family_name_prefix`, `voided_by`, `uuid`, `prefix`, `middle_name`, `family_name_suffix`, `date_voided`, `changed_by`, `family_name`, `void_reason`, `date_created`, `family_name2`, `degree`) VALUES('2012-12-11 10:32:29', 'Jane', 0, 33, 1, 0, NULL, NULL, '10b28498-437e-11e2-aa70-30f9edafb6df', NULL, NULL, NULL, NULL, 1, 'Banda', NULL, '2012-12-11 10:32:29', NULL, NULL)[0m
  [4;36;1mSQL (60.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 33 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (19.1ms)[0m   [0mINSERT INTO `patient` (`date_changed`, `tribe`, `creator`, `voided`, `voided_by`, `changed_by`, `date_voided`, `void_reason`, `date_created`, `patient_id`) VALUES('2012-12-11 10:32:30', NULL, 1, 0, NULL, 1, NULL, NULL, '2012-12-11 10:32:30', 33)[0m
  [4;36;1mSQL (69.5ms)[0m   [0;1mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 434ms (View: 3, DB: 355) | 200 OK [http://localhost/core_patient_registration/create]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:32:30) [GET]
  Parameters: {"patient_id"=>"33"}
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.6ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 33) AND (person.voided = 0) [0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 33 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 33 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

NameError (uninitialized constant CorePatientIdentifierType::Location):
  app/models/core_patient_identifier_type.rb:11:in `next_identifier'
  app/models/core_person.rb:248:in `national_id'
  app/models/core_person.rb:230:in `national_id_label'
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (84.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:32:36) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 12:35:05) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (3.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:35:11) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "birth_year"=>"Unknown", "patient"=>"", "birth_month"=>"", "age_estimate"=>"35", "names"=>{"given_name"=>"Jane", "family_name"=>"Banda"}, "birth_day"=>""}}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (14.7ms)[0m   [0mINSERT INTO `person` (`gender`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `birthdate_estimated`, `death_date`, `date_voided`, `uuid`, `dead`, `cause_of_death`, `date_created`, `voided`, `creator`, `birthdate`) VALUES('F', '2012-12-11 10:35:11', NULL, 1, NULL, 0, NULL, NULL, '70cbf81e-437e-11e2-aa70-30f9edafb6df', 0, NULL, '2012-12-11 10:35:11', 0, 1, NULL)[0m
  [4;36;1mSQL (62.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (18.5ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `birthdate` = '1977-07-01', `date_changed` = '2012-12-11 10:35:11' WHERE `person_id` = 34[0m
  [4;35;1mSQL (79.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (11.6ms)[0m   [0;1mINSERT INTO `person_name` (`given_name`, `void_reason`, `date_changed`, `family_name_prefix`, `voided_by`, `changed_by`, `prefix`, `family_name2`, `family_name_suffix`, `date_voided`, `uuid`, `person_id`, `date_created`, `voided`, `degree`, `preferred`, `family_name`, `creator`, `middle_name`) VALUES('Jane', NULL, '2012-12-11 10:35:11', NULL, NULL, 1, NULL, NULL, NULL, NULL, '70e7f2c2-437e-11e2-aa70-30f9edafb6df', 34, '2012-12-11 10:35:11', 0, NULL, 0, 'Banda', 1, NULL)[0m
  [4;35;1mSQL (50.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 34 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.4ms)[0m   [0;1mINSERT INTO `patient` (`tribe`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `date_voided`, `patient_id`, `date_created`, `voided`, `creator`) VALUES(NULL, '2012-12-11 10:35:11', NULL, 1, NULL, NULL, 34, '2012-12-11 10:35:11', 0, 1)[0m
  [4;35;1mSQL (53.9ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 443ms (View: 13, DB: 301) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:35:11) [GET]
  Parameters: {"patient_id"=>"34"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 34) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 34 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 34 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.3ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m

NoMethodError (undefined method `site_id' for nil:NilClass):
  app/models/core_patient_identifier_type.rb:11:in `next_identifier'
  app/models/core_person.rb:248:in `national_id'
  app/models/core_person.rb:230:in `national_id_label'
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (32.1ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:35:17) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:36:57) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "birth_year"=>"Unknown", "patient"=>"", "birth_month"=>"", "age_estimate"=>"35", "names"=>{"given_name"=>"Jane", "family_name"=>"Banda"}, "birth_day"=>""}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (18.6ms)[0m   [0mINSERT INTO `person` (`gender`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `birthdate_estimated`, `death_date`, `date_voided`, `uuid`, `dead`, `cause_of_death`, `date_created`, `voided`, `creator`, `birthdate`) VALUES('F', '2012-12-11 10:36:57', NULL, 1, NULL, 0, NULL, NULL, 'b051439a-437e-11e2-aa70-30f9edafb6df', 0, NULL, '2012-12-11 10:36:57', 0, 1, NULL)[0m
  [4;36;1mSQL (76.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (24.3ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `birthdate` = '1977-07-01', `date_changed` = '2012-12-11 10:36:57' WHERE `person_id` = 35[0m
  [4;35;1mSQL (106.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (17.2ms)[0m   [0;1mINSERT INTO `person_name` (`given_name`, `void_reason`, `date_changed`, `family_name_prefix`, `voided_by`, `changed_by`, `prefix`, `family_name2`, `family_name_suffix`, `date_voided`, `uuid`, `person_id`, `date_created`, `voided`, `degree`, `preferred`, `family_name`, `creator`, `middle_name`) VALUES('Jane', NULL, '2012-12-11 10:36:57', NULL, NULL, 1, NULL, NULL, NULL, NULL, 'b074ec2a-437e-11e2-aa70-30f9edafb6df', 35, '2012-12-11 10:36:57', 0, NULL, 0, 'Banda', 1, NULL)[0m
  [4;35;1mSQL (77.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 35 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (17.5ms)[0m   [0;1mINSERT INTO `patient` (`tribe`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `date_voided`, `patient_id`, `date_created`, `voided`, `creator`) VALUES(NULL, '2012-12-11 10:36:58', NULL, 1, NULL, NULL, 35, '2012-12-11 10:36:58', 0, 1)[0m
  [4;35;1mSQL (81.5ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 508ms (View: 3, DB: 424) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:36:58) [GET]
  Parameters: {"patient_id"=>"35"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 35) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 35 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 35 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.0ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m

NoMethodError (undefined method `rjust' for 1:Fixnum):
  app/models/core_patient_identifier_type.rb:13:in `next_identifier'
  app/models/core_person.rb:248:in `national_id'
  app/models/core_person.rb:230:in `national_id_label'
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (60.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:37:04) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 12ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:37:31) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "birth_year"=>"Unknown", "patient"=>"", "birth_month"=>"", "age_estimate"=>"35", "names"=>{"given_name"=>"Jane", "family_name"=>"Banda"}, "birth_day"=>""}}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (26.5ms)[0m   [0mINSERT INTO `person` (`gender`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `birthdate_estimated`, `death_date`, `date_voided`, `uuid`, `dead`, `cause_of_death`, `date_created`, `voided`, `creator`, `birthdate`) VALUES('F', '2012-12-11 10:37:31', NULL, 1, NULL, 0, NULL, NULL, 'c4ab6a97-437e-11e2-aa70-30f9edafb6df', 0, NULL, '2012-12-11 10:37:31', 0, 1, NULL)[0m
  [4;36;1mSQL (85.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `birthdate` = '1977-07-01', `date_changed` = '2012-12-11 10:37:32' WHERE `person_id` = 36[0m
  [4;35;1mSQL (75.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (0.3ms)[0m   [0;1mINSERT INTO `person_name` (`given_name`, `void_reason`, `date_changed`, `family_name_prefix`, `voided_by`, `changed_by`, `prefix`, `family_name2`, `family_name_suffix`, `date_voided`, `uuid`, `person_id`, `date_created`, `voided`, `degree`, `preferred`, `family_name`, `creator`, `middle_name`) VALUES('Jane', NULL, '2012-12-11 10:37:32', NULL, NULL, 1, NULL, NULL, NULL, NULL, 'c4c94b43-437e-11e2-aa70-30f9edafb6df', 36, '2012-12-11 10:37:32', 0, NULL, 0, 'Banda', 1, NULL)[0m
  [4;35;1mSQL (61.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 36 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (16.8ms)[0m   [0;1mINSERT INTO `patient` (`tribe`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `date_voided`, `patient_id`, `date_created`, `voided`, `creator`) VALUES(NULL, '2012-12-11 10:37:32', NULL, 1, NULL, NULL, 36, '2012-12-11 10:37:32', 0, 1)[0m
  [4;35;1mSQL (62.2ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 375ms (View: 4, DB: 334) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:37:32) [GET]
  Parameters: {"patient_id"=>"36"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.6ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 36) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 36 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 36 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mROLLBACK[0m

NoMethodError (undefined method `changed_by=' for #<CorePatientIdentifier:0x7f93819add98>):
  app/models/core_openmrs.rb:45:in `before_save'
  app/models/core_patient_identifier_type.rb:29:in `next_identifier'
  app/models/core_person.rb:248:in `national_id'
  app/models/core_person.rb:230:in `national_id_label'
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (31.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:37:38) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 43ms (View: 42, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:38:12) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "birth_year"=>"Unknown", "patient"=>"", "birth_month"=>"", "age_estimate"=>"35", "names"=>{"given_name"=>"Jane", "family_name"=>"Banda"}, "birth_day"=>""}}
  [4;35;1mCorePerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (12.7ms)[0m   [0;1mINSERT INTO `person` (`gender`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `birthdate_estimated`, `death_date`, `date_voided`, `uuid`, `dead`, `cause_of_death`, `date_created`, `voided`, `creator`, `birthdate`) VALUES('F', '2012-12-11 10:38:12', NULL, 1, NULL, 0, NULL, NULL, 'dcb73a58-437e-11e2-aa70-30f9edafb6df', 0, NULL, '2012-12-11 10:38:12', 0, 1, NULL)[0m
  [4;35;1mSQL (73.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (21.1ms)[0m   [0mUPDATE `person` SET `birthdate_estimated` = 1, `birthdate` = '1977-07-01', `date_changed` = '2012-12-11 10:38:12' WHERE `person_id` = 37[0m
  [4;36;1mSQL (87.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (13.1ms)[0m   [0mINSERT INTO `person_name` (`given_name`, `void_reason`, `date_changed`, `family_name_prefix`, `voided_by`, `changed_by`, `prefix`, `family_name2`, `family_name_suffix`, `date_voided`, `uuid`, `person_id`, `date_created`, `voided`, `degree`, `preferred`, `family_name`, `creator`, `middle_name`) VALUES('Jane', NULL, '2012-12-11 10:38:12', NULL, NULL, 1, NULL, NULL, NULL, NULL, 'dcd6751d-437e-11e2-aa70-30f9edafb6df', 37, '2012-12-11 10:38:12', 0, NULL, 0, 'Banda', 1, NULL)[0m
  [4;36;1mSQL (79.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 37 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (11.3ms)[0m   [0mINSERT INTO `patient` (`tribe`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `date_voided`, `patient_id`, `date_created`, `voided`, `creator`) VALUES(NULL, '2012-12-11 10:38:12', NULL, 1, NULL, NULL, 37, '2012-12-11 10:38:12', 0, 1)[0m
  [4;36;1mSQL (74.8ms)[0m   [0;1mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 431ms (View: 3, DB: 381) | 200 OK [http://localhost/core_patient_registration/create]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:38:12) [GET]
  Parameters: {"patient_id"=>"37"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 37) AND (person.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 37 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 37 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCoreGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mCoreGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;36;1mCoreLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m

NameError (uninitialized constant CoreOpenmrs::Location):
  app/models/core_openmrs.rb:73:in `before_create'
  app/models/core_patient_identifier_type.rb:29:in `next_identifier'
  app/models/core_person.rb:248:in `national_id'
  app/models/core_person.rb:230:in `national_id_label'
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (33.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:38:18) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:38:59) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "birth_year"=>"Unknown", "patient"=>"", "birth_month"=>"", "age_estimate"=>"35", "names"=>{"given_name"=>"Jane", "family_name"=>"Banda"}, "birth_day"=>""}}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (13.2ms)[0m   [0mINSERT INTO `person` (`gender`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `birthdate_estimated`, `death_date`, `date_voided`, `uuid`, `dead`, `cause_of_death`, `date_created`, `voided`, `creator`, `birthdate`) VALUES('F', '2012-12-11 10:38:59', NULL, 1, NULL, 0, NULL, NULL, 'f8f7f3f5-437e-11e2-aa70-30f9edafb6df', 0, NULL, '2012-12-11 10:38:59', 0, 1, NULL)[0m
  [4;36;1mSQL (74.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (14.4ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `birthdate` = '1977-07-01', `date_changed` = '2012-12-11 10:38:59' WHERE `person_id` = 38[0m
  [4;35;1mSQL (94.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (16.8ms)[0m   [0;1mINSERT INTO `person_name` (`given_name`, `void_reason`, `date_changed`, `family_name_prefix`, `voided_by`, `changed_by`, `prefix`, `family_name2`, `family_name_suffix`, `date_voided`, `uuid`, `person_id`, `date_created`, `voided`, `degree`, `preferred`, `family_name`, `creator`, `middle_name`) VALUES('Jane', NULL, '2012-12-11 10:38:59', NULL, NULL, 1, NULL, NULL, NULL, NULL, 'f91763bb-437e-11e2-aa70-30f9edafb6df', 38, '2012-12-11 10:38:59', 0, NULL, 0, 'Banda', 1, NULL)[0m
  [4;35;1mSQL (66.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 38 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.3ms)[0m   [0;1mINSERT INTO `patient` (`tribe`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `date_voided`, `patient_id`, `date_created`, `voided`, `creator`) VALUES(NULL, '2012-12-11 10:38:59', NULL, 1, NULL, NULL, 38, '2012-12-11 10:38:59', 0, 1)[0m
  [4;35;1mSQL (66.9ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 434ms (View: 3, DB: 353) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:39:00) [GET]
  Parameters: {"patient_id"=>"38"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 38) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 38 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 38 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCoreGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.0ms)[0m   [0;1mMysql::Error: Cannot add or update a child row: a foreign key constraint fails (`core_patient_registration_development`.`patient_identifier`, CONSTRAINT `patient_identifier_ibfk_2` FOREIGN KEY (`location_id`) REFERENCES `location` (`location_id`)): INSERT INTO `patient_identifier` (`void_reason`, `voided_by`, `patient_id`, `identifier`, `date_voided`, `uuid`, `date_created`, `voided`, `identifier_type`, `location_id`, `preferred`, `creator`) VALUES(NULL, NULL, 38, 'P100100000016', NULL, 'f94952f2-437e-11e2-aa70-30f9edafb6df', '2012-12-11 10:39:00', 0, 3, 0, 0, 1)[0m
  [4;35;1mSQL (60.2ms)[0m   [0mROLLBACK[0m

ActiveRecord::StatementInvalid (Mysql::Error: Cannot add or update a child row: a foreign key constraint fails (`core_patient_registration_development`.`patient_identifier`, CONSTRAINT `patient_identifier_ibfk_2` FOREIGN KEY (`location_id`) REFERENCES `location` (`location_id`)): INSERT INTO `patient_identifier` (`void_reason`, `voided_by`, `patient_id`, `identifier`, `date_voided`, `uuid`, `date_created`, `voided`, `identifier_type`, `location_id`, `preferred`, `creator`) VALUES(NULL, NULL, 38, 'P100100000016', NULL, 'f94952f2-437e-11e2-aa70-30f9edafb6df', '2012-12-11 10:39:00', 0, 3, 0, 0, 1)):
  app/models/core_patient_identifier_type.rb:29:in `next_identifier'
  app/models/core_person.rb:248:in `national_id'
  app/models/core_person.rb:230:in `national_id_label'
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (69.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:39:06) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 12ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:39:38) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "birth_year"=>"Unknown", "patient"=>"", "birth_month"=>"", "age_estimate"=>"35", "names"=>{"given_name"=>"Jane", "family_name"=>"Banda"}, "birth_day"=>""}}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (19.7ms)[0m   [0mINSERT INTO `person` (`gender`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `birthdate_estimated`, `death_date`, `date_voided`, `uuid`, `dead`, `cause_of_death`, `date_created`, `voided`, `creator`, `birthdate`) VALUES('F', '2012-12-11 10:39:38', NULL, 1, NULL, 0, NULL, NULL, '105a8ea7-437f-11e2-aa70-30f9edafb6df', 0, NULL, '2012-12-11 10:39:38', 0, 1, NULL)[0m
  [4;36;1mSQL (77.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `birthdate` = '1977-07-01', `date_changed` = '2012-12-11 10:39:38' WHERE `person_id` = 39[0m
  [4;35;1mSQL (75.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (20.6ms)[0m   [0;1mINSERT INTO `person_name` (`given_name`, `void_reason`, `date_changed`, `family_name_prefix`, `voided_by`, `changed_by`, `prefix`, `family_name2`, `family_name_suffix`, `date_voided`, `uuid`, `person_id`, `date_created`, `voided`, `degree`, `preferred`, `family_name`, `creator`, `middle_name`) VALUES('Jane', NULL, '2012-12-11 10:39:39', NULL, NULL, 1, NULL, NULL, NULL, NULL, '10761718-437f-11e2-aa70-30f9edafb6df', 39, '2012-12-11 10:39:39', 0, NULL, 0, 'Banda', 1, NULL)[0m
  [4;35;1mSQL (73.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 39 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (21.4ms)[0m   [0;1mINSERT INTO `patient` (`tribe`, `date_changed`, `void_reason`, `changed_by`, `voided_by`, `date_voided`, `patient_id`, `date_created`, `voided`, `creator`) VALUES(NULL, '2012-12-11 10:39:39', NULL, 1, NULL, NULL, 39, '2012-12-11 10:39:39', 0, 1)[0m
  [4;35;1mSQL (68.2ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 409ms (View: 4, DB: 361) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:39:39) [GET]
  Parameters: {"patient_id"=>"39"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 39) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 39 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 39 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.0ms)[0m   [0;1mMysql::Error: Cannot add or update a child row: a foreign key constraint fails (`core_patient_registration_development`.`patient_identifier`, CONSTRAINT `patient_identifier_ibfk_2` FOREIGN KEY (`location_id`) REFERENCES `location` (`location_id`)): INSERT INTO `patient_identifier` (`void_reason`, `voided_by`, `patient_id`, `identifier`, `date_voided`, `uuid`, `date_created`, `voided`, `identifier_type`, `location_id`, `preferred`, `creator`) VALUES(NULL, NULL, 39, 'P100100000016', NULL, '10b438d5-437f-11e2-aa70-30f9edafb6df', '2012-12-11 10:39:39', 0, 3, 0, 0, 1)[0m
  [4;35;1mSQL (66.4ms)[0m   [0mROLLBACK[0m

ActiveRecord::StatementInvalid (Mysql::Error: Cannot add or update a child row: a foreign key constraint fails (`core_patient_registration_development`.`patient_identifier`, CONSTRAINT `patient_identifier_ibfk_2` FOREIGN KEY (`location_id`) REFERENCES `location` (`location_id`)): INSERT INTO `patient_identifier` (`void_reason`, `voided_by`, `patient_id`, `identifier`, `date_voided`, `uuid`, `date_created`, `voided`, `identifier_type`, `location_id`, `preferred`, `creator`) VALUES(NULL, NULL, 39, 'P100100000016', NULL, '10b438d5-437f-11e2-aa70-30f9edafb6df', '2012-12-11 10:39:39', 0, 3, 0, 0, 1)):
  app/models/core_patient_identifier_type.rb:29:in `next_identifier'
  app/models/core_person.rb:248:in `national_id'
  app/models/core_person.rb:230:in `national_id_label'
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (52.0ms)
Rendered rescues/_request_and_response (56.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:39:45) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 12:40:09) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:40:21) [POST]
  Parameters: {"person"=>{"patient"=>"", "birth_day"=>"", "birth_year"=>"Unknown", "birth_month"=>"", "gender"=>"Female", "age_estimate"=>"35", "names"=>{"given_name"=>"Jane", "family_name"=>"Banda"}}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (14.8ms)[0m   [0mINSERT INTO `person` (`birthdate`, `dead`, `cause_of_death`, `death_date`, `date_voided`, `void_reason`, `date_created`, `changed_by`, `voided`, `gender`, `date_changed`, `voided_by`, `birthdate_estimated`, `creator`, `uuid`) VALUES(NULL, 0, NULL, NULL, NULL, NULL, '2012-12-11 10:40:21', 1, 0, 'F', '2012-12-11 10:40:21', NULL, 0, 1, '29a4f0b8-437f-11e2-aa70-30f9edafb6df')[0m
  [4;36;1mSQL (64.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.2ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1977-07-01', `birthdate_estimated` = 1, `date_changed` = '2012-12-11 10:40:21' WHERE `person_id` = 40[0m
  [4;35;1mSQL (64.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (18.9ms)[0m   [0;1mINSERT INTO `person_name` (`prefix`, `given_name`, `family_name_suffix`, `date_voided`, `void_reason`, `date_created`, `changed_by`, `family_name`, `voided`, `person_id`, `family_name_prefix`, `preferred`, `degree`, `date_changed`, `middle_name`, `voided_by`, `family_name2`, `creator`, `uuid`) VALUES(NULL, 'Jane', NULL, NULL, NULL, '2012-12-11 10:40:21', 1, 'Banda', 0, 40, NULL, 0, NULL, '2012-12-11 10:40:21', NULL, NULL, NULL, 1, '29bc7005-437f-11e2-aa70-30f9edafb6df')[0m
  [4;35;1mSQL (64.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 40 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (18.0ms)[0m   [0;1mINSERT INTO `patient` (`date_voided`, `void_reason`, `tribe`, `date_created`, `changed_by`, `voided`, `date_changed`, `voided_by`, `creator`, `patient_id`) VALUES(NULL, NULL, NULL, '2012-12-11 10:40:21', 1, 0, '2012-12-11 10:40:21', NULL, 1, 40)[0m
  [4;35;1mSQL (60.5ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 445ms (View: 9, DB: 310) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:40:21) [GET]
  Parameters: {"patient_id"=>"40"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 40) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 40 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 40 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.0ms)[0m   [0;1mMysql::Error: Cannot add or update a child row: a foreign key constraint fails (`core_patient_registration_development`.`patient_identifier`, CONSTRAINT `patient_identifier_ibfk_2` FOREIGN KEY (`location_id`) REFERENCES `location` (`location_id`)): INSERT INTO `patient_identifier` (`location_id`, `date_voided`, `void_reason`, `date_created`, `voided`, `preferred`, `identifier`, `identifier_type`, `voided_by`, `patient_id`, `creator`, `uuid`) VALUES(0, NULL, NULL, '2012-12-11 10:40:21', 0, 0, 'P100100000016', 3, NULL, 40, 1, '29f7ade1-437f-11e2-aa70-30f9edafb6df')[0m
  [4;35;1mSQL (52.5ms)[0m   [0mROLLBACK[0m

ActiveRecord::StatementInvalid (Mysql::Error: Cannot add or update a child row: a foreign key constraint fails (`core_patient_registration_development`.`patient_identifier`, CONSTRAINT `patient_identifier_ibfk_2` FOREIGN KEY (`location_id`) REFERENCES `location` (`location_id`)): INSERT INTO `patient_identifier` (`location_id`, `date_voided`, `void_reason`, `date_created`, `voided`, `preferred`, `identifier`, `identifier_type`, `voided_by`, `patient_id`, `creator`, `uuid`) VALUES(0, NULL, NULL, '2012-12-11 10:40:21', 0, 0, 'P100100000016', 3, NULL, 40, 1, '29f7ade1-437f-11e2-aa70-30f9edafb6df')):
  app/models/core_patient_identifier_type.rb:29:in `next_identifier'
  app/models/core_person.rb:248:in `national_id'
  app/models/core_person.rb:230:in `national_id_label'
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (33.9ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:40:27) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 13ms (View: 11, DB: 1) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:43:59) [POST]
  Parameters: {"person"=>{"patient"=>"", "birth_day"=>"", "birth_year"=>"Unknown", "birth_month"=>"", "gender"=>"Female", "age_estimate"=>"35", "names"=>{"given_name"=>"Jane", "family_name"=>"Banda"}}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.2ms)[0m   [0mINSERT INTO `person` (`birthdate`, `dead`, `cause_of_death`, `death_date`, `date_voided`, `void_reason`, `date_created`, `changed_by`, `voided`, `gender`, `date_changed`, `voided_by`, `birthdate_estimated`, `creator`, `uuid`) VALUES(NULL, 0, NULL, NULL, NULL, NULL, '2012-12-11 10:43:59', 1, 0, 'F', '2012-12-11 10:43:59', NULL, 0, 1, 'abb1790b-437f-11e2-aa70-30f9edafb6df')[0m
  [4;36;1mSQL (78.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1977-07-01', `birthdate_estimated` = 1, `date_changed` = '2012-12-11 10:43:59' WHERE `person_id` = 41[0m
  [4;35;1mSQL (75.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (0.3ms)[0m   [0;1mINSERT INTO `person_name` (`prefix`, `given_name`, `family_name_suffix`, `date_voided`, `void_reason`, `date_created`, `changed_by`, `family_name`, `voided`, `person_id`, `family_name_prefix`, `preferred`, `degree`, `date_changed`, `middle_name`, `voided_by`, `family_name2`, `creator`, `uuid`) VALUES(NULL, 'Jane', NULL, NULL, NULL, '2012-12-11 10:43:59', 1, 'Banda', 0, 41, NULL, 0, NULL, '2012-12-11 10:43:59', NULL, NULL, NULL, 1, 'abca48fe-437f-11e2-aa70-30f9edafb6df')[0m
  [4;35;1mSQL (83.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.2ms)[0m   [0;1mINSERT INTO `patient` (`date_voided`, `void_reason`, `tribe`, `date_created`, `changed_by`, `voided`, `date_changed`, `voided_by`, `creator`, `patient_id`) VALUES(NULL, NULL, NULL, '2012-12-11 10:43:59', 1, 0, '2012-12-11 10:43:59', NULL, 1, 41)[0m
  [4;35;1mSQL (78.6ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 361ms (View: 3, DB: 322) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:43:59) [GET]
  Parameters: {"patient_id"=>"41"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 41) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (6.4ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.3ms)[0m   [0mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `void_reason`, `date_created`, `voided`, `preferred`, `identifier`, `identifier_type`, `voided_by`, `patient_id`, `creator`, `uuid`) VALUES(1, NULL, NULL, '2012-12-11 10:44:00', 0, 0, 'P100100000016', 3, NULL, 41, 1, 'ac018fc8-437f-11e2-aa70-30f9edafb6df')[0m
  [4;36;1mSQL (59.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

NameError (uninitialized constant CorePerson::ZebraPrinter):
  app/models/core_person.rb:233:in `national_id_label'
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:44:05) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 12:45:23) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 12:45:27) [POST]
  Parameters: {"person"=>{"age_estimate"=>"35", "birth_month"=>"", "gender"=>"Female", "birth_year"=>"Unknown", "patient"=>"", "birth_day"=>"", "names"=>{"family_name"=>"Banda", "given_name"=>"Jane"}}}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.3ms)[0m   [0mINSERT INTO `person` (`birthdate`, `cause_of_death`, `uuid`, `dead`, `date_voided`, `birthdate_estimated`, `date_changed`, `date_created`, `void_reason`, `gender`, `death_date`, `voided_by`, `creator`, `voided`, `changed_by`) VALUES(NULL, NULL, 'e07d6867-437f-11e2-aa70-30f9edafb6df', 0, NULL, 0, '2012-12-11 10:45:28', '2012-12-11 10:45:28', NULL, 'F', NULL, NULL, 1, 0, 1)[0m
  [4;36;1mSQL (150.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `birthdate` = '1977-07-01', `date_changed` = '2012-12-11 10:45:28' WHERE `person_id` = 42[0m
  [4;35;1mSQL (48.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (0.3ms)[0m   [0;1mINSERT INTO `person_name` (`preferred`, `family_name2`, `uuid`, `date_voided`, `middle_name`, `family_name`, `family_name_suffix`, `date_changed`, `person_id`, `given_name`, `date_created`, `prefix`, `void_reason`, `voided_by`, `family_name_prefix`, `degree`, `creator`, `voided`, `changed_by`) VALUES(0, NULL, 'e09d7ef4-437f-11e2-aa70-30f9edafb6df', NULL, NULL, 'Banda', NULL, '2012-12-11 10:45:28', 42, 'Jane', '2012-12-11 10:45:28', NULL, NULL, NULL, NULL, NULL, 1, 0, 1)[0m
  [4;35;1mSQL (61.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (12.7ms)[0m   [0;1mINSERT INTO `patient` (`date_voided`, `date_changed`, `tribe`, `patient_id`, `date_created`, `void_reason`, `voided_by`, `creator`, `voided`, `changed_by`) VALUES(NULL, '2012-12-11 10:45:28', NULL, 42, '2012-12-11 10:45:28', NULL, NULL, 1, 0, 1)[0m
  [4;35;1mSQL (54.3ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 497ms (View: 12, DB: 333) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 12:45:28) [GET]
  Parameters: {"patient_id"=>"42"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (7.5ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 42) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (22.5ms)[0m   [0mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `date_voided`, `patient_id`, `date_created`, `identifier_type`, `location_id`, `void_reason`, `voided_by`, `creator`, `voided`, `identifier`) VALUES(0, 'e0dd287a-437f-11e2-aa70-30f9edafb6df', NULL, 42, '2012-12-11 10:45:28', 3, 1, NULL, NULL, 1, 0, 'P100100000025')[0m
  [4;36;1mSQL (66.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 42 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

NoMethodError (undefined method `name' for #<CorePerson:0x7f61bdc2b3e0>):
  app/models/core_person.rb:239:in `national_id_label'
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.4ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 12:45:34) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 17ms (View: 15, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.5ms)[0m   [0mSELECT * FROM `person` WHERE (person.voided = 0) ORDER BY person.person_id DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (18.9ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.6ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 42 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (person.voided = 0) ORDER BY person.person_id DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 42 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (person.voided = 0) ORDER BY person.person_id DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 42 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 13:28:27) [POST]
  Parameters: {"person"=>{"age_estimate"=>"35", "birth_month"=>"", "gender"=>"Female", "birth_year"=>"Unknown", "patient"=>"", "birth_day"=>"", "names"=>{"family_name"=>"Banda", "given_name"=>"Jane"}}}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.2ms)[0m   [0mINSERT INTO `person` (`birthdate`, `cause_of_death`, `uuid`, `dead`, `date_voided`, `birthdate_estimated`, `date_changed`, `date_created`, `void_reason`, `gender`, `death_date`, `voided_by`, `creator`, `voided`, `changed_by`) VALUES(NULL, NULL, 'e1d91bf4-4385-11e2-aa70-30f9edafb6df', 0, NULL, 0, '2012-12-11 11:28:27', '2012-12-11 11:28:27', NULL, 'F', NULL, NULL, 1, 0, 1)[0m
  [4;36;1mSQL (117.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `birthdate` = '1977-07-01', `date_changed` = '2012-12-11 11:28:27' WHERE `person_id` = 43[0m
  [4;35;1mSQL (97.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (16.0ms)[0m   [0;1mINSERT INTO `person_name` (`preferred`, `family_name2`, `uuid`, `date_voided`, `middle_name`, `family_name`, `family_name_suffix`, `date_changed`, `person_id`, `given_name`, `date_created`, `prefix`, `void_reason`, `voided_by`, `family_name_prefix`, `degree`, `creator`, `voided`, `changed_by`) VALUES(0, NULL, 'e1fb4107-4385-11e2-aa70-30f9edafb6df', NULL, NULL, 'Banda', NULL, '2012-12-11 11:28:27', 43, 'Jane', '2012-12-11 11:28:27', NULL, NULL, NULL, NULL, NULL, 1, 0, 1)[0m
  [4;35;1mSQL (90.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 43 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (19.5ms)[0m   [0;1mINSERT INTO `patient` (`date_voided`, `date_changed`, `tribe`, `patient_id`, `date_created`, `void_reason`, `voided_by`, `creator`, `voided`, `changed_by`) VALUES(NULL, '2012-12-11 11:28:27', NULL, 43, '2012-12-11 11:28:27', NULL, NULL, 1, 0, 1)[0m
  [4;35;1mSQL (69.2ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 513ms (View: 6, DB: 416) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 13:28:27) [GET]
  Parameters: {"patient_id"=>"43"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 43) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 43 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 43 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.2ms)[0m   [0mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `date_voided`, `patient_id`, `date_created`, `identifier_type`, `location_id`, `void_reason`, `voided_by`, `creator`, `voided`, `identifier`) VALUES(0, 'e23419cc-4385-11e2-aa70-30f9edafb6df', NULL, 43, '2012-12-11 11:28:27', 3, 1, NULL, NULL, 1, 0, 'P100100000034')[0m
  [4;36;1mSQL (104.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 43 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 43 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 43 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 43 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 43 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

RuntimeError (--- !str 
str: |
  
  N
  q801
  Q329,026
  ZT
  B50,180,0,1,5,15,120,N,"P100100000034"
  A40,50,0,2,2,2,N,"Jane Banda"
  A40,96,0,2,2,2,N,"P1001-0000-0034 ??/???/1977(F)"
  P1

"@_rails_html_safe": false
):
  app/controllers/core_patient_registration_controller.rb:69:in `national_id_label'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 13:28:33) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 13:28:58) [POST]
  Parameters: {"person"=>{"age_estimate"=>"35", "birth_month"=>"", "gender"=>"Female", "birth_year"=>"Unknown", "patient"=>"", "birth_day"=>"", "names"=>{"family_name"=>"Banda", "given_name"=>"Jane"}}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (19.9ms)[0m   [0;1mINSERT INTO `person` (`birthdate`, `cause_of_death`, `uuid`, `dead`, `date_voided`, `birthdate_estimated`, `date_changed`, `date_created`, `void_reason`, `gender`, `death_date`, `voided_by`, `creator`, `voided`, `changed_by`) VALUES(NULL, NULL, 'f45b53ff-4385-11e2-aa70-30f9edafb6df', 0, NULL, 0, '2012-12-11 11:28:58', '2012-12-11 11:28:58', NULL, 'F', NULL, NULL, 1, 0, 1)[0m
  [4;35;1mSQL (56.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.2ms)[0m   [0mUPDATE `person` SET `birthdate_estimated` = 1, `birthdate` = '1977-07-01', `date_changed` = '2012-12-11 11:28:58' WHERE `person_id` = 44[0m
  [4;36;1mSQL (64.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (0.3ms)[0m   [0mINSERT INTO `person_name` (`preferred`, `family_name2`, `uuid`, `date_voided`, `middle_name`, `family_name`, `family_name_suffix`, `date_changed`, `person_id`, `given_name`, `date_created`, `prefix`, `void_reason`, `voided_by`, `family_name_prefix`, `degree`, `creator`, `voided`, `changed_by`) VALUES(0, NULL, 'f471ee86-4385-11e2-aa70-30f9edafb6df', NULL, NULL, 'Banda', NULL, '2012-12-11 11:28:58', 44, 'Jane', '2012-12-11 11:28:58', NULL, NULL, NULL, NULL, NULL, 1, 0, 1)[0m
  [4;36;1mSQL (100.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (13.7ms)[0m   [0mINSERT INTO `patient` (`date_voided`, `date_changed`, `tribe`, `patient_id`, `date_created`, `void_reason`, `voided_by`, `creator`, `voided`, `changed_by`) VALUES(NULL, '2012-12-11 11:28:58', NULL, 44, '2012-12-11 11:28:58', NULL, NULL, 1, 0, 1)[0m
  [4;36;1mSQL (43.3ms)[0m   [0;1mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 386ms (View: 3, DB: 304) | 200 OK [http://localhost/core_patient_registration/create]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 13:28:58) [GET]
  Parameters: {"patient_id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCoreGlobalProperty Columns (0.4ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mCoreGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;36;1mCoreLocation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (19.5ms)[0m   [0;1mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `date_voided`, `patient_id`, `date_created`, `identifier_type`, `location_id`, `void_reason`, `voided_by`, `creator`, `voided`, `identifier`) VALUES(0, 'f4ac999f-4385-11e2-aa70-30f9edafb6df', NULL, 44, '2012-12-11 11:28:58', 3, 1, NULL, NULL, 1, 0, 'P100100000043')[0m
  [4;35;1mSQL (47.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 445211.lbl
Completed in 121ms (View: 0, DB: 75) | 200 OK [http://localhost/national_id_label?patient_id=44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 13:29:04) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 13:47:58) [GET]

ActionController::RoutingError (No route matches "/" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 13:53:21) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 74ms (View: 73, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 13:55:06) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 14ms (View: 13, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 13:55:19) [GET]
  Parameters: {"selection"=>"show_middle_name"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 21ms (View: 19, DB: 0) | 200 OK [http://localhost/new_patient?selection=&selection=show_middle_name]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:08:39) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 11ms (View: 10, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:09:16) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:10:22) [GET]
  Parameters: {"selection"=>"show_nationality"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/new_patient?selection=&selection=show_middle_name&selection=show_maiden_name&selection=show_region_of_origin&selection=show_district_of_origin&selection=show_t_a_of_origin&selection=show_home_village&selection=show_current_region&selection=show_current_district&selection=show_current_t_a&selection=show_current_village&selection=show_current_landmark&selection=show_cell_phone_number&selection=show_office_phone_number&selection=show_home_phone_number&selection=show_occupation&selection=show_nationality]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:11:04) [GET]
  Parameters: {"selection"=>"show_nationality"}

RuntimeError (--- !map:HashWithIndifferentAccess 
controller: core_patient_registration
selection: show_nationality
action: new
):
  app/controllers/core_patient_registration_controller.rb:6:in `new'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.3ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:11:36) [GET]
  Parameters: {"selection"=>"show_nationality"}

RuntimeError (--- show_nationality
):
  app/controllers/core_patient_registration_controller.rb:6:in `new'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (26.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:11:43) [GET]
  Parameters: {"selection"=>"show_nationality"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 57ms (View: 8, DB: 0) | 200 OK [http://localhost/new_patient?selection=&selection=show_middle_name&selection=show_maiden_name&selection=show_region_of_origin&selection=show_district_of_origin&selection=show_t_a_of_origin&selection=show_home_village&selection=show_current_region&selection=show_current_district&selection=show_current_t_a&selection=show_current_village&selection=show_current_landmark&selection=show_cell_phone_number&selection=show_office_phone_number&selection=show_home_phone_number&selection=show_occupation&selection=show_nationality]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:12:14) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:13:55) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:16:17) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:17:02) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 11ms (View: 10, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:17:26) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:28:07) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 55ms (View: 54, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:36:29) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:36:30) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:36:39) [GET]
  Parameters: {"show_current_region"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_maiden_name"=>"true", "show_home_village"=>"true", "show_current_t_a"=>"true", "selection"=>"show_cell_phone_number", "show_district_of_origin"=>"true", "show_current_district"=>"true", "show_cell_phone_number"=>"true", "show_middle_name"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 13ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient?selection=&selection=show_middle_name&selection=show_maiden_name&selection=show_region_of_origin&selection=show_district_of_origin&selection=show_home_village&selection=show_current_region&selection=show_current_district&selection=show_current_t_a&selection=show_current_landmark&selection=show_cell_phone_number&show_middle_name=true&show_maiden_name=true&show_district_of_origin=true&show_region_of_origin=true&show_home_village=true&show_current_region=true&show_current_t_a=true&show_current_district=true&show_current_landmark=true&show_cell_phone_number=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:38:15) [GET]
  Parameters: {"show_current_region"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_maiden_name"=>"true", "show_home_village"=>"true", "show_current_t_a"=>"true", "selection"=>"show_cell_phone_number", "show_district_of_origin"=>"true", "show_current_district"=>"true", "show_cell_phone_number"=>"true", "show_middle_name"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://localhost/new_patient?selection=&selection=show_middle_name&selection=show_maiden_name&selection=show_region_of_origin&selection=show_district_of_origin&selection=show_home_village&selection=show_current_region&selection=show_current_district&selection=show_current_t_a&selection=show_current_landmark&selection=show_cell_phone_number&show_middle_name=true&show_maiden_name=true&show_district_of_origin=true&show_region_of_origin=true&show_home_village=true&show_current_region=true&show_current_t_a=true&show_current_district=true&show_current_landmark=true&show_cell_phone_number=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:38:21) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:38:30) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:38:53) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 13ms (View: 11, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:38:56) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:39:08) [GET]
  Parameters: {"show_current_region"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_maiden_name"=>"true", "show_home_village"=>"true", "show_current_t_a"=>"true", "show_district_of_origin"=>"true", "show_current_district"=>"true", "show_cell_phone_number"=>"true", "show_middle_name"=>"true", "show_t_a_of_origin"=>"true", "show_current_village"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 12ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient?show_maiden_name=true&show_middle_name=true&show_region_of_origin=true&show_district_of_origin=true&show_t_a_of_origin=true&show_home_village=true&show_current_region=true&show_current_district=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:39:24) [GET]
  Parameters: {"show_current_landmark"=>"true", "show_current_t_a"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://localhost/new_patient?show_current_t_a=true&show_current_landmark=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:42:57) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:43:08) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:43:32) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:44:15) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:44:19) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:46:35) [GET]
  Parameters: {"show_maiden_name"=>"true", "selection"=>"show_maiden_name"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 11ms (View: 9, DB: 0) | 200 OK [http://localhost/new_patient?selection=&selection=show_maiden_name&show_maiden_name=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:47:22) [GET]
  Parameters: {"show_region_of_origin"=>"true", "selection"=>"show_t_a_of_origin", "show_t_a_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 10ms (View: 10, DB: 0) | 200 OK [http://localhost/new_patient?selection=&selection=show_region_of_origin&selection=show_t_a_of_origin&show_region_of_origin=true&show_t_a_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:48:28) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 53ms (View: 9, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:49:00) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:49:06) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 14ms (View: 13, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:49:10) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:49:12) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 14ms (View: 13, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:49:14) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:51:34) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:51:41) [GET]
  Parameters: {"undefined"=>"true", "show_middle_name"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 23ms (View: 22, DB: 0) | 200 OK [http://localhost/new_patient?undefined=true&show_middle_name=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 14:52:04) [POST]
  Parameters: {"person"=>{"birth_year"=>"Unknown", "age_estimate"=>"39", "gender"=>"Female", "patient"=>"", "names"=>{"given_name"=>"Mary", "family_name"=>"Bango", "middle_name"=>"Unknown"}, "birth_day"=>"", "birth_month"=>""}}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.3ms)[0m   [0mINSERT INTO `person` (`dead`, `cause_of_death`, `voided`, `death_date`, `date_created`, `voided_by`, `gender`, `date_changed`, `creator`, `date_voided`, `changed_by`, `birthdate`, `birthdate_estimated`, `void_reason`, `uuid`) VALUES(0, NULL, 0, NULL, '2012-12-11 12:52:04', NULL, 'F', '2012-12-11 12:52:04', 1, NULL, 1, NULL, 0, NULL, '9097e021-4391-11e2-aa70-30f9edafb6df')[0m
  [4;36;1mSQL (102.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.2ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `birthdate` = '1973-07-01', `date_changed` = '2012-12-11 12:52:05' WHERE `person_id` = 45[0m
  [4;35;1mSQL (86.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (16.3ms)[0m   [0;1mINSERT INTO `person_name` (`degree`, `prefix`, `given_name`, `voided`, `preferred`, `date_created`, `voided_by`, `family_name`, `family_name2`, `family_name_suffix`, `date_changed`, `creator`, `date_voided`, `person_id`, `middle_name`, `family_name_prefix`, `changed_by`, `void_reason`, `uuid`) VALUES(NULL, NULL, 'Mary', 0, 0, '2012-12-11 12:52:05', NULL, 'Bango', NULL, NULL, '2012-12-11 12:52:05', 1, NULL, 45, 'Unknown', NULL, 1, NULL, '90b63326-4391-11e2-aa70-30f9edafb6df')[0m
  [4;35;1mSQL (100.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.2ms)[0m   [0;1mINSERT INTO `patient` (`voided`, `date_created`, `voided_by`, `date_changed`, `creator`, `date_voided`, `patient_id`, `changed_by`, `void_reason`, `tribe`) VALUES(0, '2012-12-11 12:52:05', NULL, '2012-12-11 12:52:05', 1, NULL, 45, 1, NULL, NULL)[0m
  [4;35;1mSQL (78.4ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 508ms (View: 6, DB: 390) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 14:52:05) [GET]
  Parameters: {"patient_id"=>"45"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 45) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (14.2ms)[0m   [0mINSERT INTO `patient_identifier` (`voided`, `preferred`, `date_created`, `voided_by`, `identifier_type`, `identifier`, `location_id`, `creator`, `date_voided`, `patient_id`, `void_reason`, `uuid`) VALUES(0, 0, '2012-12-11 12:52:05', NULL, 3, 'P100100000052', 1, 1, NULL, 45, NULL, '90fa3bd9-4391-11e2-aa70-30f9edafb6df')[0m
  [4;36;1mSQL (82.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 456424.lbl
Completed in 164ms (View: 0, DB: 107) | 200 OK [http://localhost/national_id_label?patient_id=45]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:52:11) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:52:27) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:52:57) [GET]
  Parameters: {"undefined"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 15ms (View: 14, DB: 0) | 200 OK [http://localhost/new_patient?undefined=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:53:15) [GET]
  Parameters: {"undefined"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/new_patient?undefined=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:53:24) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 14:54:08) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 14:54:11) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 15ms (View: 14, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 15:09:45) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 24ms (View: 23, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 15:15:53) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 15:15:55) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:16:11) [GET]
  Parameters: {"show_region_of_origin"=>"true", "show_middle_name"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 22ms (View: 20, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 15:16:43) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 7ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:16:54) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 16ms (View: 15, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 15:17:08) [GET]
  Parameters: {"filter_value"=>"Northern Region", "search_string"=>""}

ActionController::RoutingError (No route matches "/district/District" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:25:31) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 11ms (View: 10, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 15:25:41) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}

ActionController::RoutingError (No route matches "/district/District" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:26:16) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 15ms (View: 13, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:26:23) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.2ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.4ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 16ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:27:12) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 23ms (View: 22, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:27:22) [GET]
  Parameters: {"filter_value"=>"Northern Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.2ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Northern Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.3ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 2 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 56ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Northern%20Region&search_string=]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:27:47) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 22ms (View: 20, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:27:56) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 11ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:27:59) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 12ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:28:09) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:28:51) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 54ms (View: 52, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:29:00) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:29:24) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 25ms (View: 23, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:29:33) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 9ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:29:39) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:29:54) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 64ms (View: 63, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:30:02) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:30:31) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 12ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:31:18) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 14ms (View: 13, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:31:26) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.2ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:31:29) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:31:32) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 11ms (View: 1, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 15:33:37) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 27ms (View: 26, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:35:53) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 24ms (View: 23, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:36:02) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 14ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:36:54) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 19ms (View: 18, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:37:01) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:37:04) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.2ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.6ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 52ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:37:06) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:37:08) [GET]
  Parameters: {"filter_value"=>"Dowa ", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.4ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Dowa ') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.4ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 12) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 16ms (View: 0, DB: 3) | 200 OK [http://localhost/traditional_authority?filter_value=Dowa%20&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:37:09) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:37:11) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.2ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.6ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 15:39:35) [POST]
  Parameters: {"person"=>{"addresses"=>{"subregion"=>"Lilongwe City", "neighborhood_cell"=>"List of villages under T/A", "county_district"=>"Area 22"}, "birth_day"=>"", "birth_month"=>"", "birth_year"=>"Unknown", "gender"=>"Female", "names"=>{"given_name"=>"Mary", "family_name"=>"Banda"}, "patient"=>"", "age_estimate"=>"39"}, "REGION OF ORIGIN"=>"Central Region"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (15.3ms)[0m   [0mINSERT INTO `person` (`creator`, `cause_of_death`, `date_created`, `uuid`, `dead`, `changed_by`, `birthdate_estimated`, `date_changed`, `gender`, `void_reason`, `voided`, `date_voided`, `birthdate`, `death_date`, `voided_by`) VALUES(1, NULL, '2012-12-11 13:39:36', '33f9b4c2-4398-11e2-aa70-30f9edafb6df', 0, 1, 0, '2012-12-11 13:39:36', 'F', NULL, 0, NULL, NULL, NULL, NULL)[0m
  [4;36;1mSQL (103.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `birthdate` = '1973-07-01', `date_changed` = '2012-12-11 13:39:36' WHERE `person_id` = 46[0m
  [4;35;1mSQL (41.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (14.5ms)[0m   [0;1mINSERT INTO `person_name` (`family_name2`, `creator`, `date_created`, `prefix`, `given_name`, `uuid`, `family_name_prefix`, `changed_by`, `person_id`, `degree`, `date_changed`, `family_name`, `void_reason`, `middle_name`, `voided`, `date_voided`, `preferred`, `family_name_suffix`, `voided_by`) VALUES(NULL, 1, '2012-12-11 13:39:36', NULL, 'Mary', '34166e58-4398-11e2-aa70-30f9edafb6df', NULL, 1, 46, NULL, '2012-12-11 13:39:36', 'Banda', NULL, NULL, 0, NULL, 0, NULL, NULL)[0m
  [4;35;1mSQL (70.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (0.5ms)[0m   [0;1mINSERT INTO `person_address` (`creator`, `subregion`, `state_province`, `date_created`, `city_village`, `country`, `latitude`, `uuid`, `region`, `person_id`, `neighborhood_cell`, `township_division`, `address1`, `address2`, `postal_code`, `county_district`, `void_reason`, `voided`, `date_voided`, `preferred`, `longitude`, `voided_by`) VALUES(1, 'Lilongwe City', NULL, '2012-12-11 13:39:36', NULL, NULL, NULL, '34246cd3-4398-11e2-aa70-30f9edafb6df', NULL, 46, 'List of villages under T/A', NULL, NULL, NULL, NULL, 'Area 22', NULL, 0, NULL, 0, NULL, NULL)[0m
  [4;35;1mSQL (59.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.3ms)[0m   [0;1mINSERT INTO `patient` (`creator`, `date_created`, `patient_id`, `changed_by`, `date_changed`, `tribe`, `void_reason`, `voided`, `date_voided`, `voided_by`) VALUES(1, '2012-12-11 13:39:36', 46, 1, '2012-12-11 13:39:36', NULL, NULL, 0, NULL, NULL)[0m
  [4;35;1mSQL (65.7ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 509ms (View: 7, DB: 376) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 15:39:36) [GET]
  Parameters: {"patient_id"=>"46"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 46) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (18.4ms)[0m   [0mINSERT INTO `patient_identifier` (`creator`, `patient_id`, `date_created`, `identifier_type`, `uuid`, `location_id`, `identifier`, `void_reason`, `voided`, `date_voided`, `preferred`, `voided_by`) VALUES(1, 46, '2012-12-11 13:39:36', 3, '3463924e-4398-11e2-aa70-30f9edafb6df', 1, 'P100100000061', NULL, 0, NULL, 0, NULL)[0m
  [4;36;1mSQL (95.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.5ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 464641.lbl
Completed in 208ms (View: 0, DB: 123) | 200 OK [http://localhost/national_id_label?patient_id=46]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:39:41) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 23ms (View: 21, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:40:03) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 17ms (View: 17, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:40:12) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 13ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:40:20) [GET]
  Parameters: {"filter_value"=>"Northern Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Northern Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 2 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 49ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Northern%20Region&search_string=]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:41:25) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 17ms (View: 15, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:41:26) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 17ms (View: 16, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:41:36) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:41:41) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 12ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:42:01) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 68ms (View: 66, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:42:08) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:42:14) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 13ms (View: 1, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:43:02) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 20ms (View: 19, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:43:32) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 17ms (View: 16, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:43:43) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 47ms (View: 1, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:43:53) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 23ms (View: 22, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:44:02) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:44:12) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 16ms (View: 15, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:44:22) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:44:25) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 48ms (View: 37, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 15:44:26) [GET]
  Parameters: {"filter_value"=>"Area 13", "search_string"=>"List of villages under T/A"}

ActionController::RoutingError (No route matches "/village" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:44:45) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 22ms (View: 21, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:44:56) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 11ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:44:59) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 10ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-11 15:45:01) [GET]
  Parameters: {"filter_value"=>"Chiseka", "search_string"=>""}

ActionController::RoutingError (No route matches "/village" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:45:03) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 12ms (View: 11, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 15:45:31) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 27ms (View: 26, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:45:35) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 15ms (View: 14, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:45:43) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 22ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:45:45) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 15:45:47) [GET]
  Parameters: {"filter_value"=>"Chiseka", "search_string"=>""}
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Chiseka') LIMIT 1[0m
  [4;36;1mCoreVillage Load (4.0ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 115) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 20ms (View: 1, DB: 6) | 200 OK [http://localhost/village?filter_value=Chiseka&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 15:45:58) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:46:35) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 23ms (View: 22, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:46:49) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 11ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:47:04) [GET]
  Parameters: {"show_region_of_origin"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 17ms (View: 15, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 15:51:03) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:51:11) [GET]
  Parameters: {"show_current_district"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 67ms (View: 65, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true&show_current_district=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:52:02) [GET]
  Parameters: {"filter_value"=>"Northern Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Northern Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 2 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 9ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Northern%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:52:04) [GET]
  Parameters: {"filter_value"=>"Mzimba", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.2ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Mzimba') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 15) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 11ms (View: 1, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Mzimba&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 15:52:06) [GET]
  Parameters: {"filter_value"=>"Mabulabo", "search_string"=>""}
  [4;36;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.2ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mabulabo') LIMIT 1[0m
  [4;36;1mCoreVillage Load (1.5ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 44) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 15ms (View: 0, DB: 3) | 200 OK [http://localhost/village?filter_value=Mabulabo&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:52:11) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 15ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:52:52) [GET]
  Parameters: {"show_current_district"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 66ms (View: 64, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true&show_current_district=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:53:03) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:53:05) [GET]
  Parameters: {"filter_value"=>"Dowa ", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Dowa ') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 12) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 12ms (View: 0, DB: 1) | 200 OK [http://localhost/traditional_authority?filter_value=Dowa%20&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 15:53:08) [GET]
  Parameters: {"filter_value"=>"TA Chiwere", "search_string"=>""}
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'TA Chiwere') LIMIT 1[0m
  [4;36;1mCoreVillage Load (1.1ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 96) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 14ms (View: 0, DB: 3) | 200 OK [http://localhost/village?filter_value=TA%20Chiwere&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:53:11) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 9ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:53:13) [GET]
  Parameters: {"filter_value"=>"Dowa ", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Dowa ') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 12) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 13ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Dowa%20&search_string=]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 15:53:15) [GET]
  Parameters: {"filter_value"=>"S/C Chakhadza", "search_string"=>""}
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'S/C Chakhadza') LIMIT 1[0m
  [4;36;1mCoreVillage Load (1.9ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 94) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 17ms (View: 0, DB: 3) | 200 OK [http://localhost/village?filter_value=S/C%20Chakhadza&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:53:55) [GET]
  Parameters: {"show_current_district"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 29ms (View: 27, DB: 0) | 200 OK [http://localhost/new_patient?show_region_of_origin=true&show_current_district=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:54:05) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 19ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:54:06) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 10ms (View: 0, DB: 1) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 15:54:08) [GET]
  Parameters: {"filter_value"=>"Kalolo", "search_string"=>""}
  [4;36;1mCoreTraditionalAuthority Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.5ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Kalolo') LIMIT 1[0m
  [4;36;1mCoreVillage Load (2.7ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 114) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 60ms (View: 0, DB: 6) | 200 OK [http://localhost/village?filter_value=Kalolo&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:54:11) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 14ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:54:13) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 13ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 15:54:15) [GET]
  Parameters: {"filter_value"=>"Chimutu", "search_string"=>""}
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Chimutu') LIMIT 1[0m
  [4;36;1mCoreVillage Load (1.5ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 119) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 15ms (View: 0, DB: 3) | 200 OK [http://localhost/village?filter_value=Chimutu&search_string=]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 15:54:29) [POST]
  Parameters: {"REGION OF ORIGIN"=>"Central Region", "CURRENT REGION"=>"Central Region", "CURRENT AREA OF RESIDENCE"=>"Chimutu", "person"=>{"addresses"=>{"subregion"=>"Lilongwe", "county_district"=>"Kalolo", "neighborhood_cell"=>"Bandawe", "address2"=>"Lilongwe", "city_village"=>"Binji", "address1"=>"Test"}, "age_estimate"=>"37", "gender"=>"Female", "birth_year"=>"Unknown", "names"=>{"family_name"=>"Phiri", "given_name"=>"Jane"}, "birth_day"=>"", "patient"=>"", "birth_month"=>""}}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.2ms)[0m   [0mINSERT INTO `person` (`gender`, `creator`, `birthdate_estimated`, `changed_by`, `date_voided`, `birthdate`, `voided_by`, `cause_of_death`, `date_created`, `dead`, `voided`, `death_date`, `date_changed`, `void_reason`, `uuid`) VALUES('F', 1, 0, 1, NULL, NULL, NULL, NULL, '2012-12-11 13:54:29', 0, 0, NULL, '2012-12-11 13:54:29', NULL, '489f08a2-439a-11e2-aa70-30f9edafb6df')[0m
  [4;36;1mSQL (90.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `date_changed` = '2012-12-11 13:54:29', `birthdate` = '1975-07-01', `birthdate_estimated` = 1 WHERE `person_id` = 47[0m
  [4;35;1mSQL (75.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (0.2ms)[0m   [0;1mINSERT INTO `person_name` (`family_name`, `creator`, `middle_name`, `date_voided`, `changed_by`, `family_name_prefix`, `family_name2`, `voided_by`, `given_name`, `date_created`, `voided`, `preferred`, `void_reason`, `date_changed`, `person_id`, `degree`, `uuid`, `prefix`, `family_name_suffix`) VALUES('Phiri', 1, NULL, NULL, 1, NULL, NULL, NULL, 'Jane', '2012-12-11 13:54:29', 0, 0, NULL, '2012-12-11 13:54:29', 47, NULL, '48b9e7b9-439a-11e2-aa70-30f9edafb6df', NULL, NULL)[0m
  [4;35;1mSQL (62.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (0.2ms)[0m   [0;1mINSERT INTO `person_address` (`subregion`, `country`, `creator`, `county_district`, `neighborhood_cell`, `date_voided`, `postal_code`, `voided_by`, `latitude`, `address1`, `address2`, `city_village`, `date_created`, `township_division`, `state_province`, `voided`, `preferred`, `longitude`, `region`, `void_reason`, `person_id`, `uuid`) VALUES('Lilongwe', NULL, 1, 'Kalolo', 'Bandawe', NULL, NULL, NULL, NULL, 'Test', 'Lilongwe', 'Binji', '2012-12-11 13:54:29', NULL, NULL, 0, 0, NULL, NULL, NULL, 47, '48c437d1-439a-11e2-aa70-30f9edafb6df')[0m
  [4;35;1mSQL (84.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.2ms)[0m   [0;1mINSERT INTO `patient` (`creator`, `changed_by`, `date_voided`, `voided_by`, `tribe`, `date_created`, `voided`, `date_changed`, `void_reason`, `patient_id`) VALUES(1, 1, NULL, NULL, NULL, '2012-12-11 13:54:30', 0, '2012-12-11 13:54:30', NULL, 47)[0m
  [4;35;1mSQL (111.8ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 545ms (View: 6, DB: 429) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 15:54:30) [GET]
  Parameters: {"patient_id"=>"47"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 47) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (25.9ms)[0m   [0mINSERT INTO `patient_identifier` (`identifier`, `creator`, `date_voided`, `voided_by`, `identifier_type`, `date_created`, `voided`, `preferred`, `void_reason`, `patient_id`, `location_id`, `uuid`) VALUES('P100100000070', 1, NULL, NULL, 3, '2012-12-11 13:54:30', 0, 0, NULL, 47, 1, '490e4448-439a-11e2-aa70-30f9edafb6df')[0m
  [4;36;1mSQL (72.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 475069.lbl
Completed in 189ms (View: 0, DB: 106) | 200 OK [http://localhost/national_id_label?patient_id=47]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:54:36) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 15:55:26) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:55:35) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 15ms (View: 14, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:56:17) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 13ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:56:19) [GET]
  Parameters: {"filter_value"=>"Dowa ", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Dowa ') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 12) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 51ms (View: 0, DB: 1) | 200 OK [http://localhost/traditional_authority?filter_value=Dowa%20&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 15:56:21) [GET]
  Parameters: {"filter_value"=>"SC Mkukula", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.2ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'SC Mkukula') LIMIT 1[0m
  [4;35;1mCoreVillage Load (1.4ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 97) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 17ms (View: 1, DB: 3) | 200 OK [http://localhost/village?filter_value=SC%20Mkukula&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:56:25) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.2ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:56:27) [GET]
  Parameters: {"filter_value"=>"Dowa ", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Dowa ') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 12) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 12ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Dowa%20&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:56:30) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 15:56:56) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 64ms (View: 63, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:57:07) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 15ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:57:10) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 15:57:11) [GET]
  Parameters: {"filter_value"=>"Kalolo", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Kalolo') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.2ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 114) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 20ms (View: 1, DB: 1) | 200 OK [http://localhost/village?filter_value=Kalolo&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 15:57:15) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.2ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 13ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 15:57:20) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 10ms (View: 1, DB: 1) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 15:57:26) [GET]
  Parameters: {"filter_value"=>"Area 36", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 36') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.4ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 155) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 11ms (View: 1, DB: 2) | 200 OK [http://localhost/village?filter_value=Area%2036&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:00:34) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 26ms (View: 25, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:00:53) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 11ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:00:56) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 9ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:00:58) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 9ms (View: 0, DB: 1) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:01:00) [GET]
  Parameters: {"filter_value"=>"Chitekwere", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Chitekwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (1.7ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 117) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 17ms (View: 0, DB: 3) | 200 OK [http://localhost/village?filter_value=Chitekwere&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:01:03) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:01:05) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 10ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:01:08) [GET]
  Parameters: {"filter_value"=>"Area 19", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 19') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.4ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 138) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 12ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Area%2019&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:03:13) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 62ms (View: 61, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:03:24) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:03:26) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 12ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:03:28) [GET]
  Parameters: {"filter_value"=>"Kalolo", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Kalolo') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.3ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 114) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 19ms (View: 1, DB: 2) | 200 OK [http://localhost/village?filter_value=Kalolo&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:03:31) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 1, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:03:33) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.2ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 11ms (View: 0, DB: 1) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:03:35) [GET]
  Parameters: {"filter_value"=>"Chimutu", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.2ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Chimutu') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.1ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 119) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 19ms (View: 1, DB: 2) | 200 OK [http://localhost/village?filter_value=Chimutu&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:04:16) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 32ms (View: 30, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:04:26) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 11ms (View: 1, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:04:28) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 13ms (View: 1, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:04:31) [GET]
  Parameters: {"filter_value"=>"Chiseka", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Chiseka') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.2ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 115) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 56ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Chiseka&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:04:34) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.2ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:04:35) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 13ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:04:37) [GET]
  Parameters: {"filter_value"=>"Area 13", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.4ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 13') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.3ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 132) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 14ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Area%2013&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:05:21) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 27ms (View: 26, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:05:34) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.2ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 13ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:05:37) [GET]
  Parameters: {"filter_value"=>"Kasungu", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.2ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Kasungu') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 2) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 13ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Kasungu&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:05:41) [GET]
  Parameters: {"filter_value"=>"S/C Simlemba", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.4ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'S/C Simlemba') LIMIT 1[0m
  [4;35;1mCoreVillage Load (1.6ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 77) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 18ms (View: 0, DB: 3) | 200 OK [http://localhost/village?filter_value=S/C%20Simlemba&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:05:43) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:05:45) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 9ms (View: 0, DB: 1) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:05:47) [GET]
  Parameters: {"filter_value"=>"Area 12", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 12') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.3ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 131) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 51ms (View: 1, DB: 2) | 200 OK [http://localhost/village?filter_value=Area%2012&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:07:08) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 31ms (View: 29, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:07:17) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 11ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:07:20) [GET]
  Parameters: {"filter_value"=>"Mchinji", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.4ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Mchinji') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 20) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 12ms (View: 1, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Mchinji&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:07:25) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (1.9ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 16ms (View: 0, DB: 3) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:07:43) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 49ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:07:46) [GET]
  Parameters: {"filter_value"=>"Mchinji", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Mchinji') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.2ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 20) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 11ms (View: 1, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Mchinji&search_string=]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:07:49) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.1ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 12ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:07:53) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>"K"}
  [4;35;1mCoreTraditionalAuthority Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (1.0ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%K%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 13ms (View: 0, DB: 3) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=K]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:07:54) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>"Ka"}
  [4;35;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (1.0ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%Ka%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 13ms (View: 1, DB: 2) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=Ka]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:07:56) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>"Kap"}
  [4;35;1mCoreTraditionalAuthority Columns (4.9ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.6ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%Kap%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 50ms (View: 0, DB: 6) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=Kap]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:08:01) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.2ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 16ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:08:07) [GET]
  Parameters: {"filter_value"=>"Mchinji", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Mchinji') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 20) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 12ms (View: 1, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Mchinji&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:08:10) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.2ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 16ms (View: 1, DB: 2) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:08:15) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>"K"}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.1ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%K%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 11ms (View: 1, DB: 2) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=K]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:08:15) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>"Ka"}
  [4;35;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.1ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%Ka%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 52ms (View: 1, DB: 2) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=Ka]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:08:17) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>"Kap"}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.2ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%Kap%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=Kap]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:08:59) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 27ms (View: 25, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:09:45) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 22ms (View: 21, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:11:28) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 72ms (View: 71, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:11:37) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 27ms (View: 25, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:12:29) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 32ms (View: 30, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:14:20) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 30ms (View: 28, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:14:59) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 27ms (View: 25, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:15:16) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 13ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:15:18) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 10ms (View: 0, DB: 1) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:15:20) [GET]
  Parameters: {"filter_value"=>"Chiseka", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Chiseka') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.2ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 115) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 16ms (View: 1, DB: 2) | 200 OK [http://localhost/village?filter_value=Chiseka&search_string=]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:15:24) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 9ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:15:26) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 51ms (View: 1, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:15:27) [GET]
  Parameters: {"filter_value"=>"Area 11", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 11') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.3ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 130) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.4ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 10ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Area%2011&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:17:32) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 24ms (View: 22, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:19:09) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 29ms (View: 27, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:20:25) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 25ms (View: 23, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:22:22) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 9ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:22:24) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 10ms (View: 0, DB: 1) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:22:27) [GET]
  Parameters: {"filter_value"=>"Chimutu", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Chimutu') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.1ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 119) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 12ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Chimutu&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:22:31) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:22:33) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:22:36) [GET]
  Parameters: {"filter_value"=>"Area 18", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 18') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.4ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 137) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 46ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Area%2018&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:23:18) [GET]
  Parameters: {"show_current_district"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_nationality"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_village"=>"true", "show_cell_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 19ms (View: 18, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_current_district=true&show_region_of_origin=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:23:33) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 14ms (View: 1, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:23:38) [GET]
  Parameters: {"filter_value"=>"Mchinji", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Mchinji') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.2ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 20) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 14ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Mchinji&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:23:43) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.1ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 14ms (View: 0, DB: 1) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:23:52) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>"K"}
  [4;35;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.2ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%K%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 54ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=K]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:23:56) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>"Ka"}
  [4;35;1mCoreTraditionalAuthority Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.1ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%Ka%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 14ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=Ka]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:24:00) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>"Kan"}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.7ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%Kan%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 10ms (View: 1, DB: 2) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=Kan]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:24:05) [GET]
  Parameters: {"filter_value"=>"Mavwere", "search_string"=>"Kank"}
  [4;35;1mCoreTraditionalAuthority Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mavwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.6ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%Kank%') AND traditional_authority_id = 182) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 10ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Mavwere&search_string=Kank]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:24:09) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:24:11) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 47ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:24:22) [GET]
  Parameters: {"filter_value"=>"Area 3", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 3') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.3ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 122) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.4ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Area%203&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 16:24:55) [POST]
  Parameters: {"REGION OF ORIGIN"=>"Central Region", "CURRENT REGION"=>"Central Region", "CURRENT AREA OF RESIDENCE"=>"Area 3", "person"=>{"addresses"=>{"subregion"=>"Mchinji", "county_district"=>"Mavwere", "neighborhood_cell"=>"Kankhande", "address2"=>"Lilongwe City", "city_village"=>"Escom Guest House", "address1"=>"Unknown"}, "age_estimate"=>"", "gender"=>"Female", "occupation"=>"Other", "home_phone_number"=>"N/A", "birth_year"=>"1978", "names"=>{"family_name"=>"Phiri", "middle_name"=>"Magret", "family_name2"=>"Kamanga", "given_name"=>"Grace"}, "birth_day"=>"12", "patient"=>"", "cell_phone_number"=>"N/A", "race"=>"", "birth_month"=>"6", "office_phone_number"=>"N/A", "citizenship"=>"Malawian"}}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (15.7ms)[0m   [0;1mINSERT INTO `person` (`gender`, `creator`, `birthdate_estimated`, `changed_by`, `date_voided`, `birthdate`, `voided_by`, `cause_of_death`, `date_created`, `dead`, `voided`, `death_date`, `date_changed`, `void_reason`, `uuid`) VALUES('F', 1, 0, 1, NULL, NULL, NULL, NULL, '2012-12-11 14:24:55', 0, 0, NULL, '2012-12-11 14:24:55', NULL, '88cbcc40-439e-11e2-aa70-30f9edafb6df')[0m
  [4;35;1mSQL (123.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.2ms)[0m   [0mUPDATE `person` SET `date_changed` = '2012-12-11 14:24:55', `birthdate` = '1978-06-12' WHERE `person_id` = 48[0m
  [4;36;1mSQL (87.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (17.7ms)[0m   [0mINSERT INTO `person_name` (`family_name`, `creator`, `middle_name`, `date_voided`, `changed_by`, `family_name_prefix`, `family_name2`, `voided_by`, `given_name`, `date_created`, `voided`, `preferred`, `void_reason`, `date_changed`, `person_id`, `degree`, `uuid`, `prefix`, `family_name_suffix`) VALUES('Phiri', 1, 'Magret', NULL, 1, NULL, 'Kamanga', NULL, 'Grace', '2012-12-11 14:24:55', 0, 0, NULL, '2012-12-11 14:24:55', 48, NULL, '88ef8cda-439e-11e2-aa70-30f9edafb6df', NULL, NULL)[0m
  [4;36;1mSQL (88.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (0.5ms)[0m   [0mINSERT INTO `person_address` (`subregion`, `country`, `creator`, `county_district`, `neighborhood_cell`, `date_voided`, `postal_code`, `voided_by`, `latitude`, `address1`, `address2`, `city_village`, `date_created`, `township_division`, `state_province`, `voided`, `preferred`, `longitude`, `region`, `void_reason`, `person_id`, `uuid`) VALUES('Mchinji', NULL, 1, 'Mavwere', 'Kankhande', NULL, NULL, NULL, NULL, 'Unknown', 'Lilongwe City', 'Escom Guest House', '2012-12-11 14:24:55', NULL, NULL, 0, 0, NULL, NULL, NULL, 48, '89008205-439e-11e2-aa70-30f9edafb6df')[0m
  [4;36;1mSQL (74.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (38.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (11.8ms)[0m   [0;1mINSERT INTO `person_attribute` (`creator`, `changed_by`, `date_voided`, `voided_by`, `date_created`, `voided`, `date_changed`, `void_reason`, `person_id`, `person_attribute_type_id`, `uuid`, `value`) VALUES(1, 1, NULL, NULL, '2012-12-11 14:24:55', 0, '2012-12-11 14:24:55', NULL, 48, 13, '8913c588-439e-11e2-aa70-30f9edafb6df', 'Other')[0m
  [4;35;1mSQL (82.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (16.6ms)[0m   [0mINSERT INTO `person_attribute` (`creator`, `changed_by`, `date_voided`, `voided_by`, `date_created`, `voided`, `date_changed`, `void_reason`, `person_id`, `person_attribute_type_id`, `uuid`, `value`) VALUES(1, 1, NULL, NULL, '2012-12-11 14:24:55', 0, '2012-12-11 14:24:55', NULL, 48, 12, '8922a85d-439e-11e2-aa70-30f9edafb6df', 'N/A')[0m
  [4;36;1mSQL (69.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (14.6ms)[0m   [0;1mINSERT INTO `person_attribute` (`creator`, `changed_by`, `date_voided`, `voided_by`, `date_created`, `voided`, `date_changed`, `void_reason`, `person_id`, `person_attribute_type_id`, `uuid`, `value`) VALUES(1, 1, NULL, NULL, '2012-12-11 14:24:56', 0, '2012-12-11 14:24:56', NULL, 48, 15, '89305e81-439e-11e2-aa70-30f9edafb6df', 'N/A')[0m
  [4;35;1mSQL (81.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (17.3ms)[0m   [0mINSERT INTO `person_attribute` (`creator`, `changed_by`, `date_voided`, `voided_by`, `date_created`, `voided`, `date_changed`, `void_reason`, `person_id`, `person_attribute_type_id`, `uuid`, `value`) VALUES(1, 1, NULL, NULL, '2012-12-11 14:24:56', 0, '2012-12-11 14:24:56', NULL, 48, 14, '893f921a-439e-11e2-aa70-30f9edafb6df', 'N/A')[0m
  [4;36;1mSQL (68.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (20.4ms)[0m   [0;1mINSERT INTO `person_attribute` (`creator`, `changed_by`, `date_voided`, `voided_by`, `date_created`, `voided`, `date_changed`, `void_reason`, `person_id`, `person_attribute_type_id`, `uuid`, `value`) VALUES(1, 1, NULL, NULL, '2012-12-11 14:24:56', 0, '2012-12-11 14:24:56', NULL, 48, 3, '894d52ef-439e-11e2-aa70-30f9edafb6df', 'Malawian')[0m
  [4;35;1mSQL (76.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.2ms)[0m   [0;1mINSERT INTO `patient` (`creator`, `changed_by`, `date_voided`, `voided_by`, `tribe`, `date_created`, `voided`, `date_changed`, `void_reason`, `patient_id`) VALUES(1, 1, NULL, NULL, NULL, '2012-12-11 14:24:56', 0, '2012-12-11 14:24:56', NULL, 48)[0m
  [4;35;1mSQL (76.1ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 1092ms (View: 3, DB: 989) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 16:24:56) [GET]
  Parameters: {"patient_id"=>"48"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 48) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.2ms)[0m   [0mINSERT INTO `patient_identifier` (`identifier`, `creator`, `date_voided`, `voided_by`, `identifier_type`, `date_created`, `voided`, `preferred`, `void_reason`, `patient_id`, `location_id`, `uuid`) VALUES('P100100000089', 1, NULL, NULL, 3, '2012-12-11 14:24:56', 0, 0, NULL, 48, 1, '8991b26a-439e-11e2-aa70-30f9edafb6df')[0m
  [4;36;1mSQL (82.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.4ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 486116.lbl
Completed in 140ms (View: 0, DB: 91) | 200 OK [http://localhost/national_id_label?patient_id=48]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:25:02) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 16:36:25) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 26ms (View: 25, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 16:36:44) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 7ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:36:53) [GET]
  Parameters: {"show_maiden_name"=>"true", "show_cell_phone_number"=>"true", "show_occupation"=>"true", "show_nationality"=>"true", "show_region_of_origin"=>"true", "show_current_village"=>"true", "show_current_t_a"=>"true", "show_current_district"=>"true", "show_middle_name"=>"true", "show_current_landmark"=>"true", "show_office_phone_number"=>"true", "show_home_phone_number"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 24ms (View: 22, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_region_of_origin=true&show_current_district=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:37:41) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 13ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:37:45) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 8ms (View: 0, DB: 1) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:37:49) [GET]
  Parameters: {"filter_value"=>"Khongoni", "search_string"=>""}
  [4;36;1mCoreTraditionalAuthority Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.4ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Khongoni') LIMIT 1[0m
  [4;36;1mCoreVillage Load (2.0ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 118) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 50ms (View: 1, DB: 4) | 200 OK [http://localhost/village?filter_value=Khongoni&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-11 16:37:54) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-11 16:37:56) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 15ms (View: 1, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-11 16:37:59) [GET]
  Parameters: {"filter_value"=>"Area 22", "search_string"=>""}
  [4;36;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 22') LIMIT 1[0m
  [4;36;1mCoreVillage Load (0.3ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 141) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 12ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Area%2022&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 16:38:23) [POST]
  Parameters: {"person"=>{"occupation"=>"Other", "names"=>{"given_name"=>"Jannet", "family_name"=>"Maigwa", "family_name2"=>"Kamanga", "middle_name"=>"N/A"}, "gender"=>"Female", "office_phone_number"=>"N/A", "addresses"=>{"county_district"=>"Khongoni", "subregion"=>"Lilongwe", "neighborhood_cell"=>"Bondo", "city_village"=>"Chipasula ", "address2"=>"Lilongwe City", "address1"=>"Unknown"}, "birth_month"=>"", "birth_year"=>"Unknown", "cell_phone_number"=>"N/A", "age_estimate"=>"38", "patient"=>"", "home_phone_number"=>"N/A", "race"=>"Ugandan", "citizenship"=>"Other", "birth_day"=>""}, "CURRENT AREA OF RESIDENCE"=>"Area 22", "REGION OF ORIGIN"=>"Central Region", "CURRENT REGION"=>"Central Region"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[]):
  app/models/core_person.rb:26:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (66.2ms)
Rendered rescues/_request_and_response (1.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 16:39:08) [POST]
  Parameters: {"person"=>{"occupation"=>"Other", "names"=>{"given_name"=>"Jannet", "family_name"=>"Maigwa", "family_name2"=>"Kamanga", "middle_name"=>"N/A"}, "gender"=>"Female", "office_phone_number"=>"N/A", "addresses"=>{"county_district"=>"Khongoni", "subregion"=>"Lilongwe", "neighborhood_cell"=>"Bondo", "city_village"=>"Chipasula ", "address2"=>"Lilongwe City", "address1"=>"Unknown"}, "birth_month"=>"", "birth_year"=>"Unknown", "cell_phone_number"=>"N/A", "age_estimate"=>"38", "patient"=>"", "home_phone_number"=>"N/A", "race"=>"Ugandan", "citizenship"=>"Other", "birth_day"=>""}, "CURRENT AREA OF RESIDENCE"=>"Area 22", "REGION OF ORIGIN"=>"Central Region", "CURRENT REGION"=>"Central Region"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCoreGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mCoreGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'dde_server_ip') LIMIT 1[0m
  [4;36;1mCoreGlobalProperty Load (0.0ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'dde_server_username') LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Load (0.0ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'dde_server_password') LIMIT 1[0m

URI::InvalidURIError (the scheme http does not accept registry part: :@ (or bad hostname?)):
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/generic.rb:195:in `initialize'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/http.rb:78:in `initialize'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/common.rb:488:in `new'
  /home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/uri/common.rb:488:in `parse'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:112:in `parse_url'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:116:in `parse_url_with_auth'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:63:in `execute'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient/request.rb:33:in `execute'
  /home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rest-client-1.6.7/lib/restclient.rb:72:in `post'
  app/models/core_person.rb:108:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (38.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 16:40:49) [POST]
  Parameters: {"person"=>{"occupation"=>"Other", "names"=>{"given_name"=>"Jannet", "family_name"=>"Maigwa", "family_name2"=>"Kamanga", "middle_name"=>"N/A"}, "gender"=>"Female", "office_phone_number"=>"N/A", "addresses"=>{"county_district"=>"Khongoni", "subregion"=>"Lilongwe", "neighborhood_cell"=>"Bondo", "city_village"=>"Chipasula ", "address2"=>"Lilongwe City", "address1"=>"Unknown"}, "birth_month"=>"", "birth_year"=>"Unknown", "cell_phone_number"=>"N/A", "age_estimate"=>"38", "patient"=>"", "home_phone_number"=>"N/A", "race"=>"Ugandan", "citizenship"=>"Other", "birth_day"=>""}, "CURRENT AREA OF RESIDENCE"=>"Area 22", "REGION OF ORIGIN"=>"Central Region", "CURRENT REGION"=>"Central Region"}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCoreGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'dde_server_ip') LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Load (0.0ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'dde_server_username') LIMIT 1[0m
  [4;36;1mCoreGlobalProperty Load (0.0ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'dde_server_password') LIMIT 1[0m

RuntimeError (--- http://:@/people.json/
):
  app/models/core_person.rb:109:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (26.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 16:43:08) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 24ms (View: 23, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 16:43:15) [POST]
  Parameters: {"person"=>{"birth_year"=>"Unknown", "gender"=>"Female", "home_phone_number"=>"N/A", "cell_phone_number"=>"N/A", "age_estimate"=>"38", "addresses"=>{"subregion"=>"Lilongwe", "city_village"=>"Chipasula ", "neighborhood_cell"=>"Bondo", "county_district"=>"Khongoni", "address2"=>"Lilongwe City", "address1"=>"Unknown"}, "office_phone_number"=>"N/A", "occupation"=>"Other", "race"=>"Ugandan", "citizenship"=>"Other", "patient"=>"", "birth_day"=>"", "birth_month"=>"", "names"=>{"middle_name"=>"N/A", "given_name"=>"Jannet", "family_name2"=>"Kamanga", "family_name"=>"Maigwa"}}, "CURRENT AREA OF RESIDENCE"=>"Area 22", "CURRENT REGION"=>"Central Region", "REGION OF ORIGIN"=>"Central Region"}
  [4;36;1mCorePerson Columns (3.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

RuntimeError (--- http://admin:admin@localhost/people.json/
):
  app/models/core_person.rb:109:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (26.7ms)
Rendered rescues/_request_and_response (1.1ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 16:43:42) [POST]
  Parameters: {"person"=>{"birth_year"=>"Unknown", "gender"=>"Female", "home_phone_number"=>"N/A", "cell_phone_number"=>"N/A", "age_estimate"=>"38", "addresses"=>{"subregion"=>"Lilongwe", "city_village"=>"Chipasula ", "neighborhood_cell"=>"Bondo", "county_district"=>"Khongoni", "address2"=>"Lilongwe City", "address1"=>"Unknown"}, "office_phone_number"=>"N/A", "occupation"=>"Other", "race"=>"Ugandan", "citizenship"=>"Other", "patient"=>"", "birth_day"=>"", "birth_month"=>"", "names"=>{"middle_name"=>"N/A", "given_name"=>"Jannet", "family_name2"=>"Kamanga", "family_name"=>"Maigwa"}}, "CURRENT AREA OF RESIDENCE"=>"Area 22", "CURRENT REGION"=>"Central Region", "REGION OF ORIGIN"=>"Central Region"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

RuntimeError (--- http://admin:admin@localhost:3001/people.json/
):
  app/models/core_person.rb:109:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (27.4ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 16:44:03) [POST]
  Parameters: {"person"=>{"birth_year"=>"Unknown", "gender"=>"Female", "home_phone_number"=>"N/A", "cell_phone_number"=>"N/A", "age_estimate"=>"38", "addresses"=>{"subregion"=>"Lilongwe", "city_village"=>"Chipasula ", "neighborhood_cell"=>"Bondo", "county_district"=>"Khongoni", "address2"=>"Lilongwe City", "address1"=>"Unknown"}, "office_phone_number"=>"N/A", "occupation"=>"Other", "race"=>"Ugandan", "citizenship"=>"Other", "patient"=>"", "birth_day"=>"", "birth_month"=>"", "names"=>{"middle_name"=>"N/A", "given_name"=>"Jannet", "family_name2"=>"Kamanga", "family_name"=>"Maigwa"}}, "CURRENT AREA OF RESIDENCE"=>"Area 22", "CURRENT REGION"=>"Central Region", "REGION OF ORIGIN"=>"Central Region"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.2ms)[0m   [0mINSERT INTO `person` (`gender`, `date_voided`, `creator`, `death_date`, `date_changed`, `date_created`, `dead`, `cause_of_death`, `voided`, `voided_by`, `birthdate`, `birthdate_estimated`, `void_reason`, `uuid`, `changed_by`) VALUES('F', NULL, 1, NULL, '2012-12-11 14:44:03', '2012-12-11 14:44:03', 0, NULL, 0, NULL, NULL, 0, NULL, '3569f1bc-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;36;1mSQL (140.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.2ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1974-07-01', `date_changed` = '2012-12-11 14:44:04', `birthdate_estimated` = 1 WHERE `person_id` = 49[0m
  [4;35;1mSQL (64.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (0.2ms)[0m   [0;1mINSERT INTO `person_name` (`middle_name`, `date_voided`, `degree`, `creator`, `given_name`, `date_changed`, `family_name_prefix`, `family_name2`, `date_created`, `preferred`, `family_name_suffix`, `voided`, `voided_by`, `void_reason`, `person_id`, `prefix`, `family_name`, `uuid`, `changed_by`) VALUES('N/A', NULL, NULL, 1, 'Jannet', '2012-12-11 14:44:04', NULL, 'Kamanga', '2012-12-11 14:44:04', 0, NULL, 0, NULL, NULL, 49, NULL, 'Maigwa', '35906d84-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;35;1mSQL (79.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (0.2ms)[0m   [0;1mINSERT INTO `person_address` (`state_province`, `longitude`, `region`, `subregion`, `township_division`, `latitude`, `date_voided`, `creator`, `city_village`, `date_created`, `preferred`, `postal_code`, `voided`, `voided_by`, `country`, `void_reason`, `person_id`, `neighborhood_cell`, `uuid`, `address1`, `address2`, `county_district`) VALUES(NULL, NULL, NULL, 'Lilongwe', NULL, NULL, NULL, 1, 'Chipasula ', '2012-12-11 14:44:04', 0, NULL, 0, NULL, NULL, NULL, 49, 'Bondo', '359d37f0-43a1-11e2-aa70-30f9edafb6df', 'Unknown', 'Lilongwe City', 'Khongoni')[0m
  [4;35;1mSQL (62.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (0.2ms)[0m   [0mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'Other', 13, 1, '2012-12-11 14:44:04', '2012-12-11 14:44:04', 0, NULL, NULL, 49, '35a89abc-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;36;1mSQL (54.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'N/A', 12, 1, '2012-12-11 14:44:04', '2012-12-11 14:44:04', 0, NULL, NULL, 49, '35b16f04-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;35;1mSQL (53.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (0.2ms)[0m   [0mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'N/A', 15, 1, '2012-12-11 14:44:04', '2012-12-11 14:44:04', 0, NULL, NULL, 49, '35b9fb17-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;36;1mSQL (261.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'N/A', 14, 1, '2012-12-11 14:44:04', '2012-12-11 14:44:04', 0, NULL, NULL, 49, '35e30d16-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;35;1mSQL (150.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (0.2ms)[0m   [0mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'Other', 3, 1, '2012-12-11 14:44:04', '2012-12-11 14:44:04', 0, NULL, NULL, 49, '35fa9af1-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;36;1mSQL (99.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'Ugandan', 1, 1, '2012-12-11 14:44:04', '2012-12-11 14:44:04', 0, NULL, NULL, 49, '360a2ebb-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;35;1mSQL (97.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 49 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.2ms)[0m   [0;1mINSERT INTO `patient` (`date_voided`, `creator`, `date_changed`, `tribe`, `date_created`, `voided`, `voided_by`, `void_reason`, `changed_by`, `patient_id`) VALUES(NULL, 1, '2012-12-11 14:44:05', NULL, '2012-12-11 14:44:05', 0, NULL, NULL, 1, 49)[0m
  [4;35;1mSQL (210.2ms)[0m   [0mCOMMIT[0m

NameError (uninitialized constant CorePerson::PatientIdentifierType):
  app/models/core_person.rb:119:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (31.7ms)
Rendered rescues/_request_and_response (0.7ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 16:44:28) [POST]
  Parameters: {"person"=>{"birth_year"=>"Unknown", "gender"=>"Female", "home_phone_number"=>"N/A", "cell_phone_number"=>"N/A", "age_estimate"=>"38", "addresses"=>{"subregion"=>"Lilongwe", "city_village"=>"Chipasula ", "neighborhood_cell"=>"Bondo", "county_district"=>"Khongoni", "address2"=>"Lilongwe City", "address1"=>"Unknown"}, "office_phone_number"=>"N/A", "occupation"=>"Other", "race"=>"Ugandan", "citizenship"=>"Other", "patient"=>"", "birth_day"=>"", "birth_month"=>"", "names"=>{"middle_name"=>"N/A", "given_name"=>"Jannet", "family_name2"=>"Kamanga", "family_name"=>"Maigwa"}}, "CURRENT AREA OF RESIDENCE"=>"Area 22", "CURRENT REGION"=>"Central Region", "REGION OF ORIGIN"=>"Central Region"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (18.1ms)[0m   [0mINSERT INTO `person` (`gender`, `date_voided`, `creator`, `death_date`, `date_changed`, `date_created`, `dead`, `cause_of_death`, `voided`, `voided_by`, `birthdate`, `birthdate_estimated`, `void_reason`, `uuid`, `changed_by`) VALUES('F', NULL, 1, NULL, '2012-12-11 14:44:28', '2012-12-11 14:44:28', 0, NULL, 0, NULL, NULL, 0, NULL, '44514778-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;36;1mSQL (124.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.2ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1974-07-01', `date_changed` = '2012-12-11 14:44:29', `birthdate_estimated` = 1 WHERE `person_id` = 50[0m
  [4;35;1mSQL (75.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (14.4ms)[0m   [0;1mINSERT INTO `person_name` (`middle_name`, `date_voided`, `degree`, `creator`, `given_name`, `date_changed`, `family_name_prefix`, `family_name2`, `date_created`, `preferred`, `family_name_suffix`, `voided`, `voided_by`, `void_reason`, `person_id`, `prefix`, `family_name`, `uuid`, `changed_by`) VALUES('N/A', NULL, NULL, 1, 'Jannet', '2012-12-11 14:44:29', NULL, 'Kamanga', '2012-12-11 14:44:29', 0, NULL, 0, NULL, NULL, 50, NULL, 'Maigwa', '4473cca7-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;35;1mSQL (81.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (0.2ms)[0m   [0;1mINSERT INTO `person_address` (`state_province`, `longitude`, `region`, `subregion`, `township_division`, `latitude`, `date_voided`, `creator`, `city_village`, `date_created`, `preferred`, `postal_code`, `voided`, `voided_by`, `country`, `void_reason`, `person_id`, `neighborhood_cell`, `uuid`, `address1`, `address2`, `county_district`) VALUES(NULL, NULL, NULL, 'Lilongwe', NULL, NULL, NULL, 1, 'Chipasula ', '2012-12-11 14:44:29', 0, NULL, 0, NULL, NULL, NULL, 50, 'Bondo', '44832395-43a1-11e2-aa70-30f9edafb6df', 'Unknown', 'Lilongwe City', 'Khongoni')[0m
  [4;35;1mSQL (73.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (19.2ms)[0m   [0mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'Other', 13, 1, '2012-12-11 14:44:29', '2012-12-11 14:44:29', 0, NULL, NULL, 50, '449002bd-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;36;1mSQL (81.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'N/A', 12, 1, '2012-12-11 14:44:29', '2012-12-11 14:44:29', 0, NULL, NULL, 50, '449fd069-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;35;1mSQL (97.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (0.2ms)[0m   [0mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'N/A', 15, 1, '2012-12-11 14:44:29', '2012-12-11 14:44:29', 0, NULL, NULL, 50, '44af4838-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;36;1mSQL (51.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (40.8ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'N/A', 14, 1, '2012-12-11 14:44:29', '2012-12-11 14:44:29', 0, NULL, NULL, 50, '44b79b62-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;35;1mSQL (79.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (0.2ms)[0m   [0mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'Other', 3, 1, '2012-12-11 14:44:29', '2012-12-11 14:44:29', 0, NULL, NULL, 50, '44ca564e-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;36;1mSQL (75.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_voided`, `value`, `person_attribute_type_id`, `creator`, `date_changed`, `date_created`, `voided`, `voided_by`, `void_reason`, `person_id`, `uuid`, `changed_by`) VALUES(NULL, 'Ugandan', 1, 1, '2012-12-11 14:44:29', '2012-12-11 14:44:29', 0, NULL, NULL, 50, '44d63a02-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;35;1mSQL (86.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 50 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.2ms)[0m   [0;1mINSERT INTO `patient` (`date_voided`, `creator`, `date_changed`, `tribe`, `date_created`, `voided`, `voided_by`, `void_reason`, `changed_by`, `patient_id`) VALUES(NULL, 1, '2012-12-11 14:44:29', NULL, '2012-12-11 14:44:29', 0, NULL, NULL, 1, 50)[0m
  [4;35;1mSQL (91.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (21.1ms)[0m   [0;1mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `creator`, `identifier`, `date_created`, `preferred`, `voided`, `voided_by`, `void_reason`, `identifier_type`, `uuid`, `patient_id`) VALUES(1, NULL, 1, 'HKH726', '2012-12-11 14:44:30', 0, 0, NULL, NULL, 3, '44f4015d-43a1-11e2-aa70-30f9edafb6df', 50)[0m
  [4;35;1mSQL (70.3ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 1592ms (View: 5, DB: 1111) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 16:44:30) [GET]
  Parameters: {"patient_id"=>"50"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 50) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 50 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 50 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 50 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 50 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 50 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 50 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 50 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 50 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 502315.lbl
Completed in 60ms (View: 1, DB: 8) | 200 OK [http://localhost/national_id_label?patient_id=50]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 16:44:37) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 16:48:51) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 4, DB: 1) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:48:56) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 21ms (View: 20, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-11 16:49:10) [POST]
  Parameters: {"person"=>{"birth_year"=>"Unknown", "gender"=>"Female", "age_estimate"=>"39", "patient"=>"", "birth_day"=>"", "birth_month"=>"", "names"=>{"given_name"=>"Unknown", "family_name"=>"Unknown"}}}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.2ms)[0m   [0mINSERT INTO `person` (`gender`, `date_voided`, `creator`, `death_date`, `date_changed`, `date_created`, `dead`, `cause_of_death`, `voided`, `voided_by`, `birthdate`, `birthdate_estimated`, `void_reason`, `uuid`, `changed_by`) VALUES('F', NULL, 1, NULL, '2012-12-11 14:49:10', '2012-12-11 14:49:10', 0, NULL, 0, NULL, NULL, 0, NULL, 'ec5e8392-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;36;1mSQL (52.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.2ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1973-07-01', `date_changed` = '2012-12-11 14:49:10', `birthdate_estimated` = 1 WHERE `person_id` = 51[0m
  [4;35;1mSQL (97.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (21.7ms)[0m   [0;1mINSERT INTO `person_name` (`middle_name`, `date_voided`, `degree`, `creator`, `given_name`, `date_changed`, `family_name_prefix`, `family_name2`, `date_created`, `preferred`, `family_name_suffix`, `voided`, `voided_by`, `void_reason`, `person_id`, `prefix`, `family_name`, `uuid`, `changed_by`) VALUES(NULL, NULL, NULL, 1, 'Unknown', '2012-12-11 14:49:11', NULL, NULL, '2012-12-11 14:49:11', 0, NULL, 0, NULL, NULL, 51, NULL, 'Unknown', 'ec7693fa-43a1-11e2-aa70-30f9edafb6df', 1)[0m
  [4;35;1mSQL (96.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 51 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (13.4ms)[0m   [0;1mINSERT INTO `patient` (`date_voided`, `creator`, `date_changed`, `tribe`, `date_created`, `voided`, `voided_by`, `void_reason`, `changed_by`, `patient_id`) VALUES(NULL, 1, '2012-12-11 14:49:11', NULL, '2012-12-11 14:49:11', 0, NULL, NULL, 1, 51)[0m
  [4;35;1mSQL (87.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.2ms)[0m   [0;1mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `creator`, `identifier`, `date_created`, `preferred`, `voided`, `voided_by`, `void_reason`, `identifier_type`, `uuid`, `patient_id`) VALUES(1, NULL, 1, 'KTLFKP', '2012-12-11 14:49:11', 0, 0, NULL, NULL, 3, 'ec9b1b83-43a1-11e2-aa70-30f9edafb6df', 51)[0m
  [4;35;1mSQL (79.1ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 823ms (View: 3, DB: 454) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-11 16:49:11) [GET]
  Parameters: {"patient_id"=>"51"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.8ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 51) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 51 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 51 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 51 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 51 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 51 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 51 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 51 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 51 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 514070.lbl
Completed in 78ms (View: 0, DB: 8) | 200 OK [http://localhost/national_id_label?patient_id=51]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 16:49:17) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 10ms (View: 8, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-11 16:49:44) [GET]
  Parameters: {"show_current_village"=>"true", "show_nationality"=>"true", "show_region_of_origin"=>"true", "show_office_phone_number"=>"true", "show_home_phone_number"=>"true", "show_occupation"=>"true", "show_middle_name"=>"true", "show_current_landmark"=>"true", "show_cell_phone_number"=>"true", "show_current_district"=>"true", "show_current_t_a"=>"true", "show_maiden_name"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 15ms (View: 14, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_region_of_origin=true&show_current_district=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-11 16:49:57) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 10ms (View: 8, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 08:31:16) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 174ms (View: 173, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 08:32:12) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 08:38:36) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'KTLFKP') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.6ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 51 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.6ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 51 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.6ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'HKH726') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 50 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 50 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000089') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.6ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000025') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 42 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'KLTFTU') AND (patient_identifier.voided = 0) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (1.4ms)[0m   [0;1mINSERT INTO `person` (`gender`, `death_date`, `changed_by`, `date_changed`, `date_voided`, `date_created`, `voided`, `uuid`, `dead`, `birthdate`, `cause_of_death`, `void_reason`, `creator`, `birthdate_estimated`, `voided_by`) VALUES('F', NULL, 1, '2012-12-12 08:06:28', NULL, '2012-12-12 08:06:28', 0, 'd4bb2e31-4432-11e2-9220-30f9edafb6df', 0, NULL, NULL, NULL, 1, 0, NULL)[0m
  [4;35;1mSQL (123.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.6ms)[0m   [0mUPDATE `person` SET `date_changed` = '2012-12-12 08:06:28', `birthdate` = '2012-12-12' WHERE `person_id` = 52[0m
  [4;36;1mSQL (86.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (1.3ms)[0m   [0mINSERT INTO `person_name` (`person_id`, `date_voided`, `changed_by`, `date_changed`, `prefix`, `family_name_prefix`, `date_created`, `preferred`, `voided`, `uuid`, `family_name_suffix`, `given_name`, `middle_name`, `family_name2`, `void_reason`, `family_name`, `creator`, `degree`, `voided_by`) VALUES(52, NULL, 1, '2012-12-12 08:06:28', NULL, NULL, '2012-12-12 08:06:28', 0, 0, 'd4dcbf10-4432-11e2-9220-30f9edafb6df', NULL, 'Mary', '', NULL, NULL, 'Banda', 1, NULL, NULL)[0m
  [4;36;1mSQL (83.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (5.0ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (0.9ms)[0m   [0mINSERT INTO `person_address` (`person_id`, `date_voided`, `date_created`, `preferred`, `address1`, `address2`, `country`, `voided`, `neighborhood_cell`, `uuid`, `city_village`, `postal_code`, `county_district`, `region`, `subregion`, `state_province`, `void_reason`, `longitude`, `creator`, `latitude`, `township_division`, `voided_by`) VALUES(52, NULL, '2012-12-12 08:06:28', 0, '', '', NULL, 0, NULL, 'd4edf3e5-4432-11e2-9220-30f9edafb6df', '', NULL, '', NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL)[0m
  [4;36;1mSQL (77.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Load (0.5ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 52 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (0.6ms)[0m   [0mINSERT INTO `patient` (`changed_by`, `date_changed`, `date_voided`, `date_created`, `voided`, `tribe`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, '2012-12-12 08:06:28', NULL, '2012-12-12 08:06:28', 0, NULL, NULL, 1, 52, NULL)[0m
  [4;36;1mSQL (71.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (1.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.9ms)[0m   [0mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'KLTFTU', '2012-12-12 08:06:28', 3, 0, 0, 'd509a4ac-4432-11e2-9220-30f9edafb6df', NULL, 1, 52, NULL)[0m
  [4;36;1mSQL (77.6ms)[0m   [0;1mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-12 10:25:58) [GET]
  Parameters: {"show_nationality"=>"true", "show_region_of_origin"=>"true", "show_current_village"=>"true", "show_occupation"=>"true", "show_office_phone_number"=>"true", "show_maiden_name"=>"true", "show_current_district"=>"true", "show_cell_phone_number"=>"true", "show_home_phone_number"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_current_landmark"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 70ms (View: 68, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_region_of_origin=true&show_current_district=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-12 10:26:41) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (13.8ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (1.2ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 35ms (View: 1, DB: 17) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-12 10:26:45) [GET]
  Parameters: {"filter_value"=>"Ntchisi", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.6ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Ntchisi') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (19.6ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 8) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 63ms (View: 0, DB: 22) | 200 OK [http://localhost/traditional_authority?filter_value=Ntchisi&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-12 10:26:47) [GET]
  Parameters: {"filter_value"=>"TA Chikho", "search_string"=>""}
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'TA Chikho') LIMIT 1[0m
  [4;36;1mCoreVillage Load (16.9ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 88) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 30ms (View: 0, DB: 19) | 200 OK [http://localhost/village?filter_value=TA%20Chikho&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-12 10:26:51) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 9ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-12 10:26:53) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.2ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.9ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-12 10:26:56) [GET]
  Parameters: {"filter_value"=>"Area 22", "search_string"=>""}
  [4;36;1mCoreTraditionalAuthority Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.9ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 22') LIMIT 1[0m
  [4;36;1mCoreVillage Load (1.1ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 141) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 14ms (View: 0, DB: 4) | 200 OK [http://localhost/village?filter_value=Area%2022&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-12 10:27:26) [POST]
  Parameters: {"person"=>{"names"=>{"family_name2"=>"Kachingwe", "given_name"=>"Jean", "family_name"=>"Kamunga", "middle_name"=>"Madalitso"}, "home_phone_number"=>"N/A", "addresses"=>{"subregion"=>"Ntchisi", "address2"=>"Lilongwe City", "address1"=>"P/2394", "county_district"=>"TA Chikho", "neighborhood_cell"=>"Bande", "city_village"=>"Chipasula "}, "gender"=>"Female", "age_estimate"=>"36", "citizenship"=>"Malawian", "birth_day"=>"", "occupation"=>"Other", "office_phone_number"=>"N/A", "race"=>"", "birth_month"=>"", "patient"=>"", "cell_phone_number"=>"09999999", "birth_year"=>"Unknown"}, "REGION OF ORIGIN"=>"Central Region", "CURRENT REGION"=>"Central Region", "CURRENT AREA OF RESIDENCE"=>"Area 22"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (17.3ms)[0m   [0mINSERT INTO `person` (`date_voided`, `gender`, `birthdate_estimated`, `voided_by`, `cause_of_death`, `creator`, `changed_by`, `void_reason`, `voided`, `date_changed`, `birthdate`, `dead`, `death_date`, `date_created`, `uuid`) VALUES(NULL, 'F', 0, NULL, NULL, 1, 1, NULL, 0, '2012-12-12 08:27:27', NULL, 0, NULL, '2012-12-12 08:27:27', 'c31a66ce-4435-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (120.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (19.4ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `date_changed` = '2012-12-12 08:27:27', `birthdate` = '1976-07-01' WHERE `person_id` = 53[0m
  [4;35;1mSQL (89.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (13.1ms)[0m   [0;1mINSERT INTO `person_name` (`prefix`, `date_voided`, `person_id`, `degree`, `family_name2`, `voided_by`, `preferred`, `creator`, `changed_by`, `void_reason`, `given_name`, `family_name_prefix`, `voided`, `family_name`, `date_changed`, `family_name_suffix`, `date_created`, `middle_name`, `uuid`) VALUES(NULL, NULL, 53, NULL, 'Kachingwe', NULL, 0, 1, 1, NULL, 'Jean', NULL, 0, 'Kamunga', '2012-12-12 08:27:27', NULL, '2012-12-12 08:27:27', 'Madalitso', 'c34168cb-4435-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (82.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (20.0ms)[0m   [0;1mINSERT INTO `person_address` (`country`, `latitude`, `date_voided`, `region`, `person_id`, `township_division`, `address1`, `address2`, `voided_by`, `subregion`, `preferred`, `creator`, `void_reason`, `county_district`, `voided`, `neighborhood_cell`, `city_village`, `date_created`, `state_province`, `postal_code`, `longitude`, `uuid`) VALUES(NULL, NULL, NULL, NULL, 53, NULL, 'P/2394', 'Lilongwe City', NULL, 'Ntchisi', 0, 1, NULL, 'TA Chikho', 0, 'Bande', 'Chipasula ', '2012-12-12 08:27:27', NULL, NULL, NULL, 'c350bcbd-4435-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (119.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (49.5ms)[0m   [0mINSERT INTO `person_attribute` (`date_voided`, `person_id`, `voided_by`, `creator`, `changed_by`, `value`, `person_attribute_type_id`, `void_reason`, `voided`, `date_changed`, `date_created`, `uuid`) VALUES(NULL, 53, NULL, 1, 1, 'Other', 13, NULL, 0, '2012-12-12 08:27:27', '2012-12-12 08:27:27', 'c36813ee-4435-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (82.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.6ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (19.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_voided`, `person_id`, `voided_by`, `creator`, `changed_by`, `value`, `person_attribute_type_id`, `void_reason`, `voided`, `date_changed`, `date_created`, `uuid`) VALUES(NULL, 53, NULL, 1, 1, '09999999', 12, NULL, 0, '2012-12-12 08:27:27', '2012-12-12 08:27:27', 'c37cc5cc-4435-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (99.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (1.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (18.5ms)[0m   [0mINSERT INTO `person_attribute` (`date_voided`, `person_id`, `voided_by`, `creator`, `changed_by`, `value`, `person_attribute_type_id`, `void_reason`, `voided`, `date_changed`, `date_created`, `uuid`) VALUES(NULL, 53, NULL, 1, 1, 'N/A', 15, NULL, 0, '2012-12-12 08:27:27', '2012-12-12 08:27:27', 'c38fa6c8-4435-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (88.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_voided`, `person_id`, `voided_by`, `creator`, `changed_by`, `value`, `person_attribute_type_id`, `void_reason`, `voided`, `date_changed`, `date_created`, `uuid`) VALUES(NULL, 53, NULL, 1, 1, 'N/A', 14, NULL, 0, '2012-12-12 08:27:28', '2012-12-12 08:27:28', 'c3a0642b-4435-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (41.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (14.3ms)[0m   [0mINSERT INTO `person_attribute` (`date_voided`, `person_id`, `voided_by`, `creator`, `changed_by`, `value`, `person_attribute_type_id`, `void_reason`, `voided`, `date_changed`, `date_created`, `uuid`) VALUES(NULL, 53, NULL, 1, 1, 'Malawian', 3, NULL, 0, '2012-12-12 08:27:28', '2012-12-12 08:27:28', 'c3a73b46-4435-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (82.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.7ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 53 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (13.2ms)[0m   [0mINSERT INTO `patient` (`date_voided`, `voided_by`, `creator`, `changed_by`, `void_reason`, `voided`, `date_changed`, `tribe`, `patient_id`, `date_created`) VALUES(NULL, NULL, 1, 1, NULL, 0, '2012-12-12 08:27:28', NULL, 53, '2012-12-12 08:27:28')[0m
  [4;36;1mSQL (40.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (22.1ms)[0m   [0mINSERT INTO `patient_identifier` (`date_voided`, `voided_by`, `preferred`, `creator`, `identifier_type`, `location_id`, `void_reason`, `identifier`, `voided`, `patient_id`, `date_created`, `uuid`) VALUES(NULL, NULL, 0, 1, 3, 1, NULL, 'JCXPAP', 0, 53, '2012-12-12 08:27:28', 'c3c1bde7-4435-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (57.4ms)[0m   [0;1mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 1702ms (View: 57, DB: 1124) | 200 OK [http://localhost/core_patient_registration/create]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-12 10:27:28) [GET]
  Parameters: {"patient_id"=>"53"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 53) AND (person.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 53 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 53 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 53 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 53 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 53 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 53 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 53 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 53 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 535540.lbl
Completed in 41ms (View: 0, DB: 6) | 200 OK [http://localhost/national_id_label?patient_id=53]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 10:27:34) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-12 10:29:20) [GET]
  Parameters: {"patient_id"=>"53"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 53) AND (person.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 53 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 53 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 53 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 53 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 53 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 53 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 53 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 53 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 533545.lbl
Completed in 87ms (View: 0, DB: 8) | 200 OK [http://localhost/national_id_label?patient_id=53]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-12 10:29:50) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 9ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-12 10:29:53) [GET]
  Parameters: {"filter_value"=>"Mchinji", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.3ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Mchinji') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.4ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 20) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 13ms (View: 0, DB: 3) | 200 OK [http://localhost/traditional_authority?filter_value=Mchinji&search_string=]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-12 10:29:54) [GET]
  Parameters: {"filter_value"=>"Dambe", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.8ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Dambe') LIMIT 1[0m
  [4;35;1mCoreVillage Load (11.3ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 181) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 26ms (View: 0, DB: 13) | 200 OK [http://localhost/village?filter_value=Dambe&search_string=]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-12 10:29:57) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-12 10:29:59) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 12ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-12 10:30:02) [GET]
  Parameters: {"filter_value"=>"Area 25", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (1.0ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 25') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.5ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 144) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 12ms (View: 0, DB: 3) | 200 OK [http://localhost/village?filter_value=Area%2025&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-12 10:30:08) [POST]
  Parameters: {"person"=>{"names"=>{"family_name2"=>"Kachingwe", "given_name"=>"Jean", "family_name"=>"Kamunga", "middle_name"=>"Madalitso"}, "home_phone_number"=>"N/A", "addresses"=>{"subregion"=>"Mchinji", "address2"=>"Lilongwe City", "address1"=>"P/2394", "county_district"=>"Dambe", "neighborhood_cell"=>"Azele", "city_village"=>"Area 25c Location"}, "gender"=>"Female", "age_estimate"=>"36", "citizenship"=>"Malawian", "birth_day"=>"", "occupation"=>"Other", "office_phone_number"=>"N/A", "race"=>"", "birth_month"=>"", "patient"=>"", "cell_phone_number"=>"09999999", "birth_year"=>"Unknown"}, "REGION OF ORIGIN"=>"Central Region", "CURRENT REGION"=>"Central Region", "CURRENT AREA OF RESIDENCE"=>"Area 25"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

RuntimeError (--- !map:HashWithIndifferentAccess 
CURRENT REGION: Central Region
REGION OF ORIGIN: Central Region
person: !map:HashWithIndifferentAccess 
  names: !map:HashWithIndifferentAccess 
    family_name2: Kachingwe
    given_name: Jean
    family_name: Kamunga
    middle_name: Madalitso
  gender: Female
  addresses: !map:HashWithIndifferentAccess 
    address1: P/2394
    address2: Lilongwe City
    subregion: Mchinji
    county_district: Dambe
    neighborhood_cell: Azele
    city_village: Area 25c Location
  home_phone_number: N/A
  age_estimate: "36"
  citizenship: Malawian
  birth_day: ""
  birth_month: ""
  race: ""
  office_phone_number: N/A
  occupation: Other
  birth_year: Unknown
  cell_phone_number: 09999999
  patient: ""
action: create
controller: core_patient_registration
CURRENT AREA OF RESIDENCE: Area 25
):
  app/models/core_person.rb:26:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (61.8ms)
Rendered rescues/_request_and_response (1.1ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-12 10:30:22) [POST]
  Parameters: {"person"=>{"names"=>{"family_name2"=>"Kachingwe", "given_name"=>"Jean", "family_name"=>"Kamunga", "middle_name"=>"Madalitso"}, "home_phone_number"=>"N/A", "addresses"=>{"subregion"=>"Mchinji", "address2"=>"Lilongwe City", "address1"=>"P/2394", "county_district"=>"Dambe", "neighborhood_cell"=>"Azele", "city_village"=>"Area 25c Location"}, "gender"=>"Female", "age_estimate"=>"36", "citizenship"=>"Malawian", "birth_day"=>"", "occupation"=>"Other", "office_phone_number"=>"N/A", "race"=>"", "birth_month"=>"", "patient"=>"", "cell_phone_number"=>"09999999", "birth_year"=>"Unknown"}, "REGION OF ORIGIN"=>"Central Region", "CURRENT REGION"=>"Central Region", "CURRENT AREA OF RESIDENCE"=>"Area 25"}
  [4;36;1mCorePerson Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

RuntimeError ({"CURRENT REGION"=>"Central Region", "REGION OF ORIGIN"=>"Central Region", "person"=>{"names"=>{"family_name2"=>"Kachingwe", "given_name"=>"Jean", "family_name"=>"Kamunga", "middle_name"=>"Madalitso"}, "gender"=>"Female", "addresses"=>{"address1"=>"P/2394", "address2"=>"Lilongwe City", "subregion"=>"Mchinji", "county_district"=>"Dambe", "neighborhood_cell"=>"Azele", "city_village"=>"Area 25c Location"}, "home_phone_number"=>"N/A", "age_estimate"=>"36", "citizenship"=>"Malawian", "birth_day"=>"", "birth_month"=>"", "race"=>"", "office_phone_number"=>"N/A", "occupation"=>"Other", "birth_year"=>"Unknown", "cell_phone_number"=>"09999999", "patient"=>""}, "action"=>"create", "controller"=>"core_patient_registration", "CURRENT AREA OF RESIDENCE"=>"Area 25"}):
  app/models/core_person.rb:26:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 10:40:59) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 23ms (View: 22, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-12 10:41:08) [POST]
  Parameters: {"person"=>{"office_phone_number"=>"N/A", "citizenship"=>"Malawian", "addresses"=>{"city_village"=>"Area 25c Location", "address2"=>"Lilongwe City", "address1"=>"P/2394", "subregion"=>"Mchinji", "county_district"=>"Dambe", "neighborhood_cell"=>"Azele"}, "gender"=>"Female", "occupation"=>"Other", "age_estimate"=>"36", "home_phone_number"=>"N/A", "birth_year"=>"Unknown", "cell_phone_number"=>"09999999", "race"=>"", "names"=>{"middle_name"=>"Madalitso", "given_name"=>"Jean", "family_name2"=>"Kachingwe", "family_name"=>"Kamunga"}, "patient"=>"", "birth_day"=>"", "birth_month"=>""}, "REGION OF ORIGIN"=>"Central Region", "CURRENT REGION"=>"Central Region", "CURRENT AREA OF RESIDENCE"=>"Area 25"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (23.4ms)[0m   [0mINSERT INTO `person` (`birthdate_estimated`, `date_voided`, `gender`, `cause_of_death`, `date_changed`, `void_reason`, `voided_by`, `birthdate`, `creator`, `voided`, `dead`, `death_date`, `date_created`, `changed_by`, `uuid`) VALUES(0, NULL, 'F', NULL, '2012-12-12 08:41:09', NULL, NULL, NULL, 1, 0, 0, NULL, '2012-12-12 08:41:09', 1, 'ad06108c-4437-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (108.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (18.2ms)[0m   [0;1mUPDATE `person` SET `date_changed` = '2012-12-12 08:41:09', `birthdate` = '1976-07-01', `birthdate_estimated` = 1 WHERE `person_id` = 54[0m
  [4;35;1mSQL (90.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (13.0ms)[0m   [0;1mINSERT INTO `person_name` (`person_id`, `date_voided`, `degree`, `prefix`, `void_reason`, `date_changed`, `preferred`, `middle_name`, `family_name_prefix`, `voided_by`, `given_name`, `family_name2`, `family_name_suffix`, `family_name`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(54, NULL, NULL, NULL, NULL, '2012-12-12 08:41:09', 0, 'Madalitso', NULL, NULL, 'Jean', 'Kachingwe', NULL, 'Kamunga', 1, 0, '2012-12-12 08:41:09', 1, 'ad2c3e8b-4437-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (71.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (20.4ms)[0m   [0;1mINSERT INTO `person_address` (`person_id`, `city_village`, `date_voided`, `postal_code`, `address1`, `address2`, `longitude`, `region`, `void_reason`, `subregion`, `preferred`, `county_district`, `voided_by`, `latitude`, `country`, `creator`, `voided`, `state_province`, `neighborhood_cell`, `township_division`, `date_created`, `uuid`) VALUES(54, 'Area 25c Location', NULL, NULL, 'P/2394', 'Lilongwe City', NULL, NULL, NULL, 'Mchinji', 0, 'Dambe', NULL, NULL, NULL, 1, 0, NULL, 'Azele', NULL, '2012-12-12 08:41:09', 'ad39e1ff-4437-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (52.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (17.1ms)[0m   [0mINSERT INTO `person_attribute` (`person_id`, `value`, `date_voided`, `person_attribute_type_id`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(54, 'Other', NULL, 13, '2012-12-12 08:41:09', NULL, NULL, 1, 0, '2012-12-12 08:41:09', 1, 'ad475f48-4437-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (68.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (35.0ms)[0m   [0;1mINSERT INTO `person_attribute` (`person_id`, `value`, `date_voided`, `person_attribute_type_id`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(54, '09999999', NULL, 12, '2012-12-12 08:41:09', NULL, NULL, 1, 0, '2012-12-12 08:41:09', 1, 'ad551646-4437-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (71.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (0.5ms)[0m   [0mINSERT INTO `person_attribute` (`person_id`, `value`, `date_voided`, `person_attribute_type_id`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(54, 'N/A', NULL, 15, '2012-12-12 08:41:09', NULL, NULL, 1, 0, '2012-12-12 08:41:09', 1, 'ad662fcc-4437-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (72.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (22.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`person_id`, `value`, `date_voided`, `person_attribute_type_id`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(54, 'N/A', NULL, 14, '2012-12-12 08:41:09', NULL, NULL, 1, 0, '2012-12-12 08:41:09', 1, 'ad71cf23-4437-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (52.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (17.0ms)[0m   [0mINSERT INTO `person_attribute` (`person_id`, `value`, `date_voided`, `person_attribute_type_id`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(54, 'Malawian', NULL, 3, '2012-12-12 08:41:09', NULL, NULL, 1, 0, '2012-12-12 08:41:09', 1, 'ad7db490-4437-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (69.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 54 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (15.8ms)[0m   [0mINSERT INTO `patient` (`date_voided`, `tribe`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `patient_id`) VALUES(NULL, NULL, '2012-12-12 08:41:10', NULL, NULL, 1, 0, '2012-12-12 08:41:10', 1, 54)[0m
  [4;36;1mSQL (65.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (14.2ms)[0m   [0mINSERT INTO `patient_identifier` (`date_voided`, `identifier_type`, `location_id`, `void_reason`, `preferred`, `voided_by`, `identifier`, `creator`, `voided`, `patient_id`, `date_created`, `uuid`) VALUES(NULL, 3, 1, NULL, 0, NULL, 'L2MNPY', 1, 0, 54, '2012-12-12 08:41:10', 'ada0ce1f-4437-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (64.3ms)[0m   [0;1mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 1493ms (View: 6, DB: 996) | 200 OK [http://localhost/core_patient_registration/create]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-12 10:41:10) [GET]
  Parameters: {"patient_id"=>"54"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 54) AND (person.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 54 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 54 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 54 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 54 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 54 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 54 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 54 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 543615.lbl
Completed in 38ms (View: 0, DB: 5) | 200 OK [http://localhost/national_id_label?patient_id=54]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 10:41:16) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'L2MNPY') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 54 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 54 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-12 11:01:44) [GET]
  Parameters: {"show_region_of_origin"=>"true", "show_current_landmark"=>"true", "show_occupation"=>"true", "show_cell_phone_number"=>"true", "show_office_phone_number"=>"true", "show_current_district"=>"true", "show_home_phone_number"=>"true", "show_maiden_name"=>"true", "show_middle_name"=>"true", "show_current_t_a"=>"true", "show_nationality"=>"true", "show_current_village"=>"true"}
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 22ms (View: 20, DB: 0) | 200 OK [http://localhost/new_patient?show_middle_name=true&show_maiden_name=true&show_region_of_origin=true&show_current_district=true&show_current_t_a=true&show_current_village=true&show_current_landmark=true&show_cell_phone_number=true&show_office_phone_number=true&show_home_phone_number=true&show_occupation=true&show_nationality=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-12 11:02:19) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Central Region"}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-12 11:02:22) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Salima"}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.3ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Salima') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.4ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 16) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 10ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Salima&search_string=]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-12 11:02:24) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Khombedza"}
  [4;35;1mCoreTraditionalAuthority Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Khombedza') LIMIT 1[0m
  [4;35;1mCoreVillage Load (26.5ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 108) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 41ms (View: 0, DB: 29) | 200 OK [http://localhost/village?filter_value=Khombedza&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-12 11:02:28) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Central Region"}
  [4;35;1mCoreRegion Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 44ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-12 11:02:30) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Lilongwe City"}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.2ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 13ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-12 11:02:35) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Area 15"}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 15') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.3ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 134) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.4ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Area%2015&search_string=]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-12 11:02:58) [POST]
  Parameters: {"person"=>{"office_phone_number"=>"N/A", "citizenship"=>"Malawian", "addresses"=>{"city_village"=>"Area 15", "address2"=>"Lilongwe City", "address1"=>"Other", "subregion"=>"Salima", "county_district"=>"Khombedza", "neighborhood_cell"=>"Bokola"}, "gender"=>"Female", "occupation"=>"Other", "age_estimate"=>"", "home_phone_number"=>"N/A", "birth_year"=>"1981", "cell_phone_number"=>"09999999", "race"=>"", "names"=>{"middle_name"=>"Grace", "given_name"=>"Mary", "family_name2"=>"Kachingwe", "family_name"=>"Banda"}, "patient"=>"", "birth_day"=>"10", "birth_month"=>"6"}, "REGION OF ORIGIN"=>"Central Region", "CURRENT REGION"=>"Central Region", "CURRENT AREA OF RESIDENCE"=>"Area 15"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (17.0ms)[0m   [0;1mINSERT INTO `person` (`birthdate_estimated`, `date_voided`, `gender`, `cause_of_death`, `date_changed`, `void_reason`, `voided_by`, `birthdate`, `creator`, `voided`, `dead`, `death_date`, `date_created`, `changed_by`, `uuid`) VALUES(0, NULL, 'F', NULL, '2012-12-12 09:02:59', NULL, NULL, NULL, 1, 0, 0, NULL, '2012-12-12 09:02:59', 1, 'b9c9f825-443a-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (127.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.2ms)[0m   [0mUPDATE `person` SET `date_changed` = '2012-12-12 09:02:59', `birthdate` = '1981-06-10' WHERE `person_id` = 55[0m
  [4;36;1mSQL (87.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (0.3ms)[0m   [0mINSERT INTO `person_name` (`person_id`, `date_voided`, `degree`, `prefix`, `void_reason`, `date_changed`, `preferred`, `middle_name`, `family_name_prefix`, `voided_by`, `given_name`, `family_name2`, `family_name_suffix`, `family_name`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(55, NULL, NULL, NULL, NULL, '2012-12-12 09:02:59', 0, 'Grace', NULL, NULL, 'Mary', 'Kachingwe', NULL, 'Banda', 1, 0, '2012-12-12 09:02:59', 1, 'b9ee85b6-443a-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (83.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (0.4ms)[0m   [0mINSERT INTO `person_address` (`person_id`, `city_village`, `date_voided`, `postal_code`, `address1`, `address2`, `longitude`, `region`, `void_reason`, `subregion`, `preferred`, `county_district`, `voided_by`, `latitude`, `country`, `creator`, `voided`, `state_province`, `neighborhood_cell`, `township_division`, `date_created`, `uuid`) VALUES(55, 'Area 15', NULL, NULL, 'Other', 'Lilongwe City', NULL, NULL, NULL, 'Salima', 0, 'Khombedza', NULL, NULL, NULL, 1, 0, NULL, 'Bokola', NULL, '2012-12-12 09:02:59', 'b9fc753f-443a-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (81.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (13.5ms)[0m   [0;1mINSERT INTO `person_attribute` (`person_id`, `value`, `date_voided`, `person_attribute_type_id`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(55, 'Other', NULL, 13, '2012-12-12 09:02:59', NULL, NULL, 1, 0, '2012-12-12 09:02:59', 1, 'ba0ae880-443a-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (73.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (4.8ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (0.7ms)[0m   [0mINSERT INTO `person_attribute` (`person_id`, `value`, `date_voided`, `person_attribute_type_id`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(55, '09999999', NULL, 12, '2012-12-12 09:02:59', NULL, NULL, 1, 0, '2012-12-12 09:02:59', 1, 'ba1d4f2a-443a-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (83.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`person_id`, `value`, `date_voided`, `person_attribute_type_id`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(55, 'N/A', NULL, 15, '2012-12-12 09:02:59', NULL, NULL, 1, 0, '2012-12-12 09:02:59', 1, 'ba2b7393-443a-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (93.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (25.5ms)[0m   [0mINSERT INTO `person_attribute` (`person_id`, `value`, `date_voided`, `person_attribute_type_id`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(55, 'N/A', NULL, 14, '2012-12-12 09:02:59', NULL, NULL, 1, 0, '2012-12-12 09:02:59', 1, 'ba3a311c-443a-11e2-9220-30f9edafb6df')[0m
  [4;36;1mSQL (75.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (0.5ms)[0m   [0;1mINSERT INTO `person_attribute` (`person_id`, `value`, `date_voided`, `person_attribute_type_id`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `uuid`) VALUES(55, 'Malawian', NULL, 3, '2012-12-12 09:02:59', NULL, NULL, 1, 0, '2012-12-12 09:02:59', 1, 'ba4a1e4f-443a-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (63.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.3ms)[0m   [0;1mINSERT INTO `patient` (`date_voided`, `tribe`, `date_changed`, `void_reason`, `voided_by`, `creator`, `voided`, `date_created`, `changed_by`, `patient_id`) VALUES(NULL, NULL, '2012-12-12 09:02:59', NULL, NULL, 1, 0, '2012-12-12 09:02:59', 1, 55)[0m
  [4;35;1mSQL (67.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (20.3ms)[0m   [0;1mINSERT INTO `patient_identifier` (`date_voided`, `identifier_type`, `location_id`, `void_reason`, `preferred`, `voided_by`, `identifier`, `creator`, `voided`, `patient_id`, `date_created`, `uuid`) VALUES(NULL, 3, 1, NULL, 0, NULL, 'HNUJ08', 1, 0, 55, '2012-12-12 09:03:00', 'ba6148a8-443a-11e2-9220-30f9edafb6df')[0m
  [4;35;1mSQL (69.5ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 1429ms (View: 3, DB: 998) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-12 11:03:00) [GET]
  Parameters: {"patient_id"=>"55"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 55) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 55 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 55 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 55 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 55 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 55630.lbl
Completed in 42ms (View: 0, DB: 5) | 200 OK [http://localhost/national_id_label?patient_id=55]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 11:03:06) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 64ms (View: 63, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mCorePersonName Load (0.7ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 54 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC[0m
  [4;35;1mCorePersonAttribute Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.person_id = 54 AND (`person_attribute`.`voided` = 0)) AND (person_attribute.voided = 0) [0m
  [4;35;1mCorePersonAttributeType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 54 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 54 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.7ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'L2MNPY') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.5ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 54 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 54 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.7ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'L2MNPY') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 54 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 54 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.6ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 54 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.6ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 54 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'L2MNPY') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 54 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 54 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 54 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 54 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.6ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 54 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 54 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 54 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 54 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 54 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 54 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 54 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 54 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 54 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 54 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 11:56:48) [GET]
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
Completed in 228ms (View: 1, DB: 3) | 200 OK [http://localhost/scan]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2012-12-12 11:57:35) [GET]

ActionController::RoutingError (No route matches "/scan/HNUJ08" with {:method=>:get}):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 11:57:45) [GET]
  Parameters: {"id"=>"HNUJ08"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'HNUJ08') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.5ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 55 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.7ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (3.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 55 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 116ms (View: 0, DB: 17) | 200 OK [http://localhost/scan?id=HNUJ08]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 11:59:51) [GET]
  Parameters: {"id"=>"HNUJ08"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'HNUJ08') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 55 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 55 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 59ms (View: 0, DB: 9) | 200 OK [http://localhost/scan?id=HNUJ08]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 12:00:19) [GET]
  Parameters: {"id"=>"HNUJ08"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'HNUJ08') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 55 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 55 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 100ms (View: 0, DB: 8) | 200 OK [http://localhost/scan?id=HNUJ08]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 12:00:27) [GET]
  Parameters: {"id"=>"HNUJ08"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'HNUJ08') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 55 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 55 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 97ms (View: 0, DB: 8) | 200 OK [http://localhost/scan?id=HNUJ08]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 12:01:51) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 24ms (View: 23, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 12:01:54) [GET]
  Parameters: {"id"=>"HNUJ08"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'HNUJ08') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 55 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 55 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 67ms (View: 0, DB: 9) | 200 OK [http://localhost/scan?id=HNUJ08]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 12:01:56) [GET]
  Parameters: {"id"=>"HNUJ08"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'HNUJ08') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 55 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 55 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 118ms (View: 1, DB: 9) | 200 OK [http://localhost/scan?id=HNUJ08]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 12:02:01) [GET]
  Parameters: {"id"=>"HNUJ08"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'HNUJ08') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 55 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 55 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 55 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 55 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 55 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 55 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 70ms (View: 0, DB: 12) | 200 OK [http://localhost/scan/HNUJ08]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 12:02:16) [GET]
  Parameters: {"id"=>"P100100000043"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000043') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.6ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 70ms (View: 0, DB: 11) | 200 OK [http://localhost/scan/P100100000043]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 12:02:25) [GET]
  Parameters: {"id"=>"P10010000004"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P10010000004') AND (patient_identifier.voided = 0) [0m
Completed in 296ms (View: 0, DB: 3) | 200 OK [http://localhost/scan/P10010000004]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 12:03:06) [GET]
  Parameters: {"id"=>"P100100000043"}
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000043') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 66ms (View: 0, DB: 8) | 200 OK [http://localhost/scan/P100100000043]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 14:07:34) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 25ms (View: 24, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:07:41) [GET]
  Parameters: {"id"=>"P100100000043"}

NoMethodError (undefined method `check_old_national_id' for #<CorePatientRegistrationController:0x7f37f1f663c0>):
  app/controllers/core_patient_registration_controller.rb:126:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.5ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:09:55) [GET]
  Parameters: {"id"=>"P100100000043"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000043') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

NoMethodError (undefined method `check_old_national_id' for #<ActiveRecord::Associations::HasOneAssociation:0x7f37f1fb1bb8>):
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:10:13) [GET]
  Parameters: {"id"=>"P100100000043"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000043') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (9.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 44) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.5ms)[0m   [0mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `identifier`, `creator`, `voided`, `date_voided`, `voided_by`, `identifier_type`, `void_reason`, `location_id`, `date_created`, `patient_id`) VALUES(0, 'e254e0fc-4454-11e2-9220-30f9edafb6df', 'P100100000043', 1, 0, NULL, NULL, 2, NULL, 1, '2012-12-12 12:10:13', 44)[0m
  [4;36;1mSQL (123.9ms)[0m   [0;1mCOMMIT[0m

NameError (uninitialized constant CoreOpenmrs::User):
  app/models/core_openmrs.rb:90:in `void'
  app/models/core_person.rb:535:in `check_old_national_id'
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (26.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:12:02) [GET]
  Parameters: {"id"=>"P100100000043"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000043') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

RuntimeError (--- 
- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "1"
    uuid: f45b53ff-4385-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 11:28:58
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "44"
    cause_of_death: 
    date_created: 2012-12-11 11:28:58
    birthdate: "1977-07-01"
  attributes_cache: {}

- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "1"
    uuid: f45b53ff-4385-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 11:28:58
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "44"
    cause_of_death: 
    date_created: 2012-12-11 11:28:58
    birthdate: "1977-07-01"
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:155:in `disambiguation'
  app/controllers/core_patient_registration_controller.rb:127:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:13:44) [GET]
  Parameters: {"id"=>"P100100000052"}
  [4;35;1mCorePerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000052') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.6ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.6ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.5ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.7ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 45) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.5ms)[0m   [0;1mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `identifier`, `creator`, `voided`, `date_voided`, `voided_by`, `identifier_type`, `void_reason`, `location_id`, `date_created`, `patient_id`) VALUES(0, '6026f65c-4455-11e2-9220-30f9edafb6df', 'P100100000052', 1, 0, NULL, NULL, 2, NULL, 1, '2012-12-12 12:13:45', 45)[0m
  [4;35;1mSQL (140.4ms)[0m   [0mCOMMIT[0m

NameError (uninitialized constant CoreOpenmrs::CoreUser):
  app/models/core_openmrs.rb:90:in `void'
  app/models/core_person.rb:535:in `check_old_national_id'
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (25.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:16:22) [GET]
  Parameters: {"id"=>"P100100000052", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000052') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

RuntimeError (--- 
- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "1"
    uuid: 9097e021-4391-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 12:52:05
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "45"
    cause_of_death: 
    date_created: 2012-12-11 12:52:04
    birthdate: "1973-07-01"
  attributes_cache: {}

- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "1"
    uuid: 9097e021-4391-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 12:52:05
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "45"
    cause_of_death: 
    date_created: 2012-12-11 12:52:04
    birthdate: "1973-07-01"
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:155:in `disambiguation'
  app/controllers/core_patient_registration_controller.rb:127:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:17:49) [GET]
  Parameters: {"id"=>"P100100000061", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000061') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

ArgumentError (wrong number of arguments (2 for 1)):
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:18:53) [GET]
  Parameters: {"id"=>"P100100000061", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000061') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.4ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 46) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.2ms)[0m   [0mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `identifier`, `creator`, `voided`, `date_voided`, `voided_by`, `identifier_type`, `void_reason`, `location_id`, `date_created`, `patient_id`) VALUES(0, '18515b49-4456-11e2-9220-30f9edafb6df', 'P100100000061', 1, 0, NULL, NULL, 2, NULL, 1, '2012-12-12 12:18:54', 46)[0m
  [4;36;1mSQL (145.3ms)[0m   [0;1mCOMMIT[0m

NameError (uninitialized constant CoreOpenmrs::CoreUser):
  app/models/core_openmrs.rb:90:in `void'
  app/models/core_person.rb:535:in `check_old_national_id'
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (27.8ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:19:40) [GET]
  Parameters: {"id"=>"P100100000061", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000061') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

RuntimeError (--- 
- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "1"
    uuid: 33f9b4c2-4398-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 13:39:36
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "46"
    cause_of_death: 
    date_created: 2012-12-11 13:39:36
    birthdate: "1973-07-01"
  attributes_cache: {}

- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "1"
    uuid: 33f9b4c2-4398-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 13:39:36
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "46"
    cause_of_death: 
    date_created: 2012-12-11 13:39:36
    birthdate: "1973-07-01"
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:155:in `disambiguation'
  app/controllers/core_patient_registration_controller.rb:127:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (64.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:19:55) [GET]
  Parameters: {"id"=>"P100100000070", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000070') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 47) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (3.8ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.3ms)[0m   [0;1mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `identifier`, `creator`, `voided`, `date_voided`, `voided_by`, `identifier_type`, `void_reason`, `location_id`, `date_created`, `patient_id`) VALUES(0, '3d12fed2-4456-11e2-9220-30f9edafb6df', 'P100100000070', 1, 0, NULL, NULL, 2, NULL, 1, '2012-12-12 12:19:55', 47)[0m
  [4;35;1mSQL (95.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatientIdentifier Update (0.2ms)[0m   [0mUPDATE `patient_identifier` SET `voided_by` = 1, `voided` = 1, `void_reason` = 'National ID version change' WHERE `patient_identifier_id` = 10[0m
  [4;36;1mSQL (52.0ms)[0m   [0;1mCOMMIT[0m

NoMethodError (undefined method `create_patient_from_dde' for #<CorePerson:0x7f37f1c29f90>):
  app/models/core_person.rb:537:in `check_old_national_id'
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (25.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:26:17) [GET]
  Parameters: {"id"=>"P100100000070", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000070') AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.6ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCoreGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mCoreGlobalProperty Load (18.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;36;1mCoreLocation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mCorePatientIdentifier Load (21.8ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (9.8ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (15.1ms)[0m   [0;1mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `identifier`, `creator`, `voided`, `date_voided`, `voided_by`, `identifier_type`, `void_reason`, `location_id`, `date_created`, `patient_id`) VALUES(0, '208857c8-4457-11e2-9220-30f9edafb6df', 'P100100000098', 1, 0, NULL, NULL, 3, NULL, 1, '2012-12-12 12:26:17', 47)[0m
  [4;35;1mSQL (127.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 345ms (View: 1, DB: 204) | 200 OK [http://localhost/scan/P100100000070?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:27:54) [GET]
  Parameters: {"id"=>"P100100000070", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.6ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000070') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 95ms (View: 0, DB: 11) | 200 OK [http://localhost/scan/P100100000070?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:27:59) [GET]
  Parameters: {"id"=>"P100100000070", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000070') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 89ms (View: 0, DB: 11) | 200 OK [http://localhost/scan/P100100000070?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:28:32) [GET]
  Parameters: {"id"=>"P100100000098", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000098') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 47) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.5ms)[0m   [0mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `identifier`, `creator`, `voided`, `date_voided`, `voided_by`, `identifier_type`, `void_reason`, `location_id`, `date_created`, `patient_id`) VALUES(0, '7146c702-4457-11e2-9220-30f9edafb6df', 'P100100000098', 1, 0, NULL, NULL, 2, NULL, 1, '2012-12-12 12:28:32', 47)[0m
  [4;36;1mSQL (125.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (0.3ms)[0m   [0;1mUPDATE `patient_identifier` SET `voided_by` = 1, `voided` = 1, `void_reason` = 'National ID version change' WHERE `patient_identifier_id` = 22[0m
  [4;35;1mSQL (63.6ms)[0m   [0mCOMMIT[0m

NoMethodError (undefined method `create_patient_from_dde' for #<CorePerson:0x7f37f1b4f868>):
  app/models/core_person.rb:537:in `check_old_national_id'
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (25.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:29:12) [GET]
  Parameters: {"id"=>"P100100000098", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000098') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.2ms)[0m   [0mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `identifier`, `creator`, `voided`, `date_voided`, `voided_by`, `identifier_type`, `void_reason`, `location_id`, `date_created`, `patient_id`) VALUES(0, '89304088-4457-11e2-9220-30f9edafb6df', 'P100100000098', 1, 0, NULL, NULL, 3, NULL, 1, '2012-12-12 12:29:12', 47)[0m
  [4;36;1mSQL (93.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.7ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 47) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.4ms)[0m   [0;1mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `identifier`, `creator`, `voided`, `date_voided`, `voided_by`, `identifier_type`, `void_reason`, `location_id`, `date_created`, `patient_id`) VALUES(0, '89616992-4457-11e2-9220-30f9edafb6df', 'P100100000098', 1, 0, NULL, NULL, 2, NULL, 1, '2012-12-12 12:29:13', 47)[0m
  [4;35;1mSQL (94.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatientIdentifier Update (0.3ms)[0m   [0mUPDATE `patient_identifier` SET `voided_by` = 1, `voided` = 1, `void_reason` = 'National ID version change' WHERE `patient_identifier_id` = 24[0m
  [4;36;1mSQL (62.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.3ms)[0m   [0;1mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `identifier`, `creator`, `voided`, `date_voided`, `voided_by`, `identifier_type`, `void_reason`, `location_id`, `date_created`, `patient_id`) VALUES(0, '89a6b2b1-4457-11e2-9220-30f9edafb6df', 'MAJX4A', 1, 0, NULL, NULL, 3, NULL, 1, '2012-12-12 12:29:13', 47)[0m
  [4;35;1mSQL (53.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 943ms (View: 1, DB: 320) | 200 OK [http://localhost/scan/P100100000098?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:29:44) [GET]
  Parameters: {"id"=>"P100100000098", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000098') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

RuntimeError (--- 
- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "1"
    uuid: 489f08a2-439a-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 13:54:29
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "47"
    cause_of_death: 
    date_created: 2012-12-11 13:54:29
    birthdate: "1975-07-01"
  attributes_cache: {}

- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "1"
    uuid: 489f08a2-439a-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 13:54:29
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "47"
    cause_of_death: 
    date_created: 2012-12-11 13:54:29
    birthdate: "1975-07-01"
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:155:in `disambiguation'
  app/controllers/core_patient_registration_controller.rb:127:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:31:01) [GET]
  Parameters: {"id"=>"P100100000098", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000098') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

RuntimeError (--- 
- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "1"
    uuid: 489f08a2-439a-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 13:54:29
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "47"
    cause_of_death: 
    date_created: 2012-12-11 13:54:29
    birthdate: "1975-07-01"
  attributes_cache: {}

- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "1"
    uuid: 489f08a2-439a-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 13:54:29
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "47"
    cause_of_death: 
    date_created: 2012-12-11 13:54:29
    birthdate: "1975-07-01"
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:155:in `disambiguation'
  app/controllers/core_patient_registration_controller.rb:127:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.8ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:31:39) [GET]
  Parameters: {"id"=>"P100100000098", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000098') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 100ms (View: 1, DB: 8) | 200 OK [http://localhost/scan/P100100000098?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:34:14) [GET]
  Parameters: {"id"=>"P100100000098", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000098') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 47 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 47 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 47 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 47 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 47 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 47 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 63ms (View: 0, DB: 7) | 200 OK [http://localhost/scan/P100100000098?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 14:34:59) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000089') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

RuntimeError (--- 
- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "1"
    uuid: abb1790b-437f-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 10:43:59
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "41"
    cause_of_death: 
    date_created: 2012-12-11 10:43:59
    birthdate: "1977-07-01"
  attributes_cache: {}

- !ruby/object:CorePerson 
  attributes: 
    death_date: 
    birthdate_estimated: "0"
    uuid: 88cbcc40-439e-11e2-aa70-30f9edafb6df
    creator: "1"
    date_changed: 2012-12-11 14:24:55
    voided: "0"
    date_voided: 
    gender: F
    dead: "0"
    voided_by: 
    void_reason: 
    changed_by: "1"
    person_id: "48"
    cause_of_death: 
    date_created: 2012-12-11 14:24:55
    birthdate: "1978-06-12"
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:155:in `disambiguation'
  app/controllers/core_patient_registration_controller.rb:127:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.5ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.6ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 44) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (17.7ms)[0m   [0;1mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000043', '2012-12-12 13:26:06', 2, 0, 0, '7bffaea8-445f-11e2-9220-30f9edafb6df', NULL, 1, 44, NULL)[0m
  [4;35;1mSQL (77.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatientIdentifier Update (0.6ms)[0m   [0mUPDATE `patient_identifier` SET `voided_by` = 1, `voided` = 1, `void_reason` = 'National ID confilict resolution' WHERE `patient_identifier_id` = 7[0m
  [4;36;1mSQL (50.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.2ms)[0m   [0;1mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'M41G5V', '2012-12-12 13:26:06', 3, 0, 0, '7c179ef4-445f-11e2-9220-30f9edafb6df', NULL, 1, 44, NULL)[0m
  [4;35;1mSQL (50.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 15:31:39) [GET]
  Parameters: {"id"=>"P100100000043", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000043') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 112ms (View: 1, DB: 10) | 200 OK [http://localhost/scan/P100100000043?user=1]
  [4;36;1mCorePerson Load (0.5ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 42) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.6ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.5ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 42) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.8ms)[0m   [0mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000025', '2012-12-12 13:33:45', 2, 0, 0, '8d98eb20-4460-11e2-9220-30f9edafb6df', NULL, 1, 42, NULL)[0m
  [4;36;1mSQL (68.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (0.3ms)[0m   [0;1mUPDATE `patient_identifier` SET `voided_by` = 1, `voided` = 1, `void_reason` = 'National ID confilict resolution' WHERE `patient_identifier_id` = 5[0m
  [4;35;1mSQL (84.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.4ms)[0m   [0mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'HPWJGH', '2012-12-12 13:33:45', 3, 0, 0, '8db22853-4460-11e2-9220-30f9edafb6df', NULL, 1, 42, NULL)[0m
  [4;36;1mSQL (48.7ms)[0m   [0;1mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 15:34:07) [GET]
  Parameters: {"id"=>"P100100000025", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = 'P100100000025') AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 42 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (1.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 106ms (View: 1, DB: 13) | 200 OK [http://localhost/scan/P100100000025?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 15:34:58) [GET]
  Parameters: {"id"=>"P100100000025", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000025')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 42 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 64ms (View: 0, DB: 9) | 200 OK [http://localhost/scan/P100100000025?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 15:35:01) [GET]
  Parameters: {"id"=>"P100100000025", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000025')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 42 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 42 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 42 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 42 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 42 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 42 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 111ms (View: 0, DB: 12) | 200 OK [http://localhost/scan/P100100000025?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 15:35:38) [GET]
  Parameters: {"id"=>"P100100000025", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000025')) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.5ms)[0m   [0mINSERT INTO `person` (`death_date`, `birthdate_estimated`, `uuid`, `creator`, `date_changed`, `voided`, `date_voided`, `gender`, `dead`, `voided_by`, `void_reason`, `changed_by`, `cause_of_death`, `date_created`, `birthdate`) VALUES(NULL, 0, 'd13741d6-4460-11e2-9220-30f9edafb6df', 1, '2012-12-12 13:35:39', 0, NULL, 'F', 0, NULL, NULL, 1, NULL, '2012-12-12 13:35:39', NULL)[0m
  [4;36;1mSQL (205.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.2ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1977-07-01', `date_changed` = '2012-12-12 13:35:39' WHERE `person_id` = 56[0m
  [4;35;1mSQL (64.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (19.2ms)[0m   [0;1mINSERT INTO `person_name` (`preferred`, `family_name_suffix`, `uuid`, `family_name`, `degree`, `creator`, `voided`, `date_voided`, `date_changed`, `prefix`, `given_name`, `voided_by`, `family_name_prefix`, `middle_name`, `void_reason`, `family_name2`, `changed_by`, `person_id`, `date_created`) VALUES(0, NULL, 'd1617f81-4460-11e2-9220-30f9edafb6df', 'Banda', NULL, 1, 0, NULL, '2012-12-12 13:35:39', NULL, 'Jane', NULL, NULL, NULL, NULL, NULL, 1, 56, '2012-12-12 13:35:39')[0m
  [4;35;1mSQL (99.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (0.6ms)[0m   [0;1mINSERT INTO `person_address` (`preferred`, `address1`, `address2`, `postal_code`, `region`, `township_division`, `uuid`, `creator`, `voided`, `date_voided`, `country`, `latitude`, `voided_by`, `county_district`, `longitude`, `subregion`, `city_village`, `state_province`, `void_reason`, `person_id`, `date_created`, `neighborhood_cell`) VALUES(0, '', '', NULL, NULL, NULL, 'd17453ca-4460-11e2-9220-30f9edafb6df', 1, 0, NULL, NULL, NULL, NULL, '', NULL, '', '', NULL, NULL, 56, '2012-12-12 13:35:39', '')[0m
  [4;35;1mSQL (106.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 56 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (0.6ms)[0m   [0mINSERT INTO `patient` (`tribe`, `creator`, `date_changed`, `voided`, `date_voided`, `voided_by`, `void_reason`, `changed_by`, `date_created`, `patient_id`) VALUES(NULL, 1, '2012-12-12 13:35:39', 0, NULL, NULL, NULL, 1, '2012-12-12 13:35:39', 56)[0m
  [4;36;1mSQL (115.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.3ms)[0m   [0mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `identifier`, `creator`, `voided`, `date_voided`, `voided_by`, `identifier_type`, `void_reason`, `location_id`, `date_created`, `patient_id`) VALUES(0, 'd19e4d02-4460-11e2-9220-30f9edafb6df', 'HPWJGH', 1, 0, NULL, NULL, 3, NULL, 1, '2012-12-12 13:35:39', 56)[0m
  [4;36;1mSQL (89.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 56 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 56 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 56 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 56 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 56 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 56 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 56 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 56 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 56 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 56 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 56 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 56 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 56 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 56 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 56 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 56 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 56 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 1016ms (View: 0, DB: 712) | 200 OK [http://localhost/scan/P100100000025?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 15:36:07) [GET]
  Parameters: {"id"=>"P100100000025", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000025')) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (0.2ms)[0m   [0;1mINSERT INTO `person` (`death_date`, `birthdate_estimated`, `uuid`, `creator`, `date_changed`, `voided`, `date_voided`, `gender`, `dead`, `voided_by`, `void_reason`, `changed_by`, `cause_of_death`, `date_created`, `birthdate`) VALUES(NULL, 0, 'e2252779-4460-11e2-9220-30f9edafb6df', 1, '2012-12-12 13:36:07', 0, NULL, 'F', 0, NULL, NULL, 1, NULL, '2012-12-12 13:36:07', NULL)[0m
  [4;35;1mSQL (109.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.4ms)[0m   [0mUPDATE `person` SET `birthdate` = '1977-07-01', `date_changed` = '2012-12-12 13:36:07' WHERE `person_id` = 57[0m
  [4;36;1mSQL (51.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (0.2ms)[0m   [0mINSERT INTO `person_name` (`preferred`, `family_name_suffix`, `uuid`, `family_name`, `degree`, `creator`, `voided`, `date_voided`, `date_changed`, `prefix`, `given_name`, `voided_by`, `family_name_prefix`, `middle_name`, `void_reason`, `family_name2`, `changed_by`, `person_id`, `date_created`) VALUES(0, NULL, 'e23f4184-4460-11e2-9220-30f9edafb6df', 'Banda', NULL, 1, 0, NULL, '2012-12-12 13:36:07', NULL, 'Jane', NULL, NULL, NULL, NULL, NULL, 1, 57, '2012-12-12 13:36:07')[0m
  [4;36;1mSQL (83.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (0.2ms)[0m   [0mINSERT INTO `person_address` (`preferred`, `address1`, `address2`, `postal_code`, `region`, `township_division`, `uuid`, `creator`, `voided`, `date_voided`, `country`, `latitude`, `voided_by`, `county_district`, `longitude`, `subregion`, `city_village`, `state_province`, `void_reason`, `person_id`, `date_created`, `neighborhood_cell`) VALUES(0, '', '', NULL, NULL, NULL, 'e24ce455-4460-11e2-9220-30f9edafb6df', 1, 0, NULL, NULL, NULL, NULL, '', NULL, '', '', NULL, NULL, 57, '2012-12-12 13:36:07', '')[0m
  [4;36;1mSQL (72.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 57 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (15.1ms)[0m   [0;1mINSERT INTO `patient` (`tribe`, `creator`, `date_changed`, `voided`, `date_voided`, `voided_by`, `void_reason`, `changed_by`, `date_created`, `patient_id`) VALUES(NULL, 1, '2012-12-12 13:36:07', 0, NULL, NULL, NULL, 1, '2012-12-12 13:36:07', 57)[0m
  [4;35;1mSQL (69.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.3ms)[0m   [0;1mINSERT INTO `patient_identifier` (`preferred`, `uuid`, `identifier`, `creator`, `voided`, `date_voided`, `voided_by`, `identifier_type`, `void_reason`, `location_id`, `date_created`, `patient_id`) VALUES(0, 'e26791b8-4460-11e2-9220-30f9edafb6df', 'HPWJGH', 1, 0, NULL, NULL, 3, NULL, 1, '2012-12-12 13:36:08', 57)[0m
  [4;35;1mSQL (77.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 57 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 57 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 57 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 57 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 57 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 57 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 57 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 57 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 57 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 57 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 57 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 57 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 57 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 57 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 57 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 57 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 57 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 816ms (View: 0, DB: 493) | 200 OK [http://localhost/scan/P100100000025?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 15:39:38) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 25ms (View: 24, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-12 15:39:51) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-12 15:40:05) [POST]
  Parameters: {"person"=>{"names"=>{"given_name"=>"John", "family_name"=>"Banda"}, "age_estimate"=>"39", "birth_day"=>"", "birth_year"=>"Unknown", "patient"=>"", "birth_month"=>"", "gender"=>"Male"}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (13.1ms)[0m   [0mINSERT INTO `person` (`voided`, `voided_by`, `date_created`, `birthdate_estimated`, `changed_by`, `uuid`, `gender`, `birthdate`, `death_date`, `date_changed`, `void_reason`, `dead`, `creator`, `cause_of_death`, `date_voided`) VALUES(0, NULL, '2012-12-12 13:40:06', 0, 1, '703cf775-4461-11e2-9220-30f9edafb6df', 'M', NULL, NULL, '2012-12-12 13:40:05', NULL, 0, 1, NULL, NULL)[0m
  [4;36;1mSQL (98.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.8ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1973-07-01', `date_changed` = '2012-12-12 13:40:06', `birthdate_estimated` = 1 WHERE `person_id` = 58[0m
  [4;35;1mSQL (107.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (0.5ms)[0m   [0;1mINSERT INTO `person_name` (`family_name_suffix`, `voided`, `voided_by`, `date_created`, `given_name`, `changed_by`, `degree`, `uuid`, `preferred`, `person_id`, `prefix`, `void_reason`, `date_changed`, `family_name_prefix`, `family_name`, `family_name2`, `creator`, `middle_name`, `date_voided`) VALUES(NULL, 0, NULL, '2012-12-12 13:40:06', 'John', 1, NULL, '705ff8a7-4461-11e2-9220-30f9edafb6df', 0, 58, NULL, NULL, '2012-12-12 13:40:06', NULL, 'Banda', NULL, 1, NULL, NULL)[0m
  [4;35;1mSQL (72.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.3ms)[0m   [0;1mINSERT INTO `patient` (`voided`, `voided_by`, `date_created`, `changed_by`, `date_changed`, `void_reason`, `creator`, `patient_id`, `date_voided`, `tribe`) VALUES(0, NULL, '2012-12-12 13:40:06', 1, '2012-12-12 13:40:06', NULL, 1, 58, NULL, NULL)[0m
  [4;35;1mSQL (103.9ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 504ms (View: 6, DB: 403) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-12 15:40:06) [GET]
  Parameters: {"patient_id"=>"58"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 58) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.0ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (12.9ms)[0m   [0mINSERT INTO `patient_identifier` (`voided`, `voided_by`, `date_created`, `identifier`, `uuid`, `preferred`, `void_reason`, `patient_id`, `creator`, `location_id`, `identifier_type`, `date_voided`) VALUES(0, NULL, '2012-12-12 13:40:06', 'P100100000098', '709ce452-4461-11e2-9220-30f9edafb6df', 0, NULL, 58, 1, 1, 3, NULL)[0m
  [4;36;1mSQL (72.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 583960.lbl
Completed in 141ms (View: 1, DB: 93) | 200 OK [http://localhost/national_id_label?patient_id=58]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 15:40:12) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-12 15:40:38) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 50ms (View: 48, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-12 15:40:50) [POST]
  Parameters: {"person"=>{"names"=>{"given_name"=>"James", "family_name"=>"Banda"}, "age_estimate"=>"31", "birth_day"=>"", "birth_year"=>"Unknown", "patient"=>"", "birth_month"=>"", "gender"=>"Male"}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (0.3ms)[0m   [0;1mINSERT INTO `person` (`voided`, `voided_by`, `date_created`, `birthdate_estimated`, `changed_by`, `uuid`, `gender`, `birthdate`, `death_date`, `date_changed`, `void_reason`, `dead`, `creator`, `cause_of_death`, `date_voided`) VALUES(0, NULL, '2012-12-12 13:40:50', 0, 1, '8ad3be3a-4461-11e2-9220-30f9edafb6df', 'M', NULL, NULL, '2012-12-12 13:40:50', NULL, 0, 1, NULL, NULL)[0m
  [4;35;1mSQL (95.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.3ms)[0m   [0mUPDATE `person` SET `birthdate` = '1981-07-01', `date_changed` = '2012-12-12 13:40:50', `birthdate_estimated` = 1 WHERE `person_id` = 59[0m
  [4;36;1mSQL (99.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (0.3ms)[0m   [0mINSERT INTO `person_name` (`family_name_suffix`, `voided`, `voided_by`, `date_created`, `given_name`, `changed_by`, `degree`, `uuid`, `preferred`, `person_id`, `prefix`, `void_reason`, `date_changed`, `family_name_prefix`, `family_name`, `family_name2`, `creator`, `middle_name`, `date_voided`) VALUES(NULL, 0, NULL, '2012-12-12 13:40:50', 'James', 1, NULL, '8af2ac09-4461-11e2-9220-30f9edafb6df', 0, 59, NULL, NULL, '2012-12-12 13:40:50', NULL, 'Banda', NULL, 1, NULL, NULL)[0m
  [4;36;1mSQL (106.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 59 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (0.2ms)[0m   [0mINSERT INTO `patient` (`voided`, `voided_by`, `date_created`, `changed_by`, `date_changed`, `void_reason`, `creator`, `patient_id`, `date_voided`, `tribe`) VALUES(0, NULL, '2012-12-12 13:40:50', 1, '2012-12-12 13:40:50', NULL, 1, 59, NULL, NULL)[0m
  [4;36;1mSQL (89.7ms)[0m   [0;1mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 439ms (View: 5, DB: 396) | 200 OK [http://localhost/core_patient_registration/create]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-12 15:40:51) [GET]
  Parameters: {"patient_id"=>"59"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 59) AND (person.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 59 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 59 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCoreGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mCoreGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;36;1mCoreLocation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.2ms)[0m   [0;1mINSERT INTO `patient_identifier` (`voided`, `voided_by`, `date_created`, `identifier`, `uuid`, `preferred`, `void_reason`, `patient_id`, `creator`, `location_id`, `identifier_type`, `date_voided`) VALUES(0, NULL, '2012-12-12 13:40:51', 'P100100000105', '8b38d01c-4461-11e2-9220-30f9edafb6df', 0, NULL, 59, 1, 1, 3, NULL)[0m
  [4;35;1mSQL (102.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 59 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 59 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 59 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 59 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 59 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 59 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 594025.lbl
Completed in 188ms (View: 0, DB: 111) | 200 OK [http://localhost/national_id_label?patient_id=59]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 15:40:57) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 9ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 59) AND (person.voided = 0) [0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatient Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 59 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 59) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.6ms)[0m   [0;1mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000105', '2012-12-12 13:42:20', 2, 0, 0, 'c0302441-4461-11e2-9220-30f9edafb6df', NULL, 1, 59, NULL)[0m
  [4;35;1mSQL (116.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatientIdentifier Update (0.5ms)[0m   [0mUPDATE `patient_identifier` SET `voided_by` = 1, `voided` = 1, `void_reason` = 'National ID confilict resolution' WHERE `patient_identifier_id` = 34[0m
  [4;36;1mSQL (72.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 59 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCoreGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mCoreGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;36;1mCoreLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (17.0ms)[0m   [0;1mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000114', '2012-12-12 13:42:20', 3, 0, 0, 'c051c732-4461-11e2-9220-30f9edafb6df', NULL, 1, 59, NULL)[0m
  [4;35;1mSQL (71.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.5ms)[0m   [0mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000114', '2012-12-12 13:42:20', 3, 0, 0, 'c0608b00-4461-11e2-9220-30f9edafb6df', NULL, 1, 59, NULL)[0m
  [4;36;1mSQL (92.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePerson Load (0.5ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 58) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 15:46:03) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000105"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000105')) [0m
Completed in 33ms (View: 1, DB: 5) | 200 OK [http://localhost/scan/P100100000105?user=1]
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCoreGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.3ms)[0m   [0;1mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000123', '2012-12-12 13:46:27', 3, 0, 0, '53690d2e-4462-11e2-9220-30f9edafb6df', NULL, 1, 58, NULL)[0m
  [4;35;1mSQL (92.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 15:47:21) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 25ms (View: 23, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 15:49:00) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000114"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.6ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000114')) [0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 59 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 59 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

RuntimeError (--- 
- !ruby/object:CorePerson 
  attributes: 
    date_voided: 
    uuid: 8ad3be3a-4461-11e2-9220-30f9edafb6df
    birthdate: "1981-07-01"
    changed_by: "1"
    person_id: "59"
    date_created: 2012-12-12 13:40:50
    date_changed: 2012-12-12 13:40:50
    voided_by: 
    voided: "0"
    void_reason: 
    death_date: 
    birthdate_estimated: "1"
    creator: "1"
    gender: M
    dead: "0"
    cause_of_death: 
  attributes_cache: {}

- !ruby/object:CorePerson 
  attributes: 
    date_voided: 
    uuid: 703cf775-4461-11e2-9220-30f9edafb6df
    birthdate: "1973-07-01"
    changed_by: "1"
    person_id: "58"
    date_created: 2012-12-12 13:40:06
    date_changed: 2012-12-12 13:40:06
    voided_by: 
    voided: "0"
    void_reason: 
    death_date: 
    birthdate_estimated: "1"
    creator: "1"
    gender: M
    dead: "0"
    cause_of_death: 
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:155:in `disambiguation'
  app/controllers/core_patient_registration_controller.rb:127:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.3ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 58) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.3ms)[0m   [0mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000114', '2012-12-12 13:49:23', 2, 0, 0, 'bc6f78e1-4462-11e2-9220-30f9edafb6df', NULL, 1, 58, NULL)[0m
  [4;36;1mSQL (73.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (0.5ms)[0m   [0;1mUPDATE `patient_identifier` SET `voided_by` = 1, `voided` = 1, `void_reason` = 'National ID confilict resolution' WHERE `patient_identifier_id` = 38[0m
  [4;35;1mSQL (72.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.5ms)[0m   [0mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000123', '2012-12-12 13:49:23', 3, 0, 0, 'bc880036-4462-11e2-9220-30f9edafb6df', NULL, 1, 58, NULL)[0m
  [4;36;1mSQL (68.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (10.1ms)[0m   [0;1mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000123', '2012-12-12 13:49:23', 3, 0, 0, 'bc937f85-4462-11e2-9220-30f9edafb6df', NULL, 1, 58, NULL)[0m
  [4;35;1mSQL (62.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 58) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (12.3ms)[0m   [0mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000123', '2012-12-12 13:51:40', 2, 0, 0, '0e3e1622-4463-11e2-9220-30f9edafb6df', NULL, 1, 58, NULL)[0m
  [4;36;1mSQL (122.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (0.3ms)[0m   [0;1mUPDATE `patient_identifier` SET `voided_by` = 1, `voided` = 1, `void_reason` = 'National ID confilict resolution' WHERE `patient_identifier_id` = 40[0m
  [4;35;1mSQL (75.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (21.1ms)[0m   [0mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000123', '2012-12-12 13:51:40', 3, 0, 0, '0e601bbd-4463-11e2-9220-30f9edafb6df', NULL, 1, 58, NULL)[0m
  [4;36;1mSQL (68.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 58) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.6ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.7ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.6ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 58) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (0.3ms)[0m   [0;1mUPDATE `patient_identifier` SET `voided_by` = 1, `voided` = 1, `void_reason` = 'National ID confilict resolution' WHERE `patient_identifier_id` = 43[0m
  [4;35;1mSQL (50.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (20.7ms)[0m   [0mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'HHAF05', '2012-12-12 13:53:15', 3, 0, 0, '46a1dcd5-4463-11e2-9220-30f9edafb6df', NULL, 1, 58, NULL)[0m
  [4;36;1mSQL (105.1ms)[0m   [0;1mCOMMIT[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 15:53:40) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.4ms)[0m   [0mINSERT INTO `person` (`date_voided`, `uuid`, `birthdate`, `changed_by`, `date_created`, `date_changed`, `voided_by`, `voided`, `void_reason`, `death_date`, `birthdate_estimated`, `creator`, `gender`, `dead`, `cause_of_death`) VALUES(NULL, '56295e85-4463-11e2-9220-30f9edafb6df', NULL, 1, '2012-12-12 13:53:41', '2012-12-12 13:53:41', NULL, 0, NULL, NULL, 0, 1, 'M', 0, NULL)[0m
  [4;36;1mSQL (119.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1973-07-01', `date_changed` = '2012-12-12 13:53:41' WHERE `person_id` = 60[0m
  [4;35;1mSQL (98.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (0.3ms)[0m   [0;1mINSERT INTO `person_name` (`date_voided`, `uuid`, `changed_by`, `person_id`, `date_created`, `voided_by`, `date_changed`, `voided`, `void_reason`, `family_name`, `given_name`, `family_name_suffix`, `prefix`, `middle_name`, `family_name2`, `family_name_prefix`, `degree`, `creator`, `preferred`) VALUES(NULL, '564bce27-4463-11e2-9220-30f9edafb6df', 1, 60, '2012-12-12 13:53:41', NULL, '2012-12-12 13:53:41', 0, NULL, 'Banda', 'John', NULL, NULL, NULL, NULL, NULL, NULL, 1, 0)[0m
  [4;35;1mSQL (106.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (0.3ms)[0m   [0;1mINSERT INTO `person_address` (`date_voided`, `uuid`, `city_village`, `person_id`, `address1`, `address2`, `longitude`, `date_created`, `voided_by`, `voided`, `void_reason`, `neighborhood_cell`, `subregion`, `postal_code`, `latitude`, `state_province`, `county_district`, `country`, `creator`, `region`, `township_division`, `preferred`) VALUES(NULL, '565ce0a6-4463-11e2-9220-30f9edafb6df', '', 60, '', '', NULL, '2012-12-12 13:53:41', NULL, 0, NULL, '', '', NULL, NULL, NULL, '', NULL, 1, NULL, NULL, 0)[0m
  [4;35;1mSQL (162.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 60 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (0.2ms)[0m   [0mINSERT INTO `patient` (`date_voided`, `changed_by`, `date_created`, `date_changed`, `voided_by`, `voided`, `void_reason`, `tribe`, `creator`, `patient_id`) VALUES(NULL, 1, '2012-12-12 13:53:41', '2012-12-12 13:53:41', NULL, 0, NULL, NULL, 1, 60)[0m
  [4;36;1mSQL (106.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.3ms)[0m   [0mINSERT INTO `patient_identifier` (`date_voided`, `uuid`, `date_created`, `voided_by`, `voided`, `void_reason`, `location_id`, `identifier_type`, `patient_id`, `creator`, `identifier`, `preferred`) VALUES(NULL, '56898f8d-4463-11e2-9220-30f9edafb6df', '2012-12-12 13:53:41', NULL, 0, NULL, 1, 3, 60, 1, 'HHAF05', 0)[0m
  [4;36;1mSQL (102.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 60 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 60 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 60 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 60 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 60 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (5.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 60 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.4ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 60 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 60 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 60 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 60 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 60 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 60 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.4ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 60 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 60 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 60 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 60 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 60 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 1046ms (View: 0, DB: 713) | 200 OK [http://localhost/scan/P100100000123?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 15:53:56) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 28ms (View: 27, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 58) AND (person.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.6ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.5ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 58) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (0.5ms)[0m   [0;1mUPDATE `patient_identifier` SET `voided_by` = 1, `voided` = 1, `void_reason` = 'National ID confilict resolution' WHERE `patient_identifier_id` = 44[0m
  [4;35;1mSQL (90.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.3ms)[0m   [0mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'HHAF05', '2012-12-12 13:57:40', 3, 0, 0, 'e4bd30a1-4463-11e2-9220-30f9edafb6df', NULL, 1, 58, NULL)[0m
  [4;36;1mSQL (171.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 58) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCoreGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mCoreGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;36;1mCoreLocation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mCorePatientIdentifier Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.5ms)[0m   [0;1mINSERT INTO `patient_identifier` (`location_id`, `date_voided`, `identifier`, `date_created`, `identifier_type`, `preferred`, `voided`, `uuid`, `void_reason`, `creator`, `patient_id`, `voided_by`) VALUES(1, NULL, 'P100100000123', '2012-12-12 14:05:25', 3, 0, 0, 'fa191567-4464-11e2-9220-30f9edafb6df', NULL, 1, 58, NULL)[0m
  [4;35;1mSQL (125.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:05:58) [GET]
  Parameters: {"id"=>"P100100000123", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.5ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (1.8ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (1.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 300ms (View: 0, DB: 15) | 200 OK [http://localhost/scan/P100100000123?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:06:04) [GET]
  Parameters: {"id"=>"P100100000123", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 294ms (View: 0, DB: 7) | 200 OK [http://localhost/scan/P100100000123?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 16:06:22) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 25ms (View: 24, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:06:27) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 287ms (View: 0, DB: 10) | 200 OK [http://localhost/scan/P100100000123?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:06:30) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 302ms (View: 0, DB: 9) | 200 OK [http://localhost/scan/P100100000123?user=1]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:06:35) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (7.7ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 358ms (View: 0, DB: 17) | 200 OK [http://localhost/scan/P100100000123?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:07:48) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

ArgumentError (wrong number of arguments (1 for 2)):
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.3ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:08:12) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 266ms (View: 0, DB: 7) | 200 OK [http://localhost/scan/P100100000123?user=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:08:51) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (5.7ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

RuntimeError (--- 13
):
  app/models/core_person.rb:488:in `check_old_national_id'
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:09:09) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

RuntimeError (--- "true"
):
  app/models/core_person.rb:488:in `check_old_national_id'
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (61.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:10:36) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

RuntimeError (--- 
person: 
  created_at: "2012-12-12T13:53:14Z"
  version_number: "0"
  remote_version_number: 
  birthdate_estimated: true
  gender: M
  given_name: John
  birthdate: "1973-07-01"
  data: 
    names: 
      given_name: John
      family_name2: ""
      middle_name: ""
      family_name: Banda
    attributes: 
      occupation: ""
      office_phone_number: ""
      citizenship: ""
      cell_phone_number: ""
      home_phone_number: ""
      race: ""
    birthdate_estimated: "1"
    gender: M
    addresses: 
      county_district: ""
      neighborhood_cell: ""
      subregion: ""
      city_village: ""
      address2: ""
      address1: ""
    patient: 
      identifiers: 
        old_identification_number: P100100000123
    birthdate: "1973-07-01"
    birth_day: ""
    birth_month: "7"
    birth_year: "1973"
  family_name: Banda
  creator_id: "1"
  value: HHAF05
  creator_site_id: "1"
  id: 11
  updated_at: "2012-12-12T13:53:14Z"
):
  app/models/core_person.rb:497:in `check_old_national_id'
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (65.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 16:19:20) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 22ms (View: 21, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:19:52) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 58) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 279ms (View: 0, DB: 8) | 200 OK [http://localhost/scan/P100100000123?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:21:50) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

RuntimeError (--- 
person: 
  value: HHAF05
  birthdate_estimated: true
  updated_at: "2012-12-12T13:53:14Z"
  creator_id: "1"
  family_name: Banda
  creator_site_id: "1"
  id: 11
  gender: M
  data: 
    birthdate_estimated: "1"
    birth_day: ""
    names: 
      family_name2: ""
      family_name: Banda
      middle_name: ""
      given_name: John
    birth_year: "1973"
    patient: 
      identifiers: 
        old_identification_number: P100100000123
    attributes: 
      home_phone_number: ""
      race: ""
      office_phone_number: ""
      citizenship: ""
      occupation: ""
      cell_phone_number: ""
    addresses: 
      neighborhood_cell: ""
      county_district: ""
      subregion: ""
      address2: ""
      address1: ""
      city_village: ""
    gender: M
    birthdate: "1973-07-01"
    birth_month: "7"
  birthdate: "1973-07-01"
  created_at: "2012-12-12T13:53:14Z"
  remote_version_number: 
  version_number: "0"
  given_name: John
):
  app/models/core_person.rb:499:in `check_old_national_id'
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.3ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:22:22) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

RuntimeError (--- HHAF05
):
  app/models/core_person.rb:499:in `check_old_national_id'
  app/controllers/core_patient_registration_controller.rb:137:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:22:47) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 58) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.3ms)[0m   [0mINSERT INTO `patient_identifier` (`creator`, `voided`, `void_reason`, `date_voided`, `uuid`, `identifier`, `preferred`, `patient_id`, `identifier_type`, `voided_by`, `location_id`, `date_created`) VALUES(1, 0, NULL, NULL, '66f1f9a2-4467-11e2-9220-30f9edafb6df', 'P100100000123', 0, 58, 2, NULL, 1, '2012-12-12 14:22:47')[0m
  [4;36;1mSQL (101.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (0.3ms)[0m   [0;1mUPDATE `patient_identifier` SET `voided` = 1, `void_reason` = 'National ID version change', `voided_by` = 1 WHERE `patient_identifier_id` = 47[0m
  [4;35;1mSQL (52.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.3ms)[0m   [0mINSERT INTO `patient_identifier` (`creator`, `voided`, `void_reason`, `date_voided`, `uuid`, `identifier`, `preferred`, `patient_id`, `identifier_type`, `voided_by`, `location_id`, `date_created`) VALUES(1, 0, NULL, NULL, '670ae72a-4467-11e2-9220-30f9edafb6df', 'HHAF05', 0, 58, 3, NULL, 1, '2012-12-12 14:22:47')[0m
  [4;36;1mSQL (51.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 572ms (View: 0, DB: 217) | 200 OK [http://localhost/scan/P100100000123?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:23:19) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;36;1mCorePatient Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 58 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 121ms (View: 0, DB: 10) | 200 OK [http://localhost/scan/P100100000123?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:24:14) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000061"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000061')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.4ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 46) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.4ms)[0m   [0;1mINSERT INTO `patient_identifier` (`creator`, `voided`, `void_reason`, `date_voided`, `uuid`, `identifier`, `preferred`, `patient_id`, `identifier_type`, `voided_by`, `location_id`, `date_created`) VALUES(1, 0, NULL, NULL, '9afdb06c-4467-11e2-9220-30f9edafb6df', 'P100100000061', 0, 46, 2, NULL, 1, '2012-12-12 14:24:14')[0m
  [4;35;1mSQL (127.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatientIdentifier Update (0.2ms)[0m   [0mUPDATE `patient_identifier` SET `voided` = 1, `void_reason` = 'National ID version change', `voided_by` = 1 WHERE `patient_identifier_id` = 9[0m
  [4;36;1mSQL (52.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.3ms)[0m   [0;1mINSERT INTO `patient_identifier` (`creator`, `voided`, `void_reason`, `date_voided`, `uuid`, `identifier`, `preferred`, `patient_id`, `identifier_type`, `voided_by`, `location_id`, `date_created`) VALUES(1, 0, NULL, NULL, '9b5840d5-4467-11e2-9220-30f9edafb6df', 'L39VL4', 0, 46, 3, NULL, 1, '2012-12-12 14:24:15')[0m
  [4;35;1mSQL (366.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 1286ms (View: 0, DB: 562) | 200 OK [http://localhost/scan/P100100000061?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:24:43) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000061"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000061')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 67ms (View: 0, DB: 8) | 200 OK [http://localhost/scan/P100100000061?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:24:56) [GET]
  Parameters: {"user"=>"1", "id"=>"L39VL4"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.9ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'L39VL4')) [0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 77ms (View: 0, DB: 11) | 200 OK [http://localhost/scan/L39VL4?user=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-12 16:25:41) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 26ms (View: 25, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:26:33) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.5ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

RuntimeError (--- 
- !ruby/object:CorePerson 
  attributes: 
    gender: F
    death_date: 
    dead: "0"
    voided_by: 
    birthdate: "1977-07-01"
    birthdate_estimated: "1"
    creator: "1"
    date_created: 2012-12-11 10:43:59
    date_voided: 
    uuid: abb1790b-437f-11e2-aa70-30f9edafb6df
    cause_of_death: 
    date_changed: 2012-12-11 10:43:59
    person_id: "41"
    void_reason: 
    changed_by: "1"
    voided: "0"
  attributes_cache: {}

- !ruby/object:CorePerson 
  attributes: 
    gender: F
    death_date: 
    dead: "0"
    voided_by: 
    birthdate: "1978-06-12"
    birthdate_estimated: "0"
    creator: "1"
    date_created: 2012-12-11 14:24:55
    date_voided: 
    uuid: 88cbcc40-439e-11e2-aa70-30f9edafb6df
    cause_of_death: 
    date_changed: 2012-12-11 14:24:55
    person_id: "48"
    void_reason: 
    changed_by: "1"
    voided: "0"
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:155:in `disambiguation'
  app/controllers/core_patient_registration_controller.rb:127:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.3ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:39:45) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering resolve

ActionView::MissingTemplate (Missing template resolve.erb in view path app/views):
  app/controllers/core_patient_registration_controller.rb:157:in `disambiguation'
  app/controllers/core_patient_registration_controller.rb:127:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:41:19) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m

ActionView::MissingTemplate (Missing template core_patient_registration/scan.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:42:21) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
Completed in 37ms (View: 8, DB: 4) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:46:30) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 57ms (View: 11, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:47:01) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 42ms (View: 9, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:47:43) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 90ms (View: 49, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:50:14) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 45ms (View: 14, DB: 4) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:50:46) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 85ms (View: 47, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:50:48) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 43ms (View: 9, DB: 4) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-12 16:50:56) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:51:49) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 114ms (View: 14, DB: 4) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:53:14) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 58ms (View: 20, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mCorePatientIdentifier Load (0.6ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:57:19) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 86ms (View: 14, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-12 16:58:56) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 44ms (View: 12, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 08:45:26) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 220ms (View: 219, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 08:50:31) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (1.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.9ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.5ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 314ms (View: 48, DB: 13) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:09:43) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (6.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonAddress Load (15.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonAddress Load (0.7ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
Completed in 109ms (View: 18, DB: 30) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:11:27) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
Completed in 57ms (View: 20, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:14:22) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
Completed in 94ms (View: 19, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:16:53) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 108ms (View: 55, DB: 9) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:18:52) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 50ms (View: 19, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:21:26) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 91ms (View: 24, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:22:14) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 70ms (View: 25, DB: 9) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:22:38) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 98ms (View: 19, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:23:17) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 82ms (View: 55, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:24:51) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 78ms (View: 22, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:24:53) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:24:57) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:25:51) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 73ms (View: 33, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:26:08) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 101ms (View: 58, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:26:10) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:26:28) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 63ms (View: 21, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:26:30) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:26:55) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 61ms (View: 23, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:27:17) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 124ms (View: 26, DB: 9) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:27:19) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:51:28) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 102ms (View: 66, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:52:04) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m

ActionView::TemplateError (undefined method `strip' for 35:Fixnum) on line #16 of app/views/core_patient_registration/resolve.rhtml:
13:         (!patient.landmark_or_plot_number.blank? ? ", " : "")}#{patient.current_residence_location.to_s +
14:         (!patient.current_residence_location.blank? ? ", " : "")}#{patient.current_district}" : "") %>
15: 
16:         <option value="<%= patient.id %>"><%= "#{patient.name.strip} <i>[ Age: #{patient.age.strip}; " +
17:         "#{gender[patient.gender].strip}; IDs: (#{patient.patient.patient_identifiers.map{|i| i.identifier}.join(", ")});" +
18:         "#{address.strip} ]</i>" %>
19:         </option>

    app/views/core_patient_registration/resolve.rhtml:16:in `_run_rhtml_app47views47core_patient_registration47resolve46rhtml'
    app/views/core_patient_registration/resolve.rhtml:7:in `each'
    app/views/core_patient_registration/resolve.rhtml:7:in `_run_rhtml_app47views47core_patient_registration47resolve46rhtml'
    app/controllers/core_patient_registration_controller.rb:157:in `disambiguation'
    app/controllers/core_patient_registration_controller.rb:127:in `scan'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (63.4ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:52:19) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 58ms (View: 20, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:52:36) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 104ms (View: 19, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:53:07) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 48ms (View: 18, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:53:17) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 51ms (View: 22, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:53:50) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 96ms (View: 56, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:53:58) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:54:02) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 45ms (View: 15, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:54:22) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 113ms (View: 28, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:54:27) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:54:37) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 101ms (View: 27, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:54:39) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:54:43) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 50ms (View: 18, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:56:17) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 51ms (View: 18, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:56:21) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:56:25) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 85ms (View: 20, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:57:09) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 48ms (View: 18, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:57:11) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:57:15) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 48ms (View: 15, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:57:17) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:57:21) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 106ms (View: 22, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:58:12) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 53ms (View: 18, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:58:17) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:58:21) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 51ms (View: 18, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:58:34) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 103ms (View: 26, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:58:47) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 69ms (View: 23, DB: 9) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:58:52) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:58:56) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 46ms (View: 16, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:59:10) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 100ms (View: 70, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 09:59:12) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 09:59:15) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 45ms (View: 15, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:00:00) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 118ms (View: 23, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:00:02) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:00:05) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 83ms (View: 18, DB: 9) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:00:07) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:00:10) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 45ms (View: 16, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:00:54) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 47ms (View: 19, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:00:57) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:01:00) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 91ms (View: 17, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:01:02) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:01:05) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 46ms (View: 17, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:01:40) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:01:43) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 87ms (View: 31, DB: 9) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:04:24) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 96ms (View: 20, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:04:28) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:04:31) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 89ms (View: 57, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:04:34) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:04:38) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 57ms (View: 21, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:05:03) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 100ms (View: 24, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:05:05) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:05:08) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 84ms (View: 56, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:05:09) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:05:12) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 51ms (View: 20, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:10:38) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (8.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 113ms (View: 22, DB: 13) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:10:59) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 60ms (View: 19, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:11:17) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 48ms (View: 18, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:13:02) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 100ms (View: 57, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:13:07) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:13:14) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:13:28) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (7.7ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 85ms (View: 48, DB: 12) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:13:35) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:13:43) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:16:42) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 59ms (View: 24, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:17:00) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 52ms (View: 19, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:17:44) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 102ms (View: 21, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:18:20) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 54ms (View: 21, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:32:41) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 97ms (View: 21, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:33:00) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 84ms (View: 52, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:36:09) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 64ms (View: 19, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:37:07) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 109ms (View: 24, DB: 6) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:37:24) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 71ms (View: 24, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:37:42) [GET]
  Parameters: {"confirm"=>"Yes", "selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:37:57) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 75ms (View: 24, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:38:04) [GET]
  Parameters: {"selection"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:38:11) [GET]
  Parameters: {"selection"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:38:27) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 108ms (View: 22, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:38:31) [GET]
  Parameters: {"patient_id"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:41:26) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 99ms (View: 20, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:42:06) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 59ms (View: 18, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:42:42) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 103ms (View: 23, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:44:01) [GET]
  Parameters: {"patient_id"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 10:46:50) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 6, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 10:47:07) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:47:53) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 53ms (View: 23, DB: 5) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 10:48:00) [GET]
  Parameters: {"patient_id"=>"48"}
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://localhost/select?patient_id=48]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:48:07) [GET]
  Parameters: {"patient_id"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 10:48:13) [GET]
  Parameters: {"patient_id"=>"48"}
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://localhost/select?patient_id=48]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:48:19) [GET]
  Parameters: {"patient_id"=>"41"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:49:01) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 72ms (View: 21, DB: 9) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 10:49:23) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 113ms (View: 23, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 10:49:34) [GET]
  Parameters: {"patient_id"=>"41"}
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/select?patient_id=41]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:49:41) [GET]
  Parameters: {"patient_id"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 10:54:24) [GET]
  Parameters: {"patient_id"=>"48"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:01:15) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 103ms (View: 25, DB: 7) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 11:01:24) [GET]
  Parameters: {"patient_id"=>"48", "user_id"=>""}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:01:37) [GET]
  Parameters: {"id"=>"P100100000089", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 110ms (View: 61, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 11:01:42) [GET]
  Parameters: {"patient_id"=>"48", "user_id"=>"1"}

ActionView::MissingTemplate (Missing template core_patient_registration/change_national_id.erb in view path app/views):
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 11:07:48) [GET]
  Parameters: {"patient_id"=>"48", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 48) AND (person.voided = 0) [0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (43.7ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (24.7ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 48) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (90.2ms)[0m   [0;1mUPDATE `patient_identifier` SET `voided_by` = 1, `void_reason` = 'National ID conflict resolution', `voided` = 1 WHERE `patient_identifier_id` = 11[0m
  [4;35;1mSQL (155.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (25.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (36.0ms)[0m   [0mINSERT INTO `patient_identifier` (`preferred`, `creator`, `patient_id`, `identifier_type`, `voided`, `date_created`, `voided_by`, `uuid`, `date_voided`, `location_id`, `identifier`, `void_reason`) VALUES(0, 1, 48, 3, 0, '2012-12-13 09:07:49', NULL, '914fdcd7-4504-11e2-8441-30f9edafb6df', NULL, 1, 'P100100000123', NULL)[0m
  [4;36;1mSQL (95.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (40.8ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (31.8ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 845ms (View: 0, DB: 555) | 200 OK [http://localhost/change_national_id?patient_id=48&user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 11:08:54) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 136ms (View: 135, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:09:17) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000123"}
  [4;36;1mCorePerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000123')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 58 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 58 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 58 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 58 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 58 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 79ms (View: 22, DB: 7) | 200 OK [http://localhost/scan/P100100000123?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 11:09:50) [GET]
  Parameters: {"patient_id"=>"48", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 48) AND (person.voided = 0) [0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 48) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (20.3ms)[0m   [0;1mUPDATE `patient_identifier` SET `void_reason` = 'National ID conflict resolution', `voided_by` = 1, `voided` = 1 WHERE `patient_identifier_id` = 52[0m
  [4;35;1mSQL (128.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (identifier_type = 3 AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (22.9ms)[0m   [0mINSERT INTO `patient_identifier` (`uuid`, `identifier`, `patient_id`, `preferred`, `creator`, `date_created`, `date_voided`, `identifier_type`, `voided`, `location_id`, `voided_by`, `void_reason`) VALUES('d9b47a92-4504-11e2-8441-30f9edafb6df', 'P100100000123', 48, 0, 1, '2012-12-13 09:09:50', NULL, 3, 0, 1, NULL, NULL)[0m
  [4;36;1mSQL (61.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (21.6ms)[0m   [0;1mINSERT INTO `patient_identifier` (`uuid`, `identifier`, `patient_id`, `preferred`, `creator`, `date_created`, `date_voided`, `identifier_type`, `voided`, `location_id`, `voided_by`, `void_reason`) VALUES('da2aa31b-4504-11e2-8441-30f9edafb6df', 'HHAF05', 48, 0, 1, '2012-12-13 09:09:51', NULL, 3, 0, 1, NULL, NULL)[0m
  [4;35;1mSQL (58.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 1126ms (View: 1, DB: 325) | 200 OK [http://localhost/change_national_id?patient_id=48&user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:19:07) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000089"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.6ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 112ms (View: 20, DB: 8) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 11:20:11) [GET]
  Parameters: {"patient_id"=>"48", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 48) AND (person.voided = 0) [0m
  [4;35;1mCorePatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 48) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (17.9ms)[0m   [0;1mUPDATE `patient_identifier` SET `voided_by` = 1, `voided` = 1 WHERE `patient_identifier_id` = 11[0m
  [4;35;1mSQL (98.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE ((identifier_type = 3 OR identifier_type = 2) AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (7.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (18.7ms)[0m   [0;1mINSERT INTO `patient_identifier` (`uuid`, `identifier`, `patient_id`, `preferred`, `creator`, `date_created`, `date_voided`, `identifier_type`, `voided`, `location_id`, `voided_by`, `void_reason`) VALUES('4b95bfcf-4506-11e2-8441-30f9edafb6df', 'P100100000132', 48, 0, 1, '2012-12-13 09:20:11', NULL, 3, 0, 1, NULL, NULL)[0m
  [4;35;1mSQL (55.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.6ms)[0m   [0mINSERT INTO `patient_identifier` (`uuid`, `identifier`, `patient_id`, `preferred`, `creator`, `date_created`, `date_voided`, `identifier_type`, `voided`, `location_id`, `voided_by`, `void_reason`) VALUES('4be4de7d-4506-11e2-8441-30f9edafb6df', 'HRNAW1', 48, 0, 1, '2012-12-13 09:20:11', NULL, 3, 0, 1, NULL, NULL)[0m
  [4;36;1mSQL (77.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 817ms (View: 0, DB: 291) | 200 OK [http://localhost/change_national_id?patient_id=48&user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 11:22:44) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 23ms (View: 22, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:22:52) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000089"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 41 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 41 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 41) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (16.5ms)[0m   [0mINSERT INTO `patient_identifier` (`patient_id`, `identifier`, `date_voided`, `creator`, `voided_by`, `identifier_type`, `date_created`, `void_reason`, `voided`, `uuid`, `preferred`, `location_id`) VALUES(41, 'P100100000089', NULL, 1, NULL, 2, '2012-12-13 09:22:52', NULL, 0, 'ab91a0e8-4506-11e2-8441-30f9edafb6df', 0, 1)[0m
  [4;36;1mSQL (148.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (20.7ms)[0m   [0;1mUPDATE `patient_identifier` SET `voided_by` = 1, `void_reason` = 'National ID version change', `voided` = 1 WHERE `patient_identifier_id` = 4[0m
  [4;35;1mSQL (80.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (17.4ms)[0m   [0mINSERT INTO `patient_identifier` (`patient_id`, `identifier`, `date_voided`, `creator`, `voided_by`, `identifier_type`, `date_created`, `void_reason`, `voided`, `uuid`, `preferred`, `location_id`) VALUES(41, 'JFELFN', NULL, 1, NULL, 3, '2012-12-13 09:22:53', NULL, 0, 'abef0ba0-4506-11e2-8441-30f9edafb6df', 0, 1)[0m
  [4;36;1mSQL (82.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 41 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 41 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 41 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 41 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 41 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 41 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 41 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 41 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 1073ms (View: 0, DB: 376) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:24:04) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000089"}
  [4;35;1mCorePerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000089')) [0m
  [4;36;1mCorePatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 48) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (22.0ms)[0m   [0;1mINSERT INTO `patient_identifier` (`patient_id`, `identifier`, `date_voided`, `creator`, `voided_by`, `identifier_type`, `date_created`, `void_reason`, `voided`, `uuid`, `preferred`, `location_id`) VALUES(48, 'P100100000089', NULL, 1, NULL, 2, '2012-12-13 09:24:04', NULL, 0, 'd6aba362-4506-11e2-8441-30f9edafb6df', 0, 1)[0m
  [4;35;1mSQL (118.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatientIdentifier Update (21.1ms)[0m   [0mUPDATE `patient_identifier` SET `voided_by` = 1, `void_reason` = 'National ID version change', `voided` = 1 WHERE `patient_identifier_id` = 11[0m
  [4;36;1mSQL (54.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (7.4ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (23.3ms)[0m   [0;1mINSERT INTO `patient_identifier` (`patient_id`, `identifier`, `date_voided`, `creator`, `voided_by`, `identifier_type`, `date_created`, `void_reason`, `voided`, `uuid`, `preferred`, `location_id`) VALUES(48, 'KJ63XT', NULL, 1, NULL, 3, '2012-12-13 09:24:05', NULL, 0, 'd704c277-4506-11e2-8441-30f9edafb6df', 0, 1)[0m
  [4;35;1mSQL (83.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 997ms (View: 1, DB: 345) | 200 OK [http://localhost/scan/P100100000089?user=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:26:45) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000034"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.6ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000034')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.5ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 43 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 43 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.5ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 43 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 43 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.6ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 43 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 43 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 43 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 43 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 43 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.4ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 43) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (11.7ms)[0m   [0mINSERT INTO `patient_identifier` (`patient_id`, `identifier`, `date_voided`, `creator`, `voided_by`, `identifier_type`, `date_created`, `void_reason`, `voided`, `uuid`, `preferred`, `location_id`) VALUES(43, 'P100100000034', NULL, 1, NULL, 2, '2012-12-13 09:26:46', NULL, 0, '36bf139d-4507-11e2-8441-30f9edafb6df', 0, 1)[0m
  [4;36;1mSQL (133.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (16.0ms)[0m   [0;1mUPDATE `patient_identifier` SET `voided_by` = 1, `void_reason` = 'National ID version change', `voided` = 1 WHERE `patient_identifier_id` = 6[0m
  [4;35;1mSQL (78.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (23.0ms)[0m   [0mINSERT INTO `patient_identifier` (`patient_id`, `identifier`, `date_voided`, `creator`, `voided_by`, `identifier_type`, `date_created`, `void_reason`, `voided`, `uuid`, `preferred`, `location_id`) VALUES(43, 'MJ7J7P', NULL, 1, NULL, 3, '2012-12-13 09:26:46', NULL, 0, '3714180a-4507-11e2-8441-30f9edafb6df', 0, 1)[0m
  [4;36;1mSQL (121.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 43 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 43 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 43 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 43 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (6.9ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 43 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 43 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 43 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 43 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 43 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 43 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 43 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 1020ms (View: 0, DB: 405) | 200 OK [http://localhost/scan/P100100000034?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:28:02) [GET]
  Parameters: {"user"=>"1", "id"=>"P100100000052"}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000052')) [0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.4ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 68ms (View: 22, DB: 8) | 200 OK [http://localhost/scan/P100100000052?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 11:28:19) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 23ms (View: 22, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 11:28:27) [GET]
  Parameters: {"patient_id"=>"48", "user_id"=>"1"}
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/select?patient_id=48&user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:28:33) [GET]
  Parameters: {"id"=>"P100100000052", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000052')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 48 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering /core_patient_registration/resolve
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
Completed in 58ms (View: 21, DB: 5) | 200 OK [http://localhost/scan/P100100000052?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#change_national_id (for 127.0.0.1 at 2012-12-13 11:28:38) [GET]
  Parameters: {"patient_id"=>"48", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 48) AND (person.voided = 0) [0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 48) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (0.3ms)[0m   [0;1mUPDATE `patient_identifier` SET `void_reason` = 'National ID conflict resolution', `voided_by` = 1, `voided` = 1 WHERE `patient_identifier_id` = 11[0m
  [4;35;1mSQL (88.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCoreGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mCoreGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'use.moh.national.id') LIMIT 1[0m
  [4;35;1mCoreLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE ((identifier_type = 3 OR identifier_type = 2) AND left(identifier,5)= 'P1001') AND (patient_identifier.voided = 0) ORDER BY identifier desc LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (14.0ms)[0m   [0;1mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, '7a112926-4507-11e2-8441-30f9edafb6df', 48, 'P100100000132', 0, NULL, 1, NULL, '2012-12-13 09:28:38', 1, NULL)[0m
  [4;35;1mSQL (81.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 48) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatientIdentifier Update (0.3ms)[0m   [0mUPDATE `patient_identifier` SET `void_reason` = 'National ID conflict resolution', `voided_by` = 1, `voided` = 1 WHERE `patient_identifier_id` = 63[0m
  [4;36;1mSQL (89.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (13.7ms)[0m   [0;1mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, '7a503312-4507-11e2-8441-30f9edafb6df', 48, 'HRNAW1', 0, NULL, 1, NULL, '2012-12-13 09:28:39', 1, NULL)[0m
  [4;35;1mSQL (103.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (5.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 803ms (View: 0, DB: 409) | 200 OK [http://localhost/change_national_id?patient_id=48&user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:31:44) [GET]
  Parameters: {"id"=>"P100100000052", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000052')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 3 AND patient_id = 45) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Old Identification Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (10.3ms)[0m   [0mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(2, 0, 'e8c9b581-4507-11e2-8441-30f9edafb6df', 45, 'P100100000052', 0, NULL, 1, NULL, '2012-12-13 09:31:44', 1, NULL)[0m
  [4;36;1mSQL (119.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatientIdentifier Update (0.3ms)[0m   [0;1mUPDATE `patient_identifier` SET `void_reason` = 'National ID version change', `voided_by` = 1, `voided` = 1 WHERE `patient_identifier_id` = 8[0m
  [4;35;1mSQL (51.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (18.8ms)[0m   [0mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, 'e910cb14-4507-11e2-8441-30f9edafb6df', 45, 'KGDMXK', 0, NULL, 1, NULL, '2012-12-13 09:31:45', 1, NULL)[0m
  [4;36;1mSQL (90.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 834ms (View: 0, DB: 302) | 200 OK [http://localhost/scan/P100100000052?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:32:30) [GET]
  Parameters: {"id"=>"P100100000052", "user"=>"1"}
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000052')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 62ms (View: 0, DB: 8) | 200 OK [http://localhost/scan/P100100000052?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:32:44) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (40.2ms)[0m   [0;1mINSERT INTO `person` (`voided`, `uuid`, `birthdate`, `birthdate_estimated`, `death_date`, `date_voided`, `creator`, `date_changed`, `cause_of_death`, `void_reason`, `date_created`, `gender`, `dead`, `changed_by`, `voided_by`) VALUES(0, '0c83985c-4508-11e2-8441-30f9edafb6df', NULL, 0, NULL, NULL, 1, '2012-12-13 09:32:44', NULL, NULL, '2012-12-13 09:32:44', 'F', 0, 1, NULL)[0m
  [4;35;1mSQL (132.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.3ms)[0m   [0mUPDATE `person` SET `date_changed` = '2012-12-13 09:32:44', `birthdate` = '1978-06-12' WHERE `person_id` = 61[0m
  [4;36;1mSQL (53.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (43.7ms)[0m   [0mINSERT INTO `person_name` (`voided`, `uuid`, `person_id`, `family_name_prefix`, `middle_name`, `preferred`, `family_name`, `date_voided`, `prefix`, `family_name_suffix`, `creator`, `date_changed`, `void_reason`, `family_name2`, `date_created`, `given_name`, `degree`, `voided_by`, `changed_by`) VALUES(0, '0ca7b433-4508-11e2-8441-30f9edafb6df', 61, NULL, NULL, 0, 'Phiri', NULL, NULL, NULL, 1, '2012-12-13 09:32:44', NULL, NULL, '2012-12-13 09:32:44', 'Grace', NULL, NULL, 1)[0m
  [4;36;1mSQL (60.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (0.9ms)[0m   [0mINSERT INTO `person_address` (`state_province`, `voided`, `subregion`, `uuid`, `person_id`, `latitude`, `neighborhood_cell`, `city_village`, `country`, `preferred`, `region`, `date_voided`, `creator`, `address1`, `address2`, `postal_code`, `void_reason`, `date_created`, `county_district`, `longitude`, `voided_by`, `township_division`) VALUES(NULL, 0, 'Mchinji', '0cb885ef-4508-11e2-8441-30f9edafb6df', 61, NULL, 'Kankhande', 'Escom Guest House', NULL, 0, NULL, NULL, 1, 'Unknown', 'Lilongwe City', NULL, NULL, '2012-12-13 09:32:45', 'Mavwere', NULL, NULL, NULL)[0m
  [4;36;1mSQL (71.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 61 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (42.4ms)[0m   [0;1mINSERT INTO `patient` (`tribe`, `voided`, `patient_id`, `date_voided`, `creator`, `date_changed`, `void_reason`, `date_created`, `changed_by`, `voided_by`) VALUES(NULL, 0, 61, NULL, 1, '2012-12-13 09:32:45', NULL, '2012-12-13 09:32:45', 1, NULL)[0m
  [4;35;1mSQL (61.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (17.1ms)[0m   [0;1mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, '0cd64647-4508-11e2-8441-30f9edafb6df', 61, 'HRNAW1', 0, NULL, 1, NULL, '2012-12-13 09:32:45', 1, NULL)[0m
  [4;35;1mSQL (60.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 61 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 61 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 61 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 61 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 61 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 61 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 61 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 61 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 61 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 61 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 61 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 61 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 61 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 61 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 61 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 61 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 61 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 961ms (View: 0, DB: 597) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:34:21) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (23.3ms)[0m   [0mINSERT INTO `person` (`voided`, `uuid`, `birthdate`, `birthdate_estimated`, `death_date`, `date_voided`, `creator`, `date_changed`, `cause_of_death`, `void_reason`, `date_created`, `gender`, `dead`, `changed_by`, `voided_by`) VALUES(0, '464ec9cf-4508-11e2-8441-30f9edafb6df', NULL, 0, NULL, NULL, 1, '2012-12-13 09:34:21', NULL, NULL, '2012-12-13 09:34:21', 'F', 0, 1, NULL)[0m
  [4;36;1mSQL (111.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.5ms)[0m   [0;1mUPDATE `person` SET `date_changed` = '2012-12-13 09:34:21', `birthdate` = '1978-06-12' WHERE `person_id` = 62[0m
  [4;35;1mSQL (73.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (20.0ms)[0m   [0;1mINSERT INTO `person_name` (`voided`, `uuid`, `person_id`, `family_name_prefix`, `middle_name`, `preferred`, `family_name`, `date_voided`, `prefix`, `family_name_suffix`, `creator`, `date_changed`, `void_reason`, `family_name2`, `date_created`, `given_name`, `degree`, `voided_by`, `changed_by`) VALUES(0, '4675a63e-4508-11e2-8441-30f9edafb6df', 62, NULL, NULL, 0, 'Phiri', NULL, NULL, NULL, 1, '2012-12-13 09:34:21', NULL, NULL, '2012-12-13 09:34:21', 'Grace', NULL, NULL, 1)[0m
  [4;35;1mSQL (71.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (13.5ms)[0m   [0;1mINSERT INTO `person_address` (`state_province`, `voided`, `subregion`, `uuid`, `person_id`, `latitude`, `neighborhood_cell`, `city_village`, `country`, `preferred`, `region`, `date_voided`, `creator`, `address1`, `address2`, `postal_code`, `void_reason`, `date_created`, `county_district`, `longitude`, `voided_by`, `township_division`) VALUES(NULL, 0, 'Mchinji', '468472bf-4508-11e2-8441-30f9edafb6df', 62, NULL, 'Kankhande', 'Escom Guest House', NULL, 0, NULL, NULL, 1, 'Unknown', 'Lilongwe City', NULL, NULL, '2012-12-13 09:34:21', 'Mavwere', NULL, NULL, NULL)[0m
  [4;35;1mSQL (70.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 62 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (17.9ms)[0m   [0mINSERT INTO `patient` (`tribe`, `voided`, `patient_id`, `date_voided`, `creator`, `date_changed`, `void_reason`, `date_created`, `changed_by`, `voided_by`) VALUES(NULL, 0, 62, NULL, 1, '2012-12-13 09:34:22', NULL, '2012-12-13 09:34:22', 1, NULL)[0m
  [4;36;1mSQL (52.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (21.7ms)[0m   [0mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, '469e9664-4508-11e2-8441-30f9edafb6df', 62, 'HRNAW1', 0, NULL, 1, NULL, '2012-12-13 09:34:22', 1, NULL)[0m
  [4;36;1mSQL (56.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 62 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 62 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 62 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 62 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 62 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 62 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 62 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 62 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 62 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 62 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 62 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 62 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.6ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 62 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 62 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 62 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 62 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 62 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 856ms (View: 1, DB: 543) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:34:23) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;35;1mCorePerson Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (10.1ms)[0m   [0;1mINSERT INTO `person` (`voided`, `uuid`, `birthdate`, `birthdate_estimated`, `death_date`, `date_voided`, `creator`, `date_changed`, `cause_of_death`, `void_reason`, `date_created`, `gender`, `dead`, `changed_by`, `voided_by`) VALUES(0, '47987d9b-4508-11e2-8441-30f9edafb6df', NULL, 0, NULL, NULL, 1, '2012-12-13 09:34:23', NULL, NULL, '2012-12-13 09:34:23', 'F', 0, 1, NULL)[0m
  [4;35;1mSQL (79.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.2ms)[0m   [0mUPDATE `person` SET `date_changed` = '2012-12-13 09:34:23', `birthdate` = '1978-06-12' WHERE `person_id` = 63[0m
  [4;36;1mSQL (64.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (20.7ms)[0m   [0mINSERT INTO `person_name` (`voided`, `uuid`, `person_id`, `family_name_prefix`, `middle_name`, `preferred`, `family_name`, `date_voided`, `prefix`, `family_name_suffix`, `creator`, `date_changed`, `void_reason`, `family_name2`, `date_created`, `given_name`, `degree`, `voided_by`, `changed_by`) VALUES(0, '47b12fdf-4508-11e2-8441-30f9edafb6df', 63, NULL, NULL, 0, 'Phiri', NULL, NULL, NULL, 1, '2012-12-13 09:34:23', NULL, NULL, '2012-12-13 09:34:23', 'Grace', NULL, NULL, 1)[0m
  [4;36;1mSQL (52.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (21.3ms)[0m   [0mINSERT INTO `person_address` (`state_province`, `voided`, `subregion`, `uuid`, `person_id`, `latitude`, `neighborhood_cell`, `city_village`, `country`, `preferred`, `region`, `date_voided`, `creator`, `address1`, `address2`, `postal_code`, `void_reason`, `date_created`, `county_district`, `longitude`, `voided_by`, `township_division`) VALUES(NULL, 0, 'Mchinji', '47bd23b9-4508-11e2-8441-30f9edafb6df', 63, NULL, 'Kankhande', 'Escom Guest House', NULL, 0, NULL, NULL, 1, 'Unknown', 'Lilongwe City', NULL, NULL, '2012-12-13 09:34:24', 'Mavwere', NULL, NULL, NULL)[0m
  [4;36;1mSQL (51.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 63 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (18.2ms)[0m   [0;1mINSERT INTO `patient` (`tribe`, `voided`, `patient_id`, `date_voided`, `creator`, `date_changed`, `void_reason`, `date_created`, `changed_by`, `voided_by`) VALUES(NULL, 0, 63, NULL, 1, '2012-12-13 09:34:24', NULL, '2012-12-13 09:34:24', 1, NULL)[0m
  [4;35;1mSQL (59.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (19.0ms)[0m   [0;1mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, '47dc83f5-4508-11e2-8441-30f9edafb6df', 63, 'HRNAW1', 0, NULL, 1, NULL, '2012-12-13 09:34:24', 1, NULL)[0m
  [4;35;1mSQL (50.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 63 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 63 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 63 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 63 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 63 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 63 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 63 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 63 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 63 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 63 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 63 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 63 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 63 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 63 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 63 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 63 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 63 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 774ms (View: 0, DB: 459) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:34:54) [GET]
  Parameters: {"id"=>"P100100000061", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000061')) [0m
  [4;35;1mCorePatient Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 119ms (View: 0, DB: 12) | 200 OK [http://localhost/scan/P100100000061?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:35:20) [GET]
  Parameters: {"id"=>"P100100000061", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000061')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 66ms (View: 1, DB: 7) | 200 OK [http://localhost/scan/P100100000061?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:35:21) [GET]
  Parameters: {"id"=>"P100100000061", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000061')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 46 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 46 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 46 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 46 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 46 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 46 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 99ms (View: 0, DB: 8) | 200 OK [http://localhost/scan/P100100000061?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:36:26) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (17.3ms)[0m   [0mINSERT INTO `person` (`voided`, `uuid`, `birthdate`, `birthdate_estimated`, `death_date`, `date_voided`, `creator`, `date_changed`, `cause_of_death`, `void_reason`, `date_created`, `gender`, `dead`, `changed_by`, `voided_by`) VALUES(0, '90ddd498-4508-11e2-8441-30f9edafb6df', NULL, 0, NULL, NULL, 1, '2012-12-13 09:36:26', NULL, NULL, '2012-12-13 09:36:26', 'F', 0, 1, NULL)[0m
  [4;36;1mSQL (135.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.2ms)[0m   [0;1mUPDATE `person` SET `date_changed` = '2012-12-13 09:36:26', `birthdate` = '1978-06-12' WHERE `person_id` = 64[0m
  [4;35;1mSQL (75.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (16.0ms)[0m   [0;1mINSERT INTO `person_name` (`voided`, `uuid`, `person_id`, `family_name_prefix`, `middle_name`, `preferred`, `family_name`, `date_voided`, `prefix`, `family_name_suffix`, `creator`, `date_changed`, `void_reason`, `family_name2`, `date_created`, `given_name`, `degree`, `voided_by`, `changed_by`) VALUES(0, '9101c6ff-4508-11e2-8441-30f9edafb6df', 64, NULL, NULL, 0, 'Phiri', NULL, NULL, NULL, 1, '2012-12-13 09:36:26', NULL, NULL, '2012-12-13 09:36:26', 'Grace', NULL, NULL, 1)[0m
  [4;35;1mSQL (68.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (0.3ms)[0m   [0;1mINSERT INTO `person_address` (`state_province`, `voided`, `subregion`, `uuid`, `person_id`, `latitude`, `neighborhood_cell`, `city_village`, `country`, `preferred`, `region`, `date_voided`, `creator`, `address1`, `address2`, `postal_code`, `void_reason`, `date_created`, `county_district`, `longitude`, `voided_by`, `township_division`) VALUES(NULL, 0, 'Mchinji', '910f6a36-4508-11e2-8441-30f9edafb6df', 64, NULL, 'Kankhande', 'Escom Guest House', NULL, 0, NULL, NULL, 1, 'Unknown', 'Lilongwe City', NULL, NULL, '2012-12-13 09:36:27', 'Mavwere', NULL, NULL, NULL)[0m
  [4;35;1mSQL (84.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.5ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 64 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (0.4ms)[0m   [0mINSERT INTO `patient` (`tribe`, `voided`, `patient_id`, `date_voided`, `creator`, `date_changed`, `void_reason`, `date_created`, `changed_by`, `voided_by`) VALUES(NULL, 0, 64, NULL, 1, '2012-12-13 09:36:27', NULL, '2012-12-13 09:36:27', 1, NULL)[0m
  [4;36;1mSQL (81.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.3ms)[0m   [0mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, '91314077-4508-11e2-8441-30f9edafb6df', 64, 'HRNAW1', 0, NULL, 1, NULL, '2012-12-13 09:36:27', 1, NULL)[0m
  [4;36;1mSQL (73.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 64 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 64 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 64 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 64 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 64 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 64 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 64 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 64 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 64 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 64 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 64 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 64 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 64 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 64 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 64 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 64 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 64 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 863ms (View: 0, DB: 564) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:36:49) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (0.2ms)[0m   [0;1mINSERT INTO `person` (`voided`, `uuid`, `birthdate`, `birthdate_estimated`, `death_date`, `date_voided`, `creator`, `date_changed`, `cause_of_death`, `void_reason`, `date_created`, `gender`, `dead`, `changed_by`, `voided_by`) VALUES(0, '9e929cb3-4508-11e2-8441-30f9edafb6df', NULL, 0, NULL, NULL, 1, '2012-12-13 09:36:49', NULL, NULL, '2012-12-13 09:36:49', 'F', 0, 1, NULL)[0m
  [4;35;1mSQL (90.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.2ms)[0m   [0mUPDATE `person` SET `date_changed` = '2012-12-13 09:36:49', `birthdate` = '1978-06-12' WHERE `person_id` = 65[0m
  [4;36;1mSQL (87.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (16.1ms)[0m   [0mINSERT INTO `person_name` (`voided`, `uuid`, `person_id`, `family_name_prefix`, `middle_name`, `preferred`, `family_name`, `date_voided`, `prefix`, `family_name_suffix`, `creator`, `date_changed`, `void_reason`, `family_name2`, `date_created`, `given_name`, `degree`, `voided_by`, `changed_by`) VALUES(0, '9eaed0b0-4508-11e2-8441-30f9edafb6df', 65, NULL, NULL, 0, 'Phiri', NULL, NULL, NULL, 1, '2012-12-13 09:36:49', NULL, NULL, '2012-12-13 09:36:49', 'Grace', NULL, NULL, 1)[0m
  [4;36;1mSQL (68.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (22.2ms)[0m   [0mINSERT INTO `person_address` (`state_province`, `voided`, `subregion`, `uuid`, `person_id`, `latitude`, `neighborhood_cell`, `city_village`, `country`, `preferred`, `region`, `date_voided`, `creator`, `address1`, `address2`, `postal_code`, `void_reason`, `date_created`, `county_district`, `longitude`, `voided_by`, `township_division`) VALUES(NULL, 0, 'Mchinji', '9ebc7bc6-4508-11e2-8441-30f9edafb6df', 65, NULL, 'Kankhande', 'Escom Guest House', NULL, 0, NULL, NULL, 1, 'Unknown', 'Lilongwe City', NULL, NULL, '2012-12-13 09:36:49', 'Mavwere', NULL, NULL, NULL)[0m
  [4;36;1mSQL (72.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 65 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (24.3ms)[0m   [0;1mINSERT INTO `patient` (`tribe`, `voided`, `patient_id`, `date_voided`, `creator`, `date_changed`, `void_reason`, `date_created`, `changed_by`, `voided_by`) VALUES(NULL, 0, 65, NULL, 1, '2012-12-13 09:36:50', NULL, '2012-12-13 09:36:50', 1, NULL)[0m
  [4;35;1mSQL (91.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (19.4ms)[0m   [0;1mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, '9edf0287-4508-11e2-8441-30f9edafb6df', 65, 'HRNAW1', 0, NULL, 1, NULL, '2012-12-13 09:36:50', 1, NULL)[0m
  [4;35;1mSQL (48.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.8ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 65 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 65 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 65 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 65 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 65 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.6ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 65 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.5ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 65 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 65 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 65 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 65 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 65 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 65 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 65 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 65 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 65 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 65 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 65 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 852ms (View: 0, DB: 552) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:37:00) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (51.4ms)[0m   [0mINSERT INTO `person` (`voided`, `uuid`, `birthdate`, `birthdate_estimated`, `death_date`, `date_voided`, `creator`, `date_changed`, `cause_of_death`, `void_reason`, `date_created`, `gender`, `dead`, `changed_by`, `voided_by`) VALUES(0, 'a4fcc748-4508-11e2-8441-30f9edafb6df', NULL, 0, NULL, NULL, 1, '2012-12-13 09:37:00', NULL, NULL, '2012-12-13 09:37:00', 'F', 0, 1, NULL)[0m
  [4;36;1mSQL (126.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `date_changed` = '2012-12-13 09:37:00', `birthdate` = '1978-06-12' WHERE `person_id` = 66[0m
  [4;35;1mSQL (98.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (0.3ms)[0m   [0;1mINSERT INTO `person_name` (`voided`, `uuid`, `person_id`, `family_name_prefix`, `middle_name`, `preferred`, `family_name`, `date_voided`, `prefix`, `family_name_suffix`, `creator`, `date_changed`, `void_reason`, `family_name2`, `date_created`, `given_name`, `degree`, `voided_by`, `changed_by`) VALUES(0, 'a5281465-4508-11e2-8441-30f9edafb6df', 66, NULL, NULL, 0, 'Phiri', NULL, NULL, NULL, 1, '2012-12-13 09:37:00', NULL, NULL, '2012-12-13 09:37:00', 'Grace', NULL, NULL, 1)[0m
  [4;35;1mSQL (39.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (0.3ms)[0m   [0;1mINSERT INTO `person_address` (`state_province`, `voided`, `subregion`, `uuid`, `person_id`, `latitude`, `neighborhood_cell`, `city_village`, `country`, `preferred`, `region`, `date_voided`, `creator`, `address1`, `address2`, `postal_code`, `void_reason`, `date_created`, `county_district`, `longitude`, `voided_by`, `township_division`) VALUES(NULL, 0, 'Mchinji', 'a52edb96-4508-11e2-8441-30f9edafb6df', 66, NULL, 'Kankhande', 'Escom Guest House', NULL, 0, NULL, NULL, 1, 'Unknown', 'Lilongwe City', NULL, NULL, '2012-12-13 09:37:00', 'Mavwere', NULL, NULL, NULL)[0m
  [4;35;1mSQL (72.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 66 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (0.3ms)[0m   [0mINSERT INTO `patient` (`tribe`, `voided`, `patient_id`, `date_voided`, `creator`, `date_changed`, `void_reason`, `date_created`, `changed_by`, `voided_by`) VALUES(NULL, 0, 66, NULL, 1, '2012-12-13 09:37:00', NULL, '2012-12-13 09:37:00', 1, NULL)[0m
  [4;36;1mSQL (81.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (12.2ms)[0m   [0mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, 'a54963e6-4508-11e2-8441-30f9edafb6df', 66, 'HRNAW1', 0, NULL, 1, NULL, '2012-12-13 09:37:00', 1, NULL)[0m
  [4;36;1mSQL (65.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 66 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 66 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 66 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 66 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (8.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 66 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 66 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.5ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 66 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 66 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 66 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 66 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 66 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 66 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.4ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 66 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 66 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 66 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 66 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 66 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 881ms (View: 0, DB: 569) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:41:22) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (0.3ms)[0m   [0;1mINSERT INTO `person` (`voided`, `uuid`, `birthdate`, `birthdate_estimated`, `death_date`, `date_voided`, `creator`, `date_changed`, `cause_of_death`, `void_reason`, `date_created`, `gender`, `dead`, `changed_by`, `voided_by`) VALUES(0, '414e2d31-4509-11e2-8441-30f9edafb6df', NULL, 0, NULL, NULL, 1, '2012-12-13 09:41:22', NULL, NULL, '2012-12-13 09:41:22', 'F', 0, 1, NULL)[0m
  [4;35;1mSQL (101.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.3ms)[0m   [0mUPDATE `person` SET `date_changed` = '2012-12-13 09:41:22', `birthdate` = '1978-06-12' WHERE `person_id` = 67[0m
  [4;36;1mSQL (109.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (15.7ms)[0m   [0mINSERT INTO `person_name` (`voided`, `uuid`, `person_id`, `family_name_prefix`, `middle_name`, `preferred`, `family_name`, `date_voided`, `prefix`, `family_name_suffix`, `creator`, `date_changed`, `void_reason`, `family_name2`, `date_created`, `given_name`, `degree`, `voided_by`, `changed_by`) VALUES(0, '416f6392-4509-11e2-8441-30f9edafb6df', 67, NULL, NULL, 0, 'Phiri', NULL, NULL, NULL, 1, '2012-12-13 09:41:22', NULL, NULL, '2012-12-13 09:41:22', 'Grace', NULL, NULL, 1)[0m
  [4;36;1mSQL (79.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (0.6ms)[0m   [0mINSERT INTO `person_address` (`state_province`, `voided`, `subregion`, `uuid`, `person_id`, `latitude`, `neighborhood_cell`, `city_village`, `country`, `preferred`, `region`, `date_voided`, `creator`, `address1`, `address2`, `postal_code`, `void_reason`, `date_created`, `county_district`, `longitude`, `voided_by`, `township_division`) VALUES(NULL, 0, 'Mchinji', '417eba5c-4509-11e2-8441-30f9edafb6df', 67, NULL, 'Kankhande', 'Escom Guest House', NULL, 0, NULL, NULL, 1, 'Unknown', 'Lilongwe City', NULL, NULL, '2012-12-13 09:41:23', 'Mavwere', NULL, NULL, NULL)[0m
  [4;36;1mSQL (83.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 67 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (21.6ms)[0m   [0;1mINSERT INTO `patient` (`tribe`, `voided`, `patient_id`, `date_voided`, `creator`, `date_changed`, `void_reason`, `date_created`, `changed_by`, `voided_by`) VALUES(NULL, 0, 67, NULL, 1, '2012-12-13 09:41:23', NULL, '2012-12-13 09:41:23', 1, NULL)[0m
  [4;35;1mSQL (71.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (20.5ms)[0m   [0;1mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, '419c72ba-4509-11e2-8441-30f9edafb6df', 67, 'HRNAW1', 0, NULL, 1, NULL, '2012-12-13 09:41:23', 1, NULL)[0m
  [4;35;1mSQL (57.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 67 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 67 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 67 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 67 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 67 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 67 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 67 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 67 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 67 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 67 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 67 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 67 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 67 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 67 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 67 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 67 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 67 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 831ms (View: 0, DB: 571) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:41:56) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.2ms)[0m   [0mINSERT INTO `person` (`voided`, `uuid`, `birthdate`, `birthdate_estimated`, `death_date`, `date_voided`, `creator`, `date_changed`, `cause_of_death`, `void_reason`, `date_created`, `gender`, `dead`, `changed_by`, `voided_by`) VALUES(0, '5580eb48-4509-11e2-8441-30f9edafb6df', NULL, 0, NULL, NULL, 1, '2012-12-13 09:41:56', NULL, NULL, '2012-12-13 09:41:56', 'F', 0, 1, NULL)[0m
  [4;36;1mSQL (100.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.4ms)[0m   [0;1mUPDATE `person` SET `date_changed` = '2012-12-13 09:41:56', `birthdate` = '1978-06-12' WHERE `person_id` = 68[0m
  [4;35;1mSQL (84.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (0.2ms)[0m   [0;1mINSERT INTO `person_name` (`voided`, `uuid`, `person_id`, `family_name_prefix`, `middle_name`, `preferred`, `family_name`, `date_voided`, `prefix`, `family_name_suffix`, `creator`, `date_changed`, `void_reason`, `family_name2`, `date_created`, `given_name`, `degree`, `voided_by`, `changed_by`) VALUES(0, '559f54d6-4509-11e2-8441-30f9edafb6df', 68, NULL, NULL, 0, 'Phiri', NULL, NULL, NULL, 1, '2012-12-13 09:41:56', NULL, NULL, '2012-12-13 09:41:56', 'Grace', NULL, NULL, 1)[0m
  [4;35;1mSQL (79.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (0.3ms)[0m   [0;1mINSERT INTO `person_address` (`state_province`, `voided`, `subregion`, `uuid`, `person_id`, `latitude`, `neighborhood_cell`, `city_village`, `country`, `preferred`, `region`, `date_voided`, `creator`, `address1`, `address2`, `postal_code`, `void_reason`, `date_created`, `county_district`, `longitude`, `voided_by`, `township_division`) VALUES(NULL, 0, 'Mchinji', '55ac5dc1-4509-11e2-8441-30f9edafb6df', 68, NULL, 'Kankhande', 'Escom Guest House', NULL, 0, NULL, NULL, 1, 'Unknown', 'Lilongwe City', NULL, NULL, '2012-12-13 09:41:56', 'Mavwere', NULL, NULL, NULL)[0m
  [4;35;1mSQL (72.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 68 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePatient Create (0.2ms)[0m   [0mINSERT INTO `patient` (`tribe`, `voided`, `patient_id`, `date_voided`, `creator`, `date_changed`, `void_reason`, `date_created`, `changed_by`, `voided_by`) VALUES(NULL, 0, 68, NULL, 1, '2012-12-13 09:41:56', NULL, '2012-12-13 09:41:56', 1, NULL)[0m
  [4;36;1mSQL (69.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePatientIdentifier Create (0.3ms)[0m   [0mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, '55c4d1eb-4509-11e2-8441-30f9edafb6df', 68, 'HRNAW1', 0, NULL, 1, NULL, '2012-12-13 09:41:57', 1, NULL)[0m
  [4;36;1mSQL (79.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 68 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

RuntimeError (--- HRNAW1
):
  app/controllers/core_patient_registration_controller.rb:135:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (54.6ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:42:22) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (15.5ms)[0m   [0;1mINSERT INTO `person` (`voided`, `uuid`, `birthdate`, `birthdate_estimated`, `death_date`, `date_voided`, `creator`, `date_changed`, `cause_of_death`, `void_reason`, `date_created`, `gender`, `dead`, `changed_by`, `voided_by`) VALUES(0, '64da7e06-4509-11e2-8441-30f9edafb6df', NULL, 0, NULL, NULL, 1, '2012-12-13 09:42:22', NULL, NULL, '2012-12-13 09:42:22', 'F', 0, 1, NULL)[0m
  [4;35;1mSQL (96.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.2ms)[0m   [0mUPDATE `person` SET `date_changed` = '2012-12-13 09:42:22', `birthdate` = '1978-06-12' WHERE `person_id` = 69[0m
  [4;36;1mSQL (76.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonName Create (18.8ms)[0m   [0mINSERT INTO `person_name` (`voided`, `uuid`, `person_id`, `family_name_prefix`, `middle_name`, `preferred`, `family_name`, `date_voided`, `prefix`, `family_name_suffix`, `creator`, `date_changed`, `void_reason`, `family_name2`, `date_created`, `given_name`, `degree`, `voided_by`, `changed_by`) VALUES(0, '64f8541e-4509-11e2-8441-30f9edafb6df', 69, NULL, NULL, 0, 'Phiri', NULL, NULL, NULL, 1, '2012-12-13 09:42:22', NULL, NULL, '2012-12-13 09:42:22', 'Grace', NULL, NULL, 1)[0m
  [4;36;1mSQL (65.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (12.4ms)[0m   [0mINSERT INTO `person_address` (`state_province`, `voided`, `subregion`, `uuid`, `person_id`, `latitude`, `neighborhood_cell`, `city_village`, `country`, `preferred`, `region`, `date_voided`, `creator`, `address1`, `address2`, `postal_code`, `void_reason`, `date_created`, `county_district`, `longitude`, `voided_by`, `township_division`) VALUES(NULL, 0, 'Mchinji', '6505f574-4509-11e2-8441-30f9edafb6df', 69, NULL, 'Kankhande', 'Escom Guest House', NULL, 0, NULL, NULL, 1, 'Unknown', 'Lilongwe City', NULL, NULL, '2012-12-13 09:42:22', 'Mavwere', NULL, NULL, NULL)[0m
  [4;36;1mSQL (71.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 69 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (0.2ms)[0m   [0;1mINSERT INTO `patient` (`tribe`, `voided`, `patient_id`, `date_voided`, `creator`, `date_changed`, `void_reason`, `date_created`, `changed_by`, `voided_by`) VALUES(NULL, 0, 69, NULL, 1, '2012-12-13 09:42:22', NULL, '2012-12-13 09:42:22', 1, NULL)[0m
  [4;35;1mSQL (70.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (13.2ms)[0m   [0;1mINSERT INTO `patient_identifier` (`identifier_type`, `voided`, `uuid`, `patient_id`, `identifier`, `preferred`, `date_voided`, `creator`, `void_reason`, `date_created`, `location_id`, `voided_by`) VALUES(3, 0, '652007a7-4509-11e2-8441-30f9edafb6df', 69, 'HRNAW1', 0, NULL, 1, NULL, '2012-12-13 09:42:22', 1, NULL)[0m
  [4;35;1mSQL (55.3ms)[0m   [0mCOMMIT[0m

RuntimeError (--- P100100000132
):
  app/controllers/core_patient_registration_controller.rb:135:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (56.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:47:23) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` IS NULL)) [0m
Completed in 224ms (View: 0, DB: 4) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:48:23) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` IS NULL)) [0m
Completed in 221ms (View: 0, DB: 5) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:48:24) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` IS NULL)) [0m
Completed in 262ms (View: 0, DB: 3) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:48:56) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` IS NULL)) [0m

RuntimeError (--- []

):
  app/controllers/core_patient_registration_controller.rb:125:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:49:16) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` IS NULL)) [0m

RuntimeError (--- 
birth_year: 1978
race: ""
age_estimate: false
occupation: ""
birth_month: 6
addresses: 
  subregion: Mchinji
  neighborhood_cell: Kankhande
  city_village: Escom Guest House
  address2: Lilongwe City
  address1: Unknown
  county_district: Mavwere
birth_day: 12
home_phone_number: ""
patient: 
  identifiers: 
    National id: HRNAW1
cell_phone_number: ""
citizenship: ""
gender: Female
office_phone_number: ""
names: 
  middle_name: 
  family_name: Phiri
  family_name2: 
  given_name: Grace
):
  app/controllers/core_patient_registration_controller.rb:125:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:49:36) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` IS NULL)) [0m

RuntimeError (--- 
identifiers: 
  National id: HRNAW1
):
  app/controllers/core_patient_registration_controller.rb:125:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (26.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:49:48) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` IS NULL)) [0m

RuntimeError (--- 
National id: HRNAW1
):
  app/controllers/core_patient_registration_controller.rb:125:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (62.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:50:00) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` IS NULL)) [0m

RuntimeError (--- HRNAW1
):
  app/controllers/core_patient_registration_controller.rb:125:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:50:22) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'HRNAW1')) [0m

RuntimeError (--- 
- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 7a503312-4507-11e2-8441-30f9edafb6df
    patient_id: "48"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "64"
    date_created: 2012-12-13 09:28:39
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 0cd64647-4508-11e2-8441-30f9edafb6df
    patient_id: "61"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "67"
    date_created: 2012-12-13 09:32:45
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 469e9664-4508-11e2-8441-30f9edafb6df
    patient_id: "62"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "68"
    date_created: 2012-12-13 09:34:22
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 47dc83f5-4508-11e2-8441-30f9edafb6df
    patient_id: "63"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "69"
    date_created: 2012-12-13 09:34:24
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 91314077-4508-11e2-8441-30f9edafb6df
    patient_id: "64"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "70"
    date_created: 2012-12-13 09:36:27
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 9edf0287-4508-11e2-8441-30f9edafb6df
    patient_id: "65"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "71"
    date_created: 2012-12-13 09:36:50
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: a54963e6-4508-11e2-8441-30f9edafb6df
    patient_id: "66"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "72"
    date_created: 2012-12-13 09:37:00
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 419c72ba-4509-11e2-8441-30f9edafb6df
    patient_id: "67"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "73"
    date_created: 2012-12-13 09:41:23
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 55c4d1eb-4509-11e2-8441-30f9edafb6df
    patient_id: "68"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "74"
    date_created: 2012-12-13 09:41:57
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 652007a7-4509-11e2-8441-30f9edafb6df
    patient_id: "69"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "75"
    date_created: 2012-12-13 09:42:22
    location_id: "1"
    voided_by: 
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:125:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.2ms)
Rendered rescues/_request_and_response (6.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:51:35) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'HRNAW1')) [0m

RuntimeError (--- 
- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 7a503312-4507-11e2-8441-30f9edafb6df
    patient_id: "48"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "64"
    date_created: 2012-12-13 09:28:39
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 0cd64647-4508-11e2-8441-30f9edafb6df
    patient_id: "61"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "67"
    date_created: 2012-12-13 09:32:45
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 469e9664-4508-11e2-8441-30f9edafb6df
    patient_id: "62"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "68"
    date_created: 2012-12-13 09:34:22
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 47dc83f5-4508-11e2-8441-30f9edafb6df
    patient_id: "63"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "69"
    date_created: 2012-12-13 09:34:24
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 91314077-4508-11e2-8441-30f9edafb6df
    patient_id: "64"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "70"
    date_created: 2012-12-13 09:36:27
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 9edf0287-4508-11e2-8441-30f9edafb6df
    patient_id: "65"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "71"
    date_created: 2012-12-13 09:36:50
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: a54963e6-4508-11e2-8441-30f9edafb6df
    patient_id: "66"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "72"
    date_created: 2012-12-13 09:37:00
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 419c72ba-4509-11e2-8441-30f9edafb6df
    patient_id: "67"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "73"
    date_created: 2012-12-13 09:41:23
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 55c4d1eb-4509-11e2-8441-30f9edafb6df
    patient_id: "68"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "74"
    date_created: 2012-12-13 09:41:57
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 652007a7-4509-11e2-8441-30f9edafb6df
    patient_id: "69"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "75"
    date_created: 2012-12-13 09:42:22
    location_id: "1"
    voided_by: 
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:125:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (58.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:51:51) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'HRNAW1')) [0m

RuntimeError (--- 
- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 7a503312-4507-11e2-8441-30f9edafb6df
    patient_id: "48"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "64"
    date_created: 2012-12-13 09:28:39
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 0cd64647-4508-11e2-8441-30f9edafb6df
    patient_id: "61"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "67"
    date_created: 2012-12-13 09:32:45
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 469e9664-4508-11e2-8441-30f9edafb6df
    patient_id: "62"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "68"
    date_created: 2012-12-13 09:34:22
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 47dc83f5-4508-11e2-8441-30f9edafb6df
    patient_id: "63"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "69"
    date_created: 2012-12-13 09:34:24
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 91314077-4508-11e2-8441-30f9edafb6df
    patient_id: "64"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "70"
    date_created: 2012-12-13 09:36:27
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 9edf0287-4508-11e2-8441-30f9edafb6df
    patient_id: "65"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "71"
    date_created: 2012-12-13 09:36:50
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: a54963e6-4508-11e2-8441-30f9edafb6df
    patient_id: "66"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "72"
    date_created: 2012-12-13 09:37:00
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 419c72ba-4509-11e2-8441-30f9edafb6df
    patient_id: "67"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "73"
    date_created: 2012-12-13 09:41:23
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 55c4d1eb-4509-11e2-8441-30f9edafb6df
    patient_id: "68"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "74"
    date_created: 2012-12-13 09:41:57
    location_id: "1"
    voided_by: 
  attributes_cache: {}

- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 652007a7-4509-11e2-8441-30f9edafb6df
    patient_id: "69"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "75"
    date_created: 2012-12-13 09:42:22
    location_id: "1"
    voided_by: 
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:125:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (61.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:52:28) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'HRNAW1')) [0m

RuntimeError (--- 
- !ruby/object:CorePatientIdentifier 
  attributes: 
    identifier_type: "3"
    voided: "0"
    uuid: 7a503312-4507-11e2-8441-30f9edafb6df
    patient_id: "48"
    identifier: HRNAW1
    preferred: "0"
    date_voided: 
    creator: "1"
    void_reason: 
    patient_identifier_id: "64"
    date_created: 2012-12-13 09:28:39
    location_id: "1"
    voided_by: 
  attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:125:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:52:51) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'HRNAW1')) [0m

NoMethodError (undefined method `national_id' for #<CorePatientIdentifier:0x7ffb84844248>):
  app/controllers/core_patient_registration_controller.rb:135:in `scan'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:56:22) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'HRNAW1')) [0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 48) AND (person.voided = 0) [0m
  [4;35;1mCorePatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 296ms (View: 0, DB: 9) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:56:48) [GET]
  Parameters: {"id"=>"P100100000132", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000132')) [0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'HRNAW1')) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 48) AND (person.voided = 0) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 48 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (2.5ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 48 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 48 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 48 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 48 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 280ms (View: 0, DB: 10) | 200 OK [http://localhost/scan/P100100000132?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:57:05) [GET]
  Parameters: {"id"=>"P100100000052", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000052')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 64ms (View: 0, DB: 9) | 200 OK [http://localhost/scan/P100100000052?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:57:08) [GET]
  Parameters: {"id"=>"P100100000052", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000052')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 97ms (View: 0, DB: 7) | 200 OK [http://localhost/scan/P100100000052?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:58:50) [GET]
  Parameters: {"id"=>"P100100000052", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000052')) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 96ms (View: 1, DB: 7) | 200 OK [http://localhost/scan/P100100000052?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 11:59:00) [GET]
  Parameters: {"id"=>"KGDMXK", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'KGDMXK')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 66ms (View: 0, DB: 8) | 200 OK [http://localhost/scan/KGDMXK?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 12:41:23) [GET]
  Parameters: {"id"=>"KGDMXK", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'KGDMXK')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 45 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 45 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 45 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 45 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 45 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 45 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 101ms (View: 0, DB: 8) | 200 OK [http://localhost/scan/KGDMXK?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 12:42:04) [GET]
  Parameters: {"id"=>"P100100000043", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (1.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000043')) [0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 103ms (View: 0, DB: 10) | 200 OK [http://localhost/scan/P100100000043?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 12:48:28) [GET]
  Parameters: {"id"=>"P100100000043", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'P100100000043')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 95ms (View: 0, DB: 7) | 200 OK [http://localhost/scan/P100100000043?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 13:07:24) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 69ms (View: 68, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:07:53) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/demographics]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:08:34) [GET]
  Parameters: {"id"=>"44"}
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/demographics/44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:08:43) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:34:29) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:45:09) [GET]
  Parameters: {"patient_id"=>"44user_id=1"}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 130ms (View: 57, DB: 4) | 200 OK [http://localhost/demographics?patient_id=44user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:45:26) [GET]
  Parameters: {"patient_id"=>"44user_id=1"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

RuntimeError (--- 
):
  app/controllers/core_patient_registration_controller.rb:172:in `demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.6ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:45:39) [GET]
  Parameters: {"patient_id"=>"44user_id=1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

RuntimeError (--- !ruby/object:CorePerson 
attributes: 
  death_date: 
  cause_of_death: 
  voided: "0"
  person_id: "44"
  birthdate_estimated: "1"
  changed_by: "1"
  voided_by: 
  birthdate: "1977-07-01"
  dead: "0"
  uuid: f45b53ff-4385-11e2-aa70-30f9edafb6df
  date_voided: 
  creator: "1"
  date_created: 2012-12-11 11:28:58
  void_reason: 
  gender: F
  date_changed: 2012-12-11 11:28:58
attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:172:in `demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.8ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:45:48) [GET]
  Parameters: {"id"=>"44user_id=1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

RuntimeError (--- !ruby/object:CorePerson 
attributes: 
  death_date: 
  cause_of_death: 
  voided: "0"
  person_id: "44"
  birthdate_estimated: "1"
  changed_by: "1"
  voided_by: 
  birthdate: "1977-07-01"
  dead: "0"
  uuid: f45b53ff-4385-11e2-aa70-30f9edafb6df
  date_voided: 
  creator: "1"
  date_created: 2012-12-11 11:28:58
  void_reason: 
  gender: F
  date_changed: 2012-12-11 11:28:58
attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:172:in `demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (59.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:45:53) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

RuntimeError (--- !ruby/object:CorePerson 
attributes: 
  death_date: 
  cause_of_death: 
  voided: "0"
  person_id: "44"
  birthdate_estimated: "1"
  changed_by: "1"
  voided_by: 
  birthdate: "1977-07-01"
  dead: "0"
  uuid: f45b53ff-4385-11e2-aa70-30f9edafb6df
  date_voided: 
  creator: "1"
  date_created: 2012-12-11 11:28:58
  void_reason: 
  gender: F
  date_changed: 2012-12-11 11:28:58
attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:172:in `demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:45:58) [GET]
  Parameters: {"id"=>"44user_id=1"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

RuntimeError (--- !ruby/object:CorePerson 
attributes: 
  death_date: 
  cause_of_death: 
  voided: "0"
  person_id: "44"
  birthdate_estimated: "1"
  changed_by: "1"
  voided_by: 
  birthdate: "1977-07-01"
  dead: "0"
  uuid: f45b53ff-4385-11e2-aa70-30f9edafb6df
  date_voided: 
  creator: "1"
  date_created: 2012-12-11 11:28:58
  void_reason: 
  gender: F
  date_changed: 2012-12-11 11:28:58
attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:172:in `demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:46:05) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

RuntimeError (--- !ruby/object:CorePerson 
attributes: 
  death_date: 
  cause_of_death: 
  voided: "0"
  person_id: "44"
  birthdate_estimated: "1"
  changed_by: "1"
  voided_by: 
  birthdate: "1977-07-01"
  dead: "0"
  uuid: f45b53ff-4385-11e2-aa70-30f9edafb6df
  date_voided: 
  creator: "1"
  date_created: 2012-12-11 11:28:58
  void_reason: 
  gender: F
  date_changed: 2012-12-11 11:28:58
attributes_cache: {}

):
  app/controllers/core_patient_registration_controller.rb:172:in `demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (64.8ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:46:20) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCorePersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

RuntimeError (--- 
attributes: 
  cell phone number: ""
  nationality: ""
  office phone number: ""
  occupation: ""
  home phone number: ""
patient_id: 44
patient: 
  identifiers: 
    national id: M41G5V
names: 
  first name: Jane
  middle name: 
  maiden name: 
  last name: Banda
birth date: ??/???/1977
addresses: 
  home village: ""
  ancestral traditional authority: ""
  current district: ""
  landmark or plot number: ""
  current residence: ""
  district of origin: ""
gender: F
birthdate estimated: "1"
):
  app/controllers/core_patient_registration_controller.rb:172:in `demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (56.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:47:44) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 25ms (View: 5, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:50:41) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 33ms (View: 10, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:50:59) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 89ms (View: 13, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:51:11) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 36ms (View: 14, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:51:28) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 68ms (View: 45, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:52:06) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 37ms (View: 15, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:52:18) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 30ms (View: 11, DB: 2) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:53:15) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 83ms (View: 15, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:53:39) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 40ms (View: 17, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:53:53) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 70ms (View: 50, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:54:04) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 38ms (View: 15, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:54:18) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 38ms (View: 14, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:54:30) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 71ms (View: 14, DB: 2) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:54:48) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 41ms (View: 15, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:55:17) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 69ms (View: 47, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:55:43) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 30ms (View: 12, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:55:51) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 40ms (View: 18, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:57:00) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 80ms (View: 12, DB: 2) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:57:14) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 30ms (View: 12, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:57:32) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 76ms (View: 54, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:57:42) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 39ms (View: 14, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:57:50) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 38ms (View: 16, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:57:57) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 80ms (View: 12, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:58:19) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 30ms (View: 12, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:58:45) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 76ms (View: 52, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:59:05) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 34ms (View: 12, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:59:44) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 33ms (View: 16, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 13:59:56) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 76ms (View: 14, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:00:26) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 36ms (View: 15, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:00:46) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 80ms (View: 57, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:00:53) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 35ms (View: 12, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:00:59) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 40ms (View: 15, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:01:05) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 84ms (View: 14, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:01:14) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 34ms (View: 10, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:01:20) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 67ms (View: 48, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:01:48) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 33ms (View: 16, DB: 2) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:01:58) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 31ms (View: 11, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:02:10) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 85ms (View: 13, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:02:27) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 32ms (View: 14, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:02:37) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 74ms (View: 51, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:03:11) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 34ms (View: 10, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:03:21) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 31ms (View: 11, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:04:34) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 88ms (View: 13, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:04:52) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 36ms (View: 17, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:05:06) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 67ms (View: 51, DB: 3) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:05:21) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 33ms (View: 11, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:05:25) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 23ms (View: 8, DB: 2) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:05:26) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 61ms (View: 10, DB: 4) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:05:41) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Completed in 38ms (View: 14, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:07:27) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 84ms (View: 62, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:07:34) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 43ms (View: 24, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:08:06) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 92ms (View: 69, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 14:08:08) [GET]
  Parameters: {"id"=>"M41G5V"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'M41G5V')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 78ms (View: 0, DB: 7) | 200 OK [http://localhost/scan/M41G5V]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:09:48) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
ERROR: compiling _run_rhtml_app47views47core_patient_registration47demographics46rhtml RAISED compile error
/var/www/components/core_patient_registration/app/views/core_patient_registration/demographics.rhtml:18: syntax error, unexpected ';', expecting ')'
...onal_id}" : "/select" ).to_s); @output_buffer.concat "'\">\n...
                              ^
Function body:           def _run_rhtml_app47views47core_patient_registration47demographics46rhtml(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<table width=\"100%\" style=\"margin: 0px;\" border=\"0\" cellspacing=\"0\">\n  <tr>\n    <th style=\"font-size: 1.5em; background-color: #666; color: #eee; padding: 20px;\">\n      Edit Demographics for "


; @output_buffer.concat(( @patient.name if !@patient.nil? ).to_s); @output_buffer.concat "\n    </th>\n  </tr>\n  <tr>\n    <td style=\"background-color: #999; padding: 5px;\">\n      <div style=\"height: 38em; background-color: #fff; overflow: auto;\">\n        \n      </div>\n    </td>\n  </tr>\n  <tr>\n    <td style=\"background-color: #666;\">\n      <div style=\"height: 4.8em;\">\n        <button class=\"green\" style=\"float: right; margin: 8px; width: 150px;\"\n                onclick=\"window.location='"













; @output_buffer.concat(( (!@patient.nil? ? "/scan/#{@patient.national_id}" : "/select" ).to_s); @output_buffer.concat "'\">\n          <span>\n            Finish\n          </span>\n        </button>\n      </div>\n    </td>\n  </tr>\n</table>"







; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /var/www/components/core_patient_registration/app/views/core_patient_registration/demographics.rhtml:29:in `compile!'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/renderable.rb:61:in `compile'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/renderable.rb:28:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/template.rb:205:in `render_template'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:265:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:348:in `_render_with_layout'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_view/base.rb:262:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1250:in `render_for_file'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:945:in `render_without_benchmark'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1326:in `default_render'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:617:in `call_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/flash.rb:146:in `perform_action'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `send'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:532:in `process_without_filters'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/filters.rb:606:in `process'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:391:in `process'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/base.rb:386:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/routing/route_set.rb:437:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:121:in `_call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:29:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:29:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:9:in `cache'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/query_cache.rb:28:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/activerecord-2.3.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/string_coercion.rb:25:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/head.rb:9:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/methodoverride.rb:24:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/params_parser.rb:15:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/session/cookie_store.rb:93:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/failsafe.rb:26:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `synchronize'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/rack-1.0.1/lib/rack/lock.rb:11:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:114:in `call'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/reloader.rb:34:in `run'
/home/chimwemwe/.rvm/gems/ruby-1.8.7-p370@tutorials/gems/actionpack-2.3.5/lib/action_controller/dispatcher.rb:108:in `call'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

ActionView::TemplateError (compile error
/var/www/components/core_patient_registration/app/views/core_patient_registration/demographics.rhtml:18: syntax error, unexpected ';', expecting ')'
...onal_id}" : "/select" ).to_s); @output_buffer.concat "'\">\n...
                              ^) on line #18 of app/views/core_patient_registration/demographics.rhtml:
15:     <td style="background-color: #666;">
16:       <div style="height: 4.8em;">
17:         <button class="green" style="float: right; margin: 8px; width: 150px;"
18:                 onclick="window.location='<%= (!@patient.nil? ? "/scan/#{@patient.national_id}" : "/select" %>'">
19:           <span>
20:             Finish
21:           </span>

    app/views/core_patient_registration/demographics.rhtml:29:in `compile!'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (25.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:10:17) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 97ms (View: 28, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 14:10:20) [GET]
  Parameters: {"id"=>"M41G5V"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'M41G5V')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 95ms (View: 7, DB: 8) | 200 OK [http://localhost/scan/M41G5V]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:10:30) [GET]
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 28ms (View: 5, DB: 4) | 200 OK [http://localhost/demographics]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:10:33) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:10:41) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 79ms (View: 59, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:11:16) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 55ms (View: 27, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:11:20) [GET]
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 20ms (View: 5, DB: 2) | 200 OK [http://localhost/demographics]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:12:25) [GET]
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 32ms (View: 8, DB: 3) | 200 OK [http://localhost/demographics]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:12:34) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 53ms (View: 29, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:17:45) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 84ms (View: 31, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:20:17) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 81ms (View: 62, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:20:30) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 57ms (View: 28, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:20:40) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 93ms (View: 71, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:20:50) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 56ms (View: 31, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:20:59) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 103ms (View: 27, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:21:07) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 60ms (View: 37, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:21:14) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 47ms (View: 26, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:21:30) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 87ms (View: 64, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:21:41) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 53ms (View: 24, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:21:51) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 89ms (View: 66, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:21:58) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 58ms (View: 37, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:22:23) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 105ms (View: 33, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:22:33) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 98ms (View: 75, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 14:22:38) [GET]
  Parameters: {"id"=>"M41G5V"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'M41G5V')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 61ms (View: 0, DB: 9) | 200 OK [http://localhost/scan/M41G5V]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:22:45) [GET]
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 58ms (View: 5, DB: 2) | 200 OK [http://localhost/demographics]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:22:47) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:23:04) [GET]
  [4;36;1mCorePerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 36ms (View: 7, DB: 3) | 200 OK [http://localhost/demographics]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:23:10) [GET]
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 29ms (View: 10, DB: 4) | 200 OK [http://localhost/demographics]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:23:13) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:23:18) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:23:23) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:23:33) [GET]
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 26ms (View: 11, DB: 2) | 200 OK [http://localhost/demographics]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:23:35) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:23:40) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 44ms (View: 42, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:24:00) [GET]
  [4;35;1mCorePerson Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 33ms (View: 11, DB: 3) | 200 OK [http://localhost/demographics]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:24:06) [GET]
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 33ms (View: 9, DB: 3) | 200 OK [http://localhost/demographics]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:24:12) [GET]
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (8.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 89ms (View: 10, DB: 10) | 200 OK [http://localhost/demographics]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:24:14) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:24:18) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:24:53) [GET]
  [4;36;1mCorePerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 31ms (View: 11, DB: 3) | 200 OK [http://localhost/demographics]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:24:57) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:25:01) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:25:07) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 51ms (View: 28, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:28:07) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 95ms (View: 72, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:28:18) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 59ms (View: 36, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:28:57) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 97ms (View: 24, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:29:19) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 47ms (View: 24, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:29:46) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 69ms (View: 42, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:30:08) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 96ms (View: 70, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:30:24) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 64ms (View: 35, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:30:46) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 106ms (View: 29, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:30:58) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 43ms (View: 24, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 14:31:02) [GET]
  Parameters: {"id"=>"M41G5V"}
  [4;35;1mCorePerson Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'M41G5V')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 56ms (View: 0, DB: 8) | 200 OK [http://localhost/scan/M41G5V]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 14:31:10) [GET]
  Parameters: {"id"=>"M41G5V"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'M41G5V')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 96ms (View: 0, DB: 7) | 200 OK [http://localhost/scan/M41G5V]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:31:15) [GET]
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 28ms (View: 7, DB: 4) | 200 OK [http://localhost/demographics]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 14:31:18) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:31:31) [GET]
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 68ms (View: 7, DB: 3) | 200 OK [http://localhost/demographics]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:32:02) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 44ms (View: 23, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:32:58) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 103ms (View: 84, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:33:22) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 54ms (View: 30, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:33:32) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 95ms (View: 29, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:33:45) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 88ms (View: 64, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:34:02) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 56ms (View: 32, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:34:08) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 100ms (View: 76, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:34:27) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 57ms (View: 38, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:34:51) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 105ms (View: 29, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:35:06) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 58ms (View: 34, DB: 6) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:35:23) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 47ms (View: 27, DB: 5) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 14:35:31) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 113ms (View: 86, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:11:30) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 65ms (View: 42, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:11:40) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 62ms (View: 42, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:11:53) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 116ms (View: 47, DB: 9) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:12:36) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 108ms (View: 82, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:13:29) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (8.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 101ms (View: 69, DB: 15) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:13:52) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 100ms (View: 79, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:14:03) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 75ms (View: 44, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:14:22) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 121ms (View: 46, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:20:30) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 117ms (View: 92, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:23:25) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (6.4ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 101ms (View: 76, DB: 13) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:23:58) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 112ms (View: 83, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:24:23) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 79ms (View: 48, DB: 9) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:24:50) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 67ms (View: 45, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:24:59) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (7.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 122ms (View: 44, DB: 13) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 15:26:03) [GET]
  Parameters: {"id"=>"M41G5V"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'M41G5V')) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 94ms (View: 0, DB: 8) | 200 OK [http://localhost/scan/M41G5V]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:28:51) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 105ms (View: 79, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:29:27) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 77ms (View: 55, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:29:44) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 62ms (View: 39, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:30:02) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 109ms (View: 42, DB: 9) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:32:12) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;35;1mCorePerson Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 120ms (View: 89, DB: 10) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 15:39:30) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 127ms (View: 126, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:48:30) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 90ms (View: 45, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 15:48:32) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Redirected to http://localhost:3003/scan/M41G5V?user=1
Completed in 74ms (DB: 5) | 302 Found [http://localhost/edit_demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 15:48:32) [GET]
  Parameters: {"id"=>"M41G5V", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'M41G5V')) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 91ms (View: 0, DB: 7) | 200 OK [http://localhost/scan/M41G5V?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 15:48:37) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Redirected to http://localhost:3003/scan/M41G5V?user=1
Completed in 35ms (DB: 5) | 302 Found [http://localhost/edit_demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 15:48:37) [GET]
  Parameters: {"id"=>"M41G5V", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'M41G5V')) [0m
  [4;35;1mCorePatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 93ms (View: 0, DB: 8) | 200 OK [http://localhost/scan/M41G5V?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 15:48:54) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Redirected to http://localhost:3003/scan/M41G5V?user=1
Completed in 34ms (DB: 5) | 302 Found [http://localhost/edit_demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 15:48:54) [GET]
  Parameters: {"id"=>"M41G5V", "user"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'M41G5V')) [0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 95ms (View: 0, DB: 7) | 200 OK [http://localhost/scan/M41G5V?user=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:49:45) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 100ms (View: 72, DB: 10) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 15:49:46) [GET]
  Parameters: {"user_id"=>"1", "field"=>"Jane", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 28ms (View: 11, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=Jane]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 15:49:47) [POST]
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (64.2ms)
Rendered rescues/_request_and_response (1.6ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 15:49:52) [POST]
  [4;35;1mCorePerson Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 15:49:54) [POST]
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (26.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:54:31) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 101ms (View: 80, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 15:54:44) [GET]
  Parameters: {"user_id"=>"1", "field"=>"Jane", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 29ms (View: 13, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=Jane]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:55:10) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 105ms (View: 84, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 15:55:12) [GET]
  Parameters: {"user_id"=>"1", "field"=>"middle name", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 26ms (View: 10, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=middle%20name]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:56:04) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 117ms (View: 45, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 15:56:06) [GET]
  Parameters: {"user_id"=>"1", "field"=>"middle_name", "id"=>"44"}
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 72ms (View: 46, DB: 4) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=middle_name]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:56:11) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 64ms (View: 40, DB: 9) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 15:56:13) [GET]
  Parameters: {"user_id"=>"1", "field"=>"current_district", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 64ms (View: 10, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=current_district]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:56:17) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 60ms (View: 37, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 15:56:29) [GET]
  Parameters: {"user_id"=>"1", "field"=>"cell_phone_number", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 29ms (View: 11, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=cell_phone_number]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 15:56:32) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 97ms (View: 76, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:06:55) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 70ms (View: 44, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:06:57) [GET]
  Parameters: {"user_id"=>"1", "field"=>"first_name", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 33ms (View: 12, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=first_name]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:07:00) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 107ms (View: 82, DB: 10) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:07:02) [GET]
  Parameters: {"user_id"=>"1", "field"=>"middle_name", "id"=>"44"}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 25ms (View: 7, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=middle_name]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:02) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (60.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:05) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;36;1mCorePerson Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:06) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.8ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:07) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (61.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:08) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:09) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:09) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:07:16) [GET]
  Parameters: {"user_id"=>"1", "field"=>"maiden_name", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 24ms (View: 9, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=maiden_name]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:17) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (20.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:21) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (26.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:22) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (61.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:23) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:07:24) [POST]
  Parameters: {"person"=>{"patient"=>""}, "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:188:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:09:27) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 107ms (View: 83, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:09:30) [GET]
  Parameters: {"user_id"=>"1", "field"=>"maiden_name", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 28ms (View: 11, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=maiden_name]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:09:35) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 116ms (View: 52, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:09:37) [GET]
  Parameters: {"user_id"=>"1", "field"=>"current_district", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 25ms (View: 9, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=current_district]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:09:40) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 104ms (View: 41, DB: 9) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:09:46) [GET]
  Parameters: {"user_id"=>"1", "field"=>"middle_name", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 61ms (View: 45, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=middle_name]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:09:48) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 64ms (View: 42, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:09:50) [GET]
  Parameters: {"user_id"=>"1", "field"=>"first_name", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 65ms (View: 8, DB: 4) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=first_name]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:09:52) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 58ms (View: 35, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:09:54) [GET]
  Parameters: {"user_id"=>"1", "field"=>"last_name", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 27ms (View: 10, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=last_name]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:09:57) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 93ms (View: 73, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:09:58) [GET]
  Parameters: {"user_id"=>"1", "field"=>"maiden_name", "id"=>"44"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 25ms (View: 9, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=maiden_name]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:10:03) [POST]
  Parameters: {"person"=>{"names"=>{"family_name2"=>""}, "patient"=>""}, "id"=>"44"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:193:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (63.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:10:36) [GET]
  Parameters: {"user_id"=>"1", "field"=>"maiden_name", "id"=>"44"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 23ms (View: 7, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=maiden_name]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:11:42) [GET]
  Parameters: {"user_id"=>"1", "field"=>"maiden_name", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 39ms (View: 15, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=maiden_name]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:11:59) [GET]
  Parameters: {"user_id"=>"1", "field"=>"maiden_name", "id"=>"44"}
  [4;36;1mCorePerson Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 80ms (View: 16, DB: 4) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=maiden_name]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:12:39) [GET]
  Parameters: {"user_id"=>"1", "field"=>"maiden_name", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 38ms (View: 11, DB: 4) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=maiden_name]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:12:42) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 99ms (View: 78, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:15:22) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 104ms (View: 82, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:15:27) [GET]
  Parameters: {"user_id"=>"1", "field"=>"birth_date", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 30ms (View: 13, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=birth_date]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:15:31) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 101ms (View: 82, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:19:54) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 119ms (View: 96, DB: 9) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:19:56) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 99ms (View: 78, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:29:03) [GET]
  Parameters: {"user_id"=>"1", "id"=>"44"}
  [4;36;1mCorePerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 79ms (View: 52, DB: 9) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 16:29:22) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 73ms (View: 72, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:29:26) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 75ms (View: 45, DB: 11) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:29:30) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 68ms (View: 45, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:35:04) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (--- 
) on line #94 of app/views/core_patient_registration/demographics.rhtml:
91:             names = names - ["occupation"]
92:           end
93: 
94:           raise @show_nationality.to_yaml
95:           
96:           if !@show_nationality
97:             names = names - ["nationality"]

    app/views/core_patient_registration/demographics.rhtml:94:in `_run_rhtml_app47views47core_patient_registration47demographics46rhtml'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (66.5ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:35:43) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (--- false
) on line #94 of app/views/core_patient_registration/demographics.rhtml:
91:             names = names - ["occupation"]
92:           end
93: 
94:           raise @show_nationality.to_yaml
95:           
96:           if !@show_nationality
97:             names = names - ["nationality"]

    app/views/core_patient_registration/demographics.rhtml:94:in `_run_rhtml_app47views47core_patient_registration47demographics46rhtml'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (67.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:35:56) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 124ms (View: 87, DB: 10) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 16:36:40) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 72ms (View: 71, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:36:44) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 74ms (View: 43, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:38:21) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1", "field"=>"birth_date"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 34ms (View: 16, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=birth_date]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:38:24) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 98ms (View: 74, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:39:07) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 67ms (View: 38, DB: 7) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:44:14) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 69ms (View: 42, DB: 8) | 200 OK [http://localhost/demographics/44?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:44:17) [GET]
  Parameters: {"id"=>"44", "user_id"=>"1", "field"=>"first_name"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 67ms (View: 15, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=1&field=first_name]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:44:34) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "names"=>{"given_name"=>"Tina"}}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m

ActiveRecord::RecordNotFound (Couldn't find CorePerson without an ID):
  app/controllers/core_patient_registration_controller.rb:234:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.4ms)
Rendered rescues/_request_and_response (1.9ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:45:10) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "names"=>{"given_name"=>"Tina"}}}

RuntimeError (--- !map:HashWithIndifferentAccess 
id: "44"
action: update_demographics
person_id: "44"
controller: core_patient_registration
person: !map:HashWithIndifferentAccess 
  patient: ""
  names: !map:HashWithIndifferentAccess 
    given_name: Tina
):
  app/controllers/core_patient_registration_controller.rb:234:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:47:13) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "names"=>{"given_name"=>"Tina"}}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePersonName Update (0.5ms)[0m   [0;1mUPDATE `person_name` SET `date_changed` = '2012-12-13 14:47:13', `given_name` = 'Tina' WHERE `person_name_id` = 41[0m
  [4;35;1mSQL (110.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Redirected to http://localhost:3003/scan/M41G5V?user=
Completed in 283ms (DB: 116) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-13 16:47:13) [GET]
  Parameters: {"id"=>"M41G5V", "user"=>""}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'M41G5V')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 44 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 54ms (View: 0, DB: 8) | 200 OK [http://localhost/scan/M41G5V?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:48:04) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "names"=>{"given_name"=>"Tinashe"}}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePersonName Update (0.2ms)[0m   [0mUPDATE `person_name` SET `date_changed` = '2012-12-13 14:48:04', `given_name` = 'Tinashe' WHERE `person_name_id` = 41[0m
  [4;36;1mSQL (81.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Redirected to http://localhost:3003/demographics/M41G5V?user=
Completed in 168ms (DB: 87) | 302 Found [http://localhost/update_demographics/44]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:48:05) [GET]
  Parameters: {"id"=>"M41G5V", "user"=>""}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 0) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
Completed in 23ms (View: 3, DB: 3) | 200 OK [http://localhost/demographics/M41G5V?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:48:25) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "names"=>{"given_name"=>"Tinashe"}}}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePersonName Update (0.2ms)[0m   [0;1mUPDATE `person_name` SET `date_changed` = '2012-12-13 14:48:25' WHERE `person_name_id` = 41[0m
  [4;35;1mSQL (60.8ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 85ms (DB: 64) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:48:25) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 64ms (View: 37, DB: 9) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:49:28) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"first_name"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 61ms (View: 10, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=first_name]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:49:37) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "names"=>{"given_name"=>"Rudorwashe"}}}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePersonName Update (0.7ms)[0m   [0mUPDATE `person_name` SET `date_changed` = '2012-12-13 14:49:37', `given_name` = 'Rudorwashe' WHERE `person_name_id` = 41[0m
  [4;36;1mSQL (102.3ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 131ms (DB: 106) | 302 Found [http://localhost/update_demographics/44]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:49:37) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.9ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (8.7ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 107ms (View: 71, DB: 18) | 200 OK [http://localhost/demographics/44?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:49:56) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"middle_name"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 26ms (View: 9, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=middle_name]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:49:59) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "names"=>{"middle_name"=>"Unknown"}}}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePersonName Update (0.4ms)[0m   [0;1mUPDATE `person_name` SET `date_changed` = '2012-12-13 14:49:59', `middle_name` = 'Unknown' WHERE `person_name_id` = 41[0m
  [4;35;1mSQL (60.4ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 84ms (DB: 64) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:49:59) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 68ms (View: 42, DB: 7) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:50:09) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"gender"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 62ms (View: 9, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=gender]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:50:12) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "gender"=>"Male"}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `gender` = 'Male', `date_changed` = '2012-12-13 14:50:12' WHERE `person_id` = 44[0m
  [4;35;1mSQL (91.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 113ms (DB: 94) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:50:12) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 106ms (View: 80, DB: 7) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:51:16) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 119ms (View: 84, DB: 8) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:51:18) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 65ms (View: 39, DB: 7) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:52:07) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 116ms (View: 44, DB: 7) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:52:09) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 101ms (View: 38, DB: 8) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:52:15) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 107ms (View: 78, DB: 8) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:52:37) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (--- Male
) on line #26 of app/views/core_patient_registration/demographics.rhtml:
23:             names = names - ["middle name"]
24:           end
25: 
26:           raise demographics["gender"].to_s.to_yaml
27:           
28:           if !@show_maiden_name 
29:             names = names - ["maiden name"]

    app/views/core_patient_registration/demographics.rhtml:26:in `_run_rhtml_app47views47core_patient_registration47demographics46rhtml'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (27.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:52:45) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (--- Male
) on line #26 of app/views/core_patient_registration/demographics.rhtml:
23:             names = names - ["middle name"]
24:           end
25: 
26:           raise demographics["gender"].to_s.to_yaml
27:           
28:           if !@show_maiden_name 
29:             names = names - ["maiden name"]

    app/views/core_patient_registration/demographics.rhtml:26:in `_run_rhtml_app47views47core_patient_registration47demographics46rhtml'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (66.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:55:02) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (--- 77
) on line #26 of app/views/core_patient_registration/demographics.rhtml:
23:             names = names - ["middle name"]
24:           end
25: 
26:           raise demographics["gender"].to_s[0].to_yaml
27:           
28:           if !@show_maiden_name 
29:             names = names - ["maiden name"]

    app/views/core_patient_registration/demographics.rhtml:26:in `_run_rhtml_app47views47core_patient_registration47demographics46rhtml'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (65.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:55:20) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (--- "77"
) on line #26 of app/views/core_patient_registration/demographics.rhtml:
23:             names = names - ["middle name"]
24:           end
25: 
26:           raise demographics["gender"].to_s[0].to_s.to_yaml
27:           
28:           if !@show_maiden_name 
29:             names = names - ["maiden name"]

    app/views/core_patient_registration/demographics.rhtml:26:in `_run_rhtml_app47views47core_patient_registration47demographics46rhtml'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (26.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:55:59) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (wrong number of arguments (1 for 2)) on line #26 of app/views/core_patient_registration/demographics.rhtml:
23:             names = names - ["middle name"]
24:           end
25: 
26:           raise demographics["gender"].to_s.sub(1).to_yaml
27:           
28:           if !@show_maiden_name 
29:             names = names - ["maiden name"]

    app/views/core_patient_registration/demographics.rhtml:26:in `sub'
    app/views/core_patient_registration/demographics.rhtml:26:in `_run_rhtml_app47views47core_patient_registration47demographics46rhtml'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (65.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:56:14) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (--- M
) on line #26 of app/views/core_patient_registration/demographics.rhtml:
23:             names = names - ["middle name"]
24:           end
25: 
26:           raise demographics["gender"].to_s[0,1].to_yaml
27:           
28:           if !@show_maiden_name 
29:             names = names - ["maiden name"]

    app/views/core_patient_registration/demographics.rhtml:26:in `_run_rhtml_app47views47core_patient_registration47demographics46rhtml'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (29.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:56:27) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 130ms (View: 94, DB: 10) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:56:53) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 117ms (View: 82, DB: 9) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:56:56) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"gender"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 26ms (View: 9, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=gender]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:56:58) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "gender"=>"Female"}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.2ms)[0m   [0;1mUPDATE `person` SET `gender` = 'Female', `date_changed` = '2012-12-13 14:56:58' WHERE `person_id` = 44[0m
  [4;35;1mSQL (74.0ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 95ms (DB: 78) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 16:56:58) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 106ms (View: 41, DB: 7) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 16:57:07) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"current_district"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 29ms (View: 13, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=current_district]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-13 16:57:09) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;36;1mCoreRegion Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (14.0ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (12.7ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 68ms (View: 0, DB: 30) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-13 16:57:11) [GET]
  Parameters: {"filter_value"=>"Dowa ", "search_string"=>""}
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.2ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Dowa ') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (30.8ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 12) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 52ms (View: 0, DB: 32) | 200 OK [http://localhost/traditional_authority?filter_value=Dowa%20&search_string=]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-13 16:57:13) [GET]
  Parameters: {"filter_value"=>"Mponela Urban", "search_string"=>""}
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Mponela Urban') LIMIT 1[0m
  [4;36;1mCoreVillage Load (25.9ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 100) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 57ms (View: 1, DB: 28) | 200 OK [http://localhost/village?filter_value=Mponela%20Urban&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:57:21) [POST]
  Parameters: {"id"=>"44", "CURRENT AREA OF RESIDENCE"=>"Mponela Urban", "person_id"=>"44", "CURRENT REGION"=>"Central Region", "person"=>{"patient"=>"", "addresses"=>{"city_village"=>"Chinguwo", "address2"=>"Dowa ", "address1"=>"Chauma"}}}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.update_attributes):
  app/models/core_person.rb:733:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (61.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:58:39) [POST]
  Parameters: {"id"=>"44", "CURRENT AREA OF RESIDENCE"=>"Mponela Urban", "person_id"=>"44", "CURRENT REGION"=>"Central Region", "person"=>{"patient"=>"", "addresses"=>{"city_village"=>"Chinguwo", "address2"=>"Dowa ", "address1"=>"Chauma"}}}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

RuntimeError (--- !map:HashWithIndifferentAccess 
city_village: Chinguwo
address1: Chauma
address2: "Dowa "
):
  app/models/core_person.rb:731:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 16:59:14) [POST]
  Parameters: {"id"=>"44", "CURRENT AREA OF RESIDENCE"=>"Mponela Urban", "person_id"=>"44", "CURRENT REGION"=>"Central Region", "person"=>{"patient"=>"", "addresses"=>{"city_village"=>"Chinguwo", "address2"=>"Dowa ", "address1"=>"Chauma"}}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.update_attributes):
  app/models/core_person.rb:735:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:00:34) [POST]
  Parameters: {"id"=>"44", "CURRENT AREA OF RESIDENCE"=>"Mponela Urban", "person_id"=>"44", "CURRENT REGION"=>"Central Region", "person"=>{"patient"=>"", "addresses"=>{"city_village"=>"Chinguwo", "address2"=>"Dowa ", "address1"=>"Chauma"}}}
  [4;35;1mCorePerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.update_attributes):
  app/models/core_person.rb:735:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (67.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:01:38) [POST]
  Parameters: {"id"=>"44", "CURRENT AREA OF RESIDENCE"=>"Mponela Urban", "person_id"=>"44", "CURRENT REGION"=>"Central Region", "person"=>{"patient"=>"", "addresses"=>{"city_village"=>"Chinguwo", "address2"=>"Dowa ", "address1"=>"Chauma"}}}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 22ms (DB: 3) | 302 Found [http://localhost/update_demographics/44]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:01:38) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 107ms (View: 81, DB: 9) | 200 OK [http://localhost/demographics/44?user=]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:01:44) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"home_district"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 28ms (View: 11, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=home_district]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-13 17:01:46) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 9ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-13 17:01:48) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.3ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.4ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 49ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-13 17:01:49) [GET]
  Parameters: {"filter_value"=>"Chiseka", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Chiseka') LIMIT 1[0m
  [4;35;1mCoreVillage Load (21.8ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 115) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 40ms (View: 0, DB: 23) | 200 OK [http://localhost/village?filter_value=Chiseka&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:01:51) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "REGION OF ORIGIN"=>"Central Region", "person"=>{"patient"=>"", "addresses"=>{"neighborhood_cell"=>"Austeni", "subregion"=>"Lilongwe", "county_district"=>"Chiseka"}}}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 21ms (DB: 3) | 302 Found [http://localhost/update_demographics/44]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:01:51) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 104ms (View: 82, DB: 7) | 200 OK [http://localhost/demographics/44?user=]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:03:29) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"current_district"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 29ms (View: 11, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=current_district]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-13 17:03:32) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (8.8ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 51ms (View: 1, DB: 10) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-13 17:03:34) [GET]
  Parameters: {"filter_value"=>"Kasungu", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.3ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Kasungu') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.4ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 2) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 14ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Kasungu&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-13 17:03:36) [GET]
  Parameters: {"filter_value"=>"Kasungu Boma", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Kasungu Boma') LIMIT 1[0m
  [4;35;1mCoreVillage Load (25.5ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 65) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 36ms (View: 0, DB: 27) | 200 OK [http://localhost/village?filter_value=Kasungu%20Boma&search_string=]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:03:40) [POST]
  Parameters: {"id"=>"44", "CURRENT AREA OF RESIDENCE"=>"Kasungu Boma", "person_id"=>"44", "CURRENT REGION"=>"Central Region", "person"=>{"patient"=>"", "addresses"=>{"city_village"=>"Chambala", "address2"=>"Kasungu", "address1"=>"Unknown"}}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (0.2ms)[0m   [0mINSERT INTO `person_address` (`date_created`, `date_voided`, `city_village`, `country`, `creator`, `region`, `person_id`, `voided`, `neighborhood_cell`, `subregion`, `postal_code`, `voided_by`, `latitude`, `longitude`, `void_reason`, `uuid`, `preferred`, `county_district`, `township_division`, `address1`, `address2`, `state_province`) VALUES('2012-12-13 15:03:40', NULL, 'Chambala', NULL, 1, NULL, 44, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '47c31993-4536-11e2-8441-30f9edafb6df', 0, NULL, NULL, 'Unknown', 'Kasungu', NULL)[0m
  [4;36;1mSQL (436.9ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 459ms (DB: 440) | 302 Found [http://localhost/update_demographics/44]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:03:41) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 104ms (View: 43, DB: 7) | 200 OK [http://localhost/demographics/44?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:03:49) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"landmark_or_plot_number"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 27ms (View: 11, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=landmark_or_plot_number]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-13 17:03:51) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-13 17:03:53) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 10ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-13 17:03:55) [GET]
  Parameters: {"filter_value"=>"Chitekwere", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.4ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Chitekwere') LIMIT 1[0m
  [4;35;1mCoreVillage Load (21.6ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 117) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 35ms (View: 0, DB: 23) | 200 OK [http://localhost/village?filter_value=Chitekwere&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:04:01) [POST]
  Parameters: {"id"=>"44", "CURRENT AREA OF RESIDENCE"=>"Chitekwere", "person_id"=>"44", "CURRENT REGION"=>"Central Region", "person"=>{"patient"=>"", "addresses"=>{"city_village"=>"Bango", "address2"=>"Lilongwe", "address1"=>"P/2394"}}}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePersonAddress Update (0.2ms)[0m   [0mUPDATE `person_address` SET `city_village` = 'Bango', `address2` = 'Lilongwe', `address1` = 'P/2394' WHERE `person_address_id` = 45[0m
  [4;36;1mSQL (95.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (27.0ms)[0m   [0mINSERT INTO `person_address` (`date_created`, `date_voided`, `city_village`, `country`, `creator`, `region`, `person_id`, `voided`, `neighborhood_cell`, `subregion`, `postal_code`, `voided_by`, `latitude`, `longitude`, `void_reason`, `uuid`, `preferred`, `county_district`, `township_division`, `address1`, `address2`, `state_province`) VALUES('2012-12-13 15:04:01', NULL, 'Bango', NULL, 1, NULL, 44, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '54326254-4536-11e2-8441-30f9edafb6df', 0, NULL, NULL, 'P/2394', 'Lilongwe', NULL)[0m
  [4;36;1mSQL (81.9ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 233ms (DB: 209) | 302 Found [http://localhost/update_demographics/44]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:04:01) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 107ms (View: 41, DB: 8) | 200 OK [http://localhost/demographics/44?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:04:08) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"home_district"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 67ms (View: 51, DB: 4) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=home_district]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-13 17:04:10) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-13 17:04:13) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.3ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (24.2ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 36ms (View: 0, DB: 26) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-13 17:04:15) [GET]
  Parameters: {"filter_value"=>"Area 13", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 13') LIMIT 1[0m
  [4;35;1mCoreVillage Load (21.6ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 132) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 31ms (View: 0, DB: 23) | 200 OK [http://localhost/village?filter_value=Area%2013&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:04:17) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "REGION OF ORIGIN"=>"Central Region", "person"=>{"patient"=>"", "addresses"=>{"neighborhood_cell"=>"Area 13", "subregion"=>"Lilongwe City", "county_district"=>"Area 13"}}}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;35;1mCorePersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePersonAddress Update (71.7ms)[0m   [0mUPDATE `person_address` SET `county_district` = 'Area 13', `subregion` = 'Lilongwe City', `neighborhood_cell` = 'Area 13' WHERE `person_address_id` = 45[0m
  [4;36;1mSQL (67.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAddress Create (0.5ms)[0m   [0mINSERT INTO `person_address` (`date_created`, `date_voided`, `city_village`, `country`, `creator`, `region`, `person_id`, `voided`, `neighborhood_cell`, `subregion`, `postal_code`, `voided_by`, `latitude`, `longitude`, `void_reason`, `uuid`, `preferred`, `county_district`, `township_division`, `address1`, `address2`, `state_province`) VALUES('2012-12-13 15:04:17', NULL, NULL, NULL, 1, NULL, 44, 0, 'Area 13', 'Lilongwe City', NULL, NULL, NULL, NULL, NULL, '5d6cb191-4536-11e2-8441-30f9edafb6df', 0, 'Area 13', NULL, NULL, NULL, NULL)[0m
  [4;36;1mSQL (40.6ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 207ms (DB: 184) | 302 Found [http://localhost/update_demographics/44]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:04:17) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 69ms (View: 42, DB: 8) | 200 OK [http://localhost/demographics/44?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:04:20) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"occupation"}
  [4;35;1mCorePerson Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 65ms (View: 10, DB: 5) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=occupation]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:04:23) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "occupation"=>"Craftsman"}}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

NoMethodError (undefined method `set_birthdate' for #<CorePerson:0x7f674a3f5df0>):
  app/models/core_person.rb:724:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (20.7ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:04:56) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "occupation"=>"Other"}}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

NoMethodError (undefined method `set_birthdate' for #<CorePerson:0x7f674a64e138>):
  app/models/core_person.rb:724:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:05:34) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "occupation"=>"Other"}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

RuntimeError (--- false
):
  app/models/core_person.rb:719:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (74.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:05:44) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "occupation"=>"Other"}}
  [4;36;1mCorePerson Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

RuntimeError (--- !map:HashWithIndifferentAccess 
occupation: Other
):
  app/models/core_person.rb:719:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (28.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:06:08) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "occupation"=>"Other"}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

RuntimeError (--- !map:HashWithIndifferentAccess {}

):
  app/models/core_person.rb:719:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:06:15) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "occupation"=>"Other"}}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

ActiveRecord::UnknownAttributeError (unknown attribute: occupation):
  app/models/core_person.rb:733:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (72.5ms)
Rendered rescues/_request_and_response (1.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:06:42) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "occupation"=>"Other"}}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

RuntimeError (--- !map:HashWithIndifferentAccess 
occupation: Other
):
  app/models/core_person.rb:731:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (23.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:08:10) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "occupation"=>"Other"}}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (12.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

ActiveRecord::UnknownAttributeError (unknown attribute: occupation):
  app/models/core_person.rb:733:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:09:02) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "occupation"=>"Other"}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.empty?):
  app/models/core_person.rb:737:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (65.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:09:49) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "occupation"=>"Other"}}
  [4;36;1mCorePerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 26ms (DB: 5) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:09:49) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 106ms (View: 82, DB: 7) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:10:56) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 119ms (View: 80, DB: 9) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:10:59) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"occupation"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 31ms (View: 13, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=occupation]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:11:04) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "attributes"=>{"occupation"=>"Teacher"}}}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (person_id = 44 AND person_attribute_type_id = 13) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (92.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`value`, `date_created`, `date_voided`, `creator`, `person_attribute_type_id`, `changed_by`, `person_id`, `voided`, `voided_by`, `void_reason`, `uuid`, `date_changed`) VALUES('Teacher', '2012-12-13 15:11:04', NULL, 1, 13, 1, 44, 0, NULL, NULL, '50622740-4537-11e2-8441-30f9edafb6df', '2012-12-13 15:11:04')[0m
  [4;35;1mSQL (89.7ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 217ms (DB: 187) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:11:05) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 115ms (View: 45, DB: 8) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:11:24) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"cell_phone_number"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 90ms (View: 69, DB: 5) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=cell_phone_number]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:11:28) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "attributes"=>{"cell_phone_number"=>"Unknown"}}}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;36;1mCorePersonAttributeType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (person_id = 44 AND person_attribute_type_id = 12) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (22.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`value`, `date_created`, `date_voided`, `creator`, `person_attribute_type_id`, `changed_by`, `person_id`, `voided`, `voided_by`, `void_reason`, `uuid`, `date_changed`) VALUES('Unknown', '2012-12-13 15:11:28', NULL, 1, 12, 1, 44, 0, NULL, NULL, '5ec4ad91-4537-11e2-8441-30f9edafb6df', '2012-12-13 15:11:28')[0m
  [4;35;1mSQL (61.8ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 122ms (DB: 89) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:11:29) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 113ms (View: 84, DB: 10) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:11:31) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"home_phone_number"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 25ms (View: 10, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=home_phone_number]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:11:34) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "attributes"=>{"home_phone_number"=>"N/A"}}}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;36;1mCorePersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (person_id = 44 AND person_attribute_type_id = 14) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (18.4ms)[0m   [0;1mINSERT INTO `person_attribute` (`value`, `date_created`, `date_voided`, `creator`, `person_attribute_type_id`, `changed_by`, `person_id`, `voided`, `voided_by`, `void_reason`, `uuid`, `date_changed`) VALUES('N/A', '2012-12-13 15:11:34', NULL, 1, 14, 1, 44, 0, NULL, NULL, '61d1dc88-4537-11e2-8441-30f9edafb6df', '2012-12-13 15:11:34')[0m
  [4;35;1mSQL (54.7ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 152ms (DB: 78) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:11:34) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 69ms (View: 41, DB: 8) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:11:36) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"office_phone_number"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 28ms (View: 10, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=office_phone_number]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:11:39) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "attributes"=>{"office_phone_number"=>"N/A"}}}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (person_id = 44 AND person_attribute_type_id = 15) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (14.9ms)[0m   [0;1mINSERT INTO `person_attribute` (`value`, `date_created`, `date_voided`, `creator`, `person_attribute_type_id`, `changed_by`, `person_id`, `voided`, `voided_by`, `void_reason`, `uuid`, `date_changed`) VALUES('N/A', '2012-12-13 15:11:39', NULL, 1, 15, 1, 44, 0, NULL, NULL, '652541de-4537-11e2-8441-30f9edafb6df', '2012-12-13 15:11:39')[0m
  [4;35;1mSQL (46.3ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 94ms (DB: 66) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:11:39) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 105ms (View: 42, DB: 9) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:11:44) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"maiden_name"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 26ms (View: 9, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=maiden_name]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:11:47) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "names"=>{"family_name2"=>"Unknown"}}}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePersonName Update (0.4ms)[0m   [0mUPDATE `person_name` SET `family_name2` = 'Unknown', `date_changed` = '2012-12-13 15:11:47' WHERE `person_name_id` = 41[0m
  [4;36;1mSQL (49.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 78ms (DB: 55) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:11:47) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 101ms (View: 76, DB: 8) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:11:51) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"last_name"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 25ms (View: 9, DB: 3) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=last_name]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:11:54) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"patient"=>"", "names"=>{"family_name"=>"Kamunga"}}}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePersonName Update (0.3ms)[0m   [0mUPDATE `person_name` SET `date_changed` = '2012-12-13 15:11:54', `family_name` = 'Kamunga' WHERE `person_name_id` = 41[0m
  [4;36;1mSQL (52.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/44?user=
Completed in 77ms (DB: 55) | 302 Found [http://localhost/update_demographics/44]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-13 17:11:54) [GET]
  Parameters: {"id"=>"44", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.9ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 44 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 44 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 44 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 44 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 44 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 116ms (View: 47, DB: 9) | 200 OK [http://localhost/demographics/44?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-13 17:11:58) [GET]
  Parameters: {"id"=>"44", "user_id"=>"", "field"=>"birth_date"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 27ms (View: 11, DB: 2) | 200 OK [http://localhost/edit_demographics/44?user_id=&field=birth_date]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:12:08) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"birth_month"=>"3", "patient"=>"", "birth_day"=>"Unknown", "age_estimate"=>"", "birth_year"=>"1986"}}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

NoMethodError (undefined method `set_birthdate' for #<CorePerson:0x7f674a504408>):
  app/models/core_person.rb:724:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-13 17:13:47) [POST]
  Parameters: {"id"=>"44", "person_id"=>"44", "person"=>{"birth_month"=>"3", "patient"=>"", "birth_day"=>"Unknown", "age_estimate"=>"", "birth_year"=>"1986"}}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 44) AND (person.voided = 0) [0m

NoMethodError (undefined method `birthdate=' for "1986":String):
  app/models/core_person.rb:236:in `set_birthdate'
  app/models/core_person.rb:724:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (65.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 17:15:11) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-13 17:15:15) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 37ms (View: 36, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-13 17:15:33) [POST]
  Parameters: {"person"=>{"birth_month"=>"4", "patient"=>"", "names"=>{"given_name"=>"Jean", "family_name"=>"Maigwa"}, "birth_day"=>"Unknown", "gender"=>"Female", "age_estimate"=>"", "birth_year"=>"1985"}}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.2ms)[0m   [0mINSERT INTO `person` (`date_created`, `date_voided`, `creator`, `changed_by`, `birthdate`, `voided`, `gender`, `death_date`, `cause_of_death`, `voided_by`, `void_reason`, `uuid`, `birthdate_estimated`, `dead`, `date_changed`) VALUES('2012-12-13 15:15:34', NULL, 1, 1, NULL, 0, 'F', NULL, NULL, NULL, NULL, 'f0e27f6b-4537-11e2-8441-30f9edafb6df', 0, 0, '2012-12-13 15:15:34')[0m
  [4;36;1mSQL (121.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m

NoMethodError (undefined method `set_birthdate' for #<Class:0x7f674a031ed0>):
  app/models/core_person.rb:172:in `create_from_form'
  app/models/core_person.rb:128:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW TABLES[0m
Rendered rescues/_trace (25.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-13 17:16:07) [POST]
  Parameters: {"person"=>{"birth_month"=>"4", "patient"=>"", "names"=>{"given_name"=>"Jean", "family_name"=>"Maigwa"}, "birth_day"=>"Unknown", "gender"=>"Female", "age_estimate"=>"", "birth_year"=>"1985"}}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (21.4ms)[0m   [0;1mINSERT INTO `person` (`date_created`, `date_voided`, `creator`, `changed_by`, `birthdate`, `voided`, `gender`, `death_date`, `cause_of_death`, `voided_by`, `void_reason`, `uuid`, `birthdate_estimated`, `dead`, `date_changed`) VALUES('2012-12-13 15:16:08', NULL, 1, 1, NULL, 0, 'F', NULL, NULL, NULL, NULL, '051a339c-4538-11e2-8441-30f9edafb6df', 0, 0, '2012-12-13 15:16:08')[0m
  [4;35;1mSQL (88.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW TABLES[0m

NoMethodError (undefined method `set_birthdate' for #<Class:0x7f674a297d78>):
  app/models/core_person.rb:172:in `create_from_form'
  app/models/core_person.rb:128:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
Rendered rescues/_trace (64.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-13 17:16:49) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 72ms (View: 72, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-13 17:16:53) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"given_name"=>"Jean", "family_name"=>"Maigwa"}, "age_estimate"=>"", "patient"=>"", "birth_day"=>"Unknown", "birth_month"=>"4", "birth_year"=>"1985"}}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (18.9ms)[0m   [0mINSERT INTO `person` (`gender`, `cause_of_death`, `birthdate`, `dead`, `uuid`, `birthdate_estimated`, `void_reason`, `changed_by`, `death_date`, `voided`, `creator`, `date_voided`, `date_created`, `voided_by`, `date_changed`) VALUES('F', NULL, NULL, 0, '209d3028-4538-11e2-8441-30f9edafb6df', 0, NULL, 1, NULL, 0, 1, NULL, '2012-12-13 15:16:54', NULL, '2012-12-13 15:16:54')[0m
  [4;36;1mSQL (91.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m

NoMethodError (undefined method `set_birthdate' for #<Class:0x7f7aab9c6be8>):
  app/models/core_person.rb:172:in `create_from_form'
  app/models/core_person.rb:128:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW TABLES[0m
Rendered rescues/_trace (57.6ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-13 17:17:57) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"given_name"=>"Jean", "family_name"=>"Maigwa"}, "age_estimate"=>"", "patient"=>"", "birth_day"=>"Unknown", "birth_month"=>"4", "birth_year"=>"1985"}}
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (0.8ms)[0m   [0;1mINSERT INTO `person` (`gender`, `cause_of_death`, `birthdate`, `dead`, `uuid`, `birthdate_estimated`, `void_reason`, `changed_by`, `death_date`, `voided`, `creator`, `date_voided`, `date_created`, `voided_by`, `date_changed`) VALUES('F', NULL, NULL, 0, '46b3035d-4538-11e2-8441-30f9edafb6df', 0, NULL, 1, NULL, 0, 1, NULL, '2012-12-13 15:17:58', NULL, '2012-12-13 15:17:58')[0m
  [4;35;1mSQL (65.6ms)[0m   [0mCOMMIT[0m

RuntimeError (--- &id001 !ruby/object:CorePerson 
attributes: 
  person_id: 73
  gender: F
  cause_of_death: 
  uuid: 46b3035d-4538-11e2-8441-30f9edafb6df
  dead: 0
  birthdate: 
  void_reason: 
  birthdate_estimated: 0
  changed_by: 1
  voided: 0
  death_date: 
  date_voided: 
  creator: 1
  voided_by: 
  date_created: 2012-12-13 15:17:58.115643 Z
  date_changed: 2012-12-13 15:17:58.115405 Z
attributes_cache: {}

changed_attributes: {}

errors: !ruby/object:ActiveRecord::Errors 
  base: *id001
  errors: !map:ActiveSupport::OrderedHash {}

new_record: false
new_record_before_save: true
):
  app/models/core_person.rb:168:in `create_from_form'
  app/models/core_person.rb:128:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (24.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-13 17:18:11) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"given_name"=>"Jean", "family_name"=>"Maigwa"}, "age_estimate"=>"", "patient"=>"", "birth_day"=>"Unknown", "birth_month"=>"4", "birth_year"=>"1985"}}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (16.0ms)[0m   [0mINSERT INTO `person` (`gender`, `cause_of_death`, `birthdate`, `dead`, `uuid`, `birthdate_estimated`, `void_reason`, `changed_by`, `death_date`, `voided`, `creator`, `date_voided`, `date_created`, `voided_by`, `date_changed`) VALUES('F', NULL, NULL, 0, '4f1b61c6-4538-11e2-8441-30f9edafb6df', 0, NULL, 1, NULL, 0, 1, NULL, '2012-12-13 15:18:12', NULL, '2012-12-13 15:18:12')[0m
  [4;36;1mSQL (49.7ms)[0m   [0;1mCOMMIT[0m

RuntimeError (--- !map:HashWithIndifferentAccess 
age_estimate: ""
birth_day: Unknown
birth_month: "4"
birth_year: "1985"
):
  app/models/core_person.rb:168:in `create_from_form'
  app/models/core_person.rb:128:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-13 17:18:26) [POST]
  Parameters: {"person"=>{"gender"=>"Female", "names"=>{"given_name"=>"Jean", "family_name"=>"Maigwa"}, "age_estimate"=>"", "patient"=>"", "birth_day"=>"Unknown", "birth_month"=>"4", "birth_year"=>"1985"}}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (0.3ms)[0m   [0;1mINSERT INTO `person` (`gender`, `cause_of_death`, `birthdate`, `dead`, `uuid`, `birthdate_estimated`, `void_reason`, `changed_by`, `death_date`, `voided`, `creator`, `date_voided`, `date_created`, `voided_by`, `date_changed`) VALUES('F', NULL, NULL, 0, '57ea6eb7-4538-11e2-8441-30f9edafb6df', 0, NULL, 1, NULL, 0, 1, NULL, '2012-12-13 15:18:27', NULL, '2012-12-13 15:18:26')[0m
  [4;35;1mSQL (60.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSHOW TABLES[0m

NoMethodError (undefined method `set_birthdate' for #<Class:0x7f7aab667a88>):
  app/models/core_person.rb:172:in `create_from_form'
  app/models/core_person.rb:128:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
Rendered rescues/_trace (24.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-14 08:35:22) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 210ms (View: 209, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-14 08:43:25) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#new (for 127.0.0.1 at 2012-12-14 08:43:34) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/new
Completed in 72ms (View: 71, DB: 0) | 200 OK [http://localhost/new_patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-14 08:43:55) [POST]
  Parameters: {"person"=>{"patient"=>"", "birth_year"=>"Unknown", "names"=>{"family_name"=>"Kamunga", "given_name"=>"John"}, "birth_day"=>"", "birth_month"=>"", "age_estimate"=>"39", "gender"=>"Female"}}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.8ms)[0m   [0mINSERT INTO `person` (`uuid`, `void_reason`, `changed_by`, `birthdate`, `dead`, `voided`, `voided_by`, `cause_of_death`, `creator`, `date_created`, `date_changed`, `date_voided`, `birthdate_estimated`, `gender`, `death_date`) VALUES('a1b1f0bd-45b9-11e2-9f7b-30f9edafb6df', NULL, 1, NULL, 0, 0, NULL, NULL, 1, '2012-12-14 06:43:55', '2012-12-14 06:43:55', NULL, 0, 'F', NULL)[0m
  [4;36;1mSQL (99.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSHOW TABLES[0m

NoMethodError (undefined method `set_birthdate_by_age' for #<Class:0x7f062bc33088>):
  app/models/core_person.rb:170:in `create_from_form'
  app/models/core_person.rb:128:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW TABLES[0m
Rendered rescues/_trace (26.4ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-14 08:45:58) [POST]
  Parameters: {"person"=>{"patient"=>"", "birth_year"=>"Unknown", "names"=>{"family_name"=>"Kamunga", "given_name"=>"John"}, "birth_day"=>"", "birth_month"=>"", "age_estimate"=>"39", "gender"=>"Female"}}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePerson Create (0.3ms)[0m   [0;1mINSERT INTO `person` (`uuid`, `void_reason`, `changed_by`, `birthdate`, `dead`, `voided`, `voided_by`, `cause_of_death`, `creator`, `date_created`, `date_changed`, `date_voided`, `birthdate_estimated`, `gender`, `death_date`) VALUES('eac5e9f4-45b9-11e2-9f7b-30f9edafb6df', NULL, 1, NULL, 0, 0, NULL, NULL, 1, '2012-12-14 06:45:58', '2012-12-14 06:45:58', NULL, 0, 'F', NULL)[0m
  [4;35;1mSQL (86.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSHOW TABLES[0m

NoMethodError (undefined method `set_birthdate_by_age' for #<Class:0x7f062bab1d68>):
  app/models/core_person.rb:170:in `create_from_form'
  app/models/core_person.rb:128:in `create_patient_from_dde'
  app/controllers/core_patient_registration_controller.rb:54:in `create'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

  [4;35;1mSQL (0.4ms)[0m   [0mSHOW TABLES[0m
Rendered rescues/_trace (63.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#create (for 127.0.0.1 at 2012-12-14 08:46:52) [POST]
  Parameters: {"person"=>{"patient"=>"", "birth_year"=>"Unknown", "names"=>{"family_name"=>"Kamunga", "given_name"=>"John"}, "birth_day"=>"", "birth_month"=>"", "age_estimate"=>"39", "gender"=>"Female"}}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePerson Create (0.4ms)[0m   [0mINSERT INTO `person` (`uuid`, `void_reason`, `changed_by`, `birthdate`, `dead`, `voided`, `voided_by`, `cause_of_death`, `creator`, `date_created`, `date_changed`, `date_voided`, `birthdate_estimated`, `gender`, `death_date`) VALUES('0b0d1c9d-45ba-11e2-9f7b-30f9edafb6df', NULL, 1, NULL, 0, 0, NULL, NULL, 1, '2012-12-14 06:46:52', '2012-12-14 06:46:52', NULL, 0, 'F', NULL)[0m
  [4;36;1mSQL (53.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.4ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 1, `date_changed` = '2012-12-14 06:46:52', `birthdate` = '1973-07-01' WHERE `person_id` = 78[0m
  [4;35;1mSQL (97.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonName Create (0.8ms)[0m   [0;1mINSERT INTO `person_name` (`degree`, `uuid`, `prefix`, `middle_name`, `family_name2`, `void_reason`, `changed_by`, `family_name`, `voided`, `voided_by`, `creator`, `date_created`, `date_changed`, `given_name`, `family_name_prefix`, `date_voided`, `preferred`, `person_id`, `family_name_suffix`) VALUES(NULL, '0b256e8c-45ba-11e2-9f7b-30f9edafb6df', NULL, NULL, NULL, NULL, 1, 'Kamunga', 0, NULL, 1, '2012-12-14 06:46:52', '2012-12-14 06:46:52', 'John', NULL, NULL, 0, 78, NULL)[0m
  [4;35;1mSQL (94.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatient Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.6ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePatient Create (1.0ms)[0m   [0;1mINSERT INTO `patient` (`void_reason`, `changed_by`, `voided`, `voided_by`, `creator`, `date_created`, `date_changed`, `tribe`, `date_voided`, `patient_id`) VALUES(NULL, 1, 0, NULL, 1, '2012-12-14 06:46:52', '2012-12-14 06:46:52', NULL, NULL, 78)[0m
  [4;35;1mSQL (108.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePatientIdentifier Create (0.8ms)[0m   [0;1mINSERT INTO `patient_identifier` (`uuid`, `location_id`, `void_reason`, `voided`, `voided_by`, `creator`, `date_created`, `identifier`, `date_voided`, `identifier_type`, `patient_id`, `preferred`) VALUES('0b502125-45ba-11e2-9f7b-30f9edafb6df', 1, NULL, 0, NULL, 1, '2012-12-14 06:46:53', 'L2D25U', NULL, 3, 78, 0)[0m
  [4;35;1mSQL (83.2ms)[0m   [0mCOMMIT[0m
Rendering template within layouts/application
Rendering print/print
Completed in 937ms (View: 55, DB: 450) | 200 OK [http://localhost/core_patient_registration/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#national_id_label (for 127.0.0.1 at 2012-12-14 08:46:53) [GET]
  Parameters: {"patient_id"=>"78"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePerson Load (0.5ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 78 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.4ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Sending data 787775.lbl
Completed in 56ms (View: 0, DB: 7) | 200 OK [http://localhost/national_id_label?patient_id=78]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-14 08:46:59) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://localhost/select]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 10:57:39) [GET]
  Parameters: {"user_id"=>"1", "id"=>"78"}
  [4;36;1mCorePerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.6ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 156ms (View: 75, DB: 12) | 200 OK [http://localhost/demographics/78?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 10:58:32) [GET]
  Parameters: {"user_id"=>"1", "id"=>"78", "field"=>"birth_date"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 49ms (View: 29, DB: 3) | 200 OK [http://localhost/edit_demographics/78?user_id=1&field=birth_date]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 10:58:44) [GET]
  Parameters: {"user_id"=>"1", "id"=>"78"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 66ms (View: 38, DB: 7) | 200 OK [http://localhost/demographics/78?user_id=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 10:58:59) [GET]
  Parameters: {"user_id"=>"1", "id"=>"78", "field"=>"birth_date"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 66ms (View: 12, DB: 3) | 200 OK [http://localhost/edit_demographics/78?user_id=1&field=birth_date]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 10:59:18) [POST]
  Parameters: {"person"=>{"patient"=>"", "birth_year"=>"1984", "birth_day"=>"Unknown", "birth_month"=>"7", "age_estimate"=>""}, "id"=>"78", "person_id"=>"78"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m

NoMethodError (undefined method `set_birthdate' for #<CorePerson:0x7f062bc905d0>):
  app/models/core_person.rb:724:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (22.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-14 11:00:40) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 67ms (View: 66, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:00:45) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"patient"=>"", "birth_day"=>"Unknown", "birth_year"=>"1984", "age_estimate"=>"", "birth_month"=>"7"}, "id"=>"78"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m

NoMethodError (undefined method `birthdate=' for "1984":String):
  app/models/core_person.rb:261:in `set_birthdate'
  app/models/core_person.rb:749:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (29.1ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:08:03) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"patient"=>"", "birth_day"=>"Unknown", "birth_year"=>"1984", "age_estimate"=>"", "birth_month"=>"7"}, "id"=>"78"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.4ms)[0m   [0mUPDATE `person` SET `birthdate` = '1984-07-15', `date_changed` = '2012-12-14 09:08:03' WHERE `person_id` = 78[0m
  [4;36;1mSQL (80.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 174ms (DB: 86) | 302 Found [http://localhost/update_demographics/78]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:08:03) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 100ms (View: 75, DB: 7) | 200 OK [http://localhost/demographics/78?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:08:14) [GET]
  Parameters: {"id"=>"78", "user_id"=>"", "field"=>"birth_date"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 32ms (View: 15, DB: 3) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=birth_date]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:08:27) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"patient"=>"", "birth_day"=>"1", "birth_year"=>"1982", "age_estimate"=>"", "birth_month"=>"9"}, "id"=>"78"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `birthdate_estimated` = 0, `birthdate` = '1982-09-01', `date_changed` = '2012-12-14 09:08:27' WHERE `person_id` = 78[0m
  [4;35;1mSQL (45.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 71ms (DB: 50) | 302 Found [http://localhost/update_demographics/78]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:08:27) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 63ms (View: 37, DB: 7) | 200 OK [http://localhost/demographics/78?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:08:31) [GET]
  Parameters: {"id"=>"78", "user_id"=>"", "field"=>"maiden_name"}
  [4;35;1mCorePerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 62ms (View: 11, DB: 3) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=maiden_name]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:08:38) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"patient"=>"", "names"=>{"family_name2"=>"Kachingwe"}}, "id"=>"78"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePersonName Update (0.4ms)[0m   [0;1mUPDATE `person_name` SET `date_changed` = '2012-12-14 09:08:38', `family_name2` = 'Kachingwe' WHERE `person_name_id` = 67[0m
  [4;35;1mSQL (171.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 199ms (DB: 175) | 302 Found [http://localhost/update_demographics/78]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:08:39) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.4ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.4ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 99ms (View: 74, DB: 7) | 200 OK [http://localhost/demographics/78?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:08:41) [GET]
  Parameters: {"id"=>"78", "user_id"=>"", "field"=>"middle_name"}
  [4;35;1mCorePerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 37ms (View: 12, DB: 4) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=middle_name]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:08:45) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"patient"=>"", "names"=>{"middle_name"=>"Madalitso"}}, "id"=>"78"}
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePersonName Update (0.6ms)[0m   [0;1mUPDATE `person_name` SET `middle_name` = 'Madalitso', `date_changed` = '2012-12-14 09:08:45' WHERE `person_name_id` = 67[0m
  [4;35;1mSQL (65.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 95ms (DB: 71) | 302 Found [http://localhost/update_demographics/78]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:08:45) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.4ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 65ms (View: 36, DB: 8) | 200 OK [http://localhost/demographics/78?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:08:48) [GET]
  Parameters: {"id"=>"78", "user_id"=>"", "field"=>"current_district"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 63ms (View: 12, DB: 3) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=current_district]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-14 11:08:51) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.3ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.5ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 49ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-14 11:08:53) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.3ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.6ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 31ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-14 11:08:54) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 14ms (View: 0, DB: 3) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-14 11:08:56) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.6ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.6ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 12ms (View: 0, DB: 3) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-14 11:09:00) [GET]
  Parameters: {"filter_value"=>"Area 23", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.4ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 23') LIMIT 1[0m
  [4;35;1mCoreVillage Load (18.0ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 142) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 83ms (View: 0, DB: 20) | 200 OK [http://localhost/village?filter_value=Area%2023&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:09:04) [POST]
  Parameters: {"CURRENT REGION"=>"Central Region", "person_id"=>"78", "CURRENT AREA OF RESIDENCE"=>"Area 23", "person"=>{"patient"=>"", "addresses"=>{"city_village"=>"Gaga", "address2"=>"Lilongwe City", "address1"=>"Other"}}, "id"=>"78"}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 24ms (DB: 3) | 302 Found [http://localhost/update_demographics/78]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:09:04) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 110ms (View: 81, DB: 10) | 200 OK [http://localhost/demographics/78?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:09:34) [GET]
  Parameters: {"id"=>"78", "user_id"=>"", "field"=>"home_district"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 44ms (View: 16, DB: 5) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=home_district]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-14 11:09:36) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 18ms (View: 1, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-14 11:09:39) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.3ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-14 11:09:40) [GET]
  Parameters: {"filter_value"=>"Kalolo", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Kalolo') LIMIT 1[0m
  [4;35;1mCoreVillage Load (22.1ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 114) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 76ms (View: 1, DB: 24) | 200 OK [http://localhost/village?filter_value=Kalolo&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:09:42) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"patient"=>"", "addresses"=>{"subregion"=>"Lilongwe", "neighborhood_cell"=>"Bandawe", "county_district"=>"Kalolo"}}, "id"=>"78", "REGION OF ORIGIN"=>"Central Region"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 21ms (DB: 3) | 302 Found [http://localhost/update_demographics/78]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:09:42) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (5.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 98ms (View: 70, DB: 12) | 200 OK [http://localhost/demographics/78?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:09:49) [GET]
  Parameters: {"id"=>"78", "user_id"=>"", "field"=>"cell_phone_number"}
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 40ms (View: 15, DB: 4) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=cell_phone_number]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:09:52) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"patient"=>"", "attributes"=>{"cell_phone_number"=>"N/A"}}, "id"=>"78"}
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;35;1mCorePersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (person_id = 78 AND person_attribute_type_id = 12) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (1.1ms)[0m   [0mINSERT INTO `person_attribute` (`changed_by`, `voided_by`, `person_attribute_type_id`, `date_created`, `voided`, `person_id`, `date_voided`, `uuid`, `value`, `date_changed`, `creator`, `void_reason`) VALUES(1, NULL, 12, '2012-12-14 09:09:52', 0, 78, NULL, '04dd1c9f-45ce-11e2-9f7b-30f9edafb6df', 'N/A', '2012-12-14 09:09:52', 1, NULL)[0m
  [4;36;1mSQL (87.6ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 175ms (DB: 96) | 302 Found [http://localhost/update_demographics/78]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:09:52) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 73ms (View: 45, DB: 8) | 200 OK [http://localhost/demographics/78?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:09:55) [GET]
  Parameters: {"id"=>"78", "user_id"=>"", "field"=>"home_phone_number"}
  [4;35;1mCorePerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 72ms (View: 9, DB: 3) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=home_phone_number]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:10:04) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"patient"=>"", "attributes"=>{"home_phone_number"=>"09999999"}}, "id"=>"78"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;35;1mCorePersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (person_id = 78 AND person_attribute_type_id = 14) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (0.4ms)[0m   [0mINSERT INTO `person_attribute` (`changed_by`, `voided_by`, `person_attribute_type_id`, `date_created`, `voided`, `person_id`, `date_voided`, `uuid`, `value`, `date_changed`, `creator`, `void_reason`) VALUES(1, NULL, 14, '2012-12-14 09:10:04', 0, 78, NULL, '0c6eb906-45ce-11e2-9f7b-30f9edafb6df', '09999999', '2012-12-14 09:10:04', 1, NULL)[0m
  [4;36;1mSQL (48.4ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 90ms (DB: 55) | 302 Found [http://localhost/update_demographics/78]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:10:04) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;35;1mCorePerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 121ms (View: 84, DB: 9) | 200 OK [http://localhost/demographics/78?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:10:07) [GET]
  Parameters: {"id"=>"78", "user_id"=>"", "field"=>"office_phone_number"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 29ms (View: 9, DB: 3) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=office_phone_number]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:10:09) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"patient"=>"", "attributes"=>{"office_phone_number"=>"Unknown"}}, "id"=>"78"}
  [4;35;1mCorePerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (person_id = 78 AND person_attribute_type_id = 15) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mCorePersonAttribute Create (0.3ms)[0m   [0mINSERT INTO `person_attribute` (`changed_by`, `voided_by`, `person_attribute_type_id`, `date_created`, `voided`, `person_id`, `date_voided`, `uuid`, `value`, `date_changed`, `creator`, `void_reason`) VALUES(1, NULL, 15, '2012-12-14 09:10:09', 0, 78, NULL, '0f782474-45ce-11e2-9f7b-30f9edafb6df', 'Unknown', '2012-12-14 09:10:09', 1, NULL)[0m
  [4;36;1mSQL (53.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 133ms (DB: 60) | 302 Found [http://localhost/update_demographics/78]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:10:10) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 102ms (View: 74, DB: 8) | 200 OK [http://localhost/demographics/78?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:11:45) [GET]
  Parameters: {"id"=>"78", "user_id"=>"", "field"=>"current_area_of_residence"}
  [4;35;1mCorePerson Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 43ms (View: 10, DB: 6) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=current_area_of_residence]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-14 11:11:47) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>""}
  [4;35;1mCoreRegion Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-14 11:11:49) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>""}
  [4;35;1mCoreDistrict Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 11ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-14 11:11:50) [GET]
  Parameters: {"filter_value"=>"Area 13", "search_string"=>""}
  [4;35;1mCoreTraditionalAuthority Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.6ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 13') LIMIT 1[0m
  [4;35;1mCoreVillage Load (0.4ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 132) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 47ms (View: 0, DB: 2) | 200 OK [http://localhost/village?filter_value=Area%2013&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:12:25) [POST]
  Parameters: {"CURRENT REGION"=>"Central Region", "person_id"=>"78", "CURRENT AREA OF RESIDENCE"=>"Area 13", "person"=>{"patient"=>"", "addresses"=>{"city_village"=>"Area 13", "address2"=>"Lilongwe City", "address1"=>"Other"}}, "id"=>"78"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m

RuntimeError (--- !map:HashWithIndifferentAccess 
city_village: Area 13
address1: Other
address2: Lilongwe City
):
  app/models/core_person.rb:748:in `update_demographics'
  app/controllers/core_patient_registration_controller.rb:238:in `update_demographics'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/chimwemwe/.passenger/standalone/3.0.18-x86_64-ruby1.8.7-linux-gcc4.7.2-1002/support/helper-scripts/passenger-spawn-server:99

Rendered rescues/_trace (21.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-14 11:23:53) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 69ms (View: 69, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#select (for 127.0.0.1 at 2012-12-14 11:25:19) [GET]
Rendering template within layouts/application
Rendering core_patient_registration/select
Completed in 67ms (View: 66, DB: 0) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:26:04) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"addresses"=>{"city_village"=>"Area 13", "address2"=>"Lilongwe City", "address1"=>"Other"}, "patient"=>""}, "CURRENT REGION"=>"Central Region", "CURRENT AREA OF RESIDENCE"=>"Area 13", "id"=>"78"}
  [4;36;1mCorePerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAddress Create (0.6ms)[0m   [0;1mINSERT INTO `person_address` (`preferred`, `state_province`, `void_reason`, `person_id`, `date_created`, `city_village`, `county_district`, `country`, `creator`, `uuid`, `address1`, `address2`, `postal_code`, `latitude`, `voided`, `region`, `date_voided`, `neighborhood_cell`, `longitude`, `voided_by`, `subregion`, `township_division`) VALUES(0, NULL, NULL, 78, '2012-12-14 09:26:04', 'Area 13', NULL, NULL, 1, '485ac6ae-45d0-11e2-9f7b-30f9edafb6df', 'Other', 'Lilongwe City', NULL, NULL, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL)[0m
  [4;35;1mSQL (66.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 140ms (DB: 70) | 302 Found [http://localhost/update_demographics/78]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:26:04) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.4ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 102ms (View: 76, DB: 7) | 200 OK [http://localhost/demographics/78?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:26:08) [GET]
  Parameters: {"user_id"=>"", "field"=>"current_district", "id"=>"78"}
  [4;36;1mCorePerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 32ms (View: 15, DB: 3) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=current_district]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-14 11:26:11) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Central Region"}
  [4;36;1mCoreRegion Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `region`[0m
  [4;35;1mCoreRegion Load (0.1ms)[0m   [0mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mCoreDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mCoreDistrict Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `district`[0m
Completed in 10ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-14 11:26:13) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Lilongwe City"}
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (`district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;36;1mCoreTraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;35;1mCoreTraditionalAuthority Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 12ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-14 11:26:16) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Area 18"}
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
  [4;35;1mCoreTraditionalAuthority Load (0.9ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Area 18') LIMIT 1[0m
  [4;36;1mCoreVillage Load (0.3ms)[0m   [0;1mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 137) ORDER BY name[0m
  [4;35;1mCoreVillage Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `village`[0m
Completed in 13ms (View: 0, DB: 3) | 200 OK [http://localhost/village?filter_value=Area%2018&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:26:24) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"addresses"=>{"city_village"=>"Area 18 A Location", "address2"=>"Lilongwe City", "address1"=>"P/2394"}, "patient"=>""}, "CURRENT REGION"=>"Central Region", "CURRENT AREA OF RESIDENCE"=>"Area 18", "id"=>"78"}
  [4;36;1mCorePerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;36;1mCorePersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePersonAddress Update (0.4ms)[0m   [0;1mUPDATE `person_address` SET `city_village` = 'Area 18 A Location', `address1` = 'P/2394' WHERE `person_address_id` = 48[0m
  [4;35;1mSQL (62.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 94ms (DB: 67) | 302 Found [http://localhost/update_demographics/78]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:26:24) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 108ms (View: 44, DB: 7) | 200 OK [http://localhost/demographics/78?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:26:28) [GET]
  Parameters: {"user_id"=>"", "field"=>"home_district", "id"=>"78"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 62ms (View: 48, DB: 2) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=home_district]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#district (for 127.0.0.1 at 2012-12-14 11:26:31) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Central Region"}
  [4;35;1mCoreRegion Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `region`[0m
  [4;36;1mCoreRegion Load (0.1ms)[0m   [0;1mSELECT * FROM `region` WHERE (`region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mCoreDistrict Load (0.1ms)[0m   [0mSELECT * FROM `district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mCoreDistrict Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `district`[0m
Completed in 12ms (View: 0, DB: 1) | 200 OK [http://localhost/district?filter_value=Central%20Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#traditional_authority (for 127.0.0.1 at 2012-12-14 11:26:34) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Ntcheu"}
  [4;35;1mCoreDistrict Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `district`[0m
  [4;36;1mCoreDistrict Load (0.3ms)[0m   [0;1mSELECT * FROM `district` WHERE (`district`.`name` = 'Ntcheu') LIMIT 1[0m
  [4;35;1mCoreTraditionalAuthority Load (0.4ms)[0m   [0mSELECT * FROM `traditional_authority` WHERE (name LIKE ('%%') AND district_id = 25) ORDER BY name[0m
  [4;36;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `traditional_authority`[0m
Completed in 14ms (View: 0, DB: 2) | 200 OK [http://localhost/traditional_authority?filter_value=Ntcheu&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#village (for 127.0.0.1 at 2012-12-14 11:26:36) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Kwataine"}
  [4;35;1mCoreTraditionalAuthority Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `traditional_authority`[0m
  [4;36;1mCoreTraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `traditional_authority` WHERE (`traditional_authority`.`name` = 'Kwataine') LIMIT 1[0m
  [4;35;1mCoreVillage Load (26.5ms)[0m   [0mSELECT * FROM `village` WHERE (name LIKE ('%%') AND traditional_authority_id = 198) ORDER BY name[0m
  [4;36;1mCoreVillage Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `village`[0m
Completed in 40ms (View: 0, DB: 28) | 200 OK [http://localhost/village?filter_value=Kwataine&search_string=]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:26:38) [POST]
  Parameters: {"REGION OF ORIGIN"=>"Central Region", "person_id"=>"78", "person"=>{"addresses"=>{"county_district"=>"Kwataine", "neighborhood_cell"=>"Binya", "subregion"=>"Ntcheu"}, "patient"=>""}, "id"=>"78"}
  [4;35;1mCorePerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;35;1mCorePersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePersonAddress Update (17.3ms)[0m   [0mUPDATE `person_address` SET `subregion` = 'Ntcheu', `county_district` = 'Kwataine', `neighborhood_cell` = 'Binya' WHERE `person_address_id` = 48[0m
  [4;36;1mSQL (67.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 112ms (DB: 90) | 302 Found [http://localhost/update_demographics/78]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:26:38) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 69ms (View: 42, DB: 8) | 200 OK [http://localhost/demographics/78?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:26:41) [GET]
  Parameters: {"user_id"=>"", "field"=>"occupation", "id"=>"78"}
  [4;36;1mCorePerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (7.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 69ms (View: 14, DB: 9) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=occupation]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:26:43) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"attributes"=>{"occupation"=>"Driver"}, "patient"=>""}, "id"=>"78"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
  [4;36;1mCorePersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (person_id = 78 AND person_attribute_type_id = 13) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mCorePersonAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`void_reason`, `person_id`, `date_created`, `changed_by`, `person_attribute_type_id`, `creator`, `uuid`, `date_changed`, `voided`, `value`, `date_voided`, `voided_by`) VALUES(NULL, 78, '2012-12-14 09:26:43', 1, 13, 1, '5f838242-45d0-11e2-9f7b-30f9edafb6df', '2012-12-14 09:26:43', 0, 'Driver', NULL, NULL)[0m
  [4;35;1mSQL (42.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 79ms (DB: 49) | 302 Found [http://localhost/update_demographics/78]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:26:43) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 106ms (View: 80, DB: 8) | 200 OK [http://localhost/demographics/78?user=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:27:22) [GET]
  Parameters: {"user_id"=>"", "field"=>"gender", "id"=>"78"}
  [4;36;1mCorePerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 34ms (View: 15, DB: 4) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=gender]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:27:24) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"gender"=>"Male", "patient"=>""}, "id"=>"78"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCorePerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `date_changed` = '2012-12-14 09:27:24', `gender` = 'Male' WHERE `person_id` = 78[0m
  [4;35;1mSQL (80.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 144ms (DB: 84) | 302 Found [http://localhost/update_demographics/78]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:27:24) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;35;1mCorePerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 68ms (View: 40, DB: 7) | 200 OK [http://localhost/demographics/78?user=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#edit_demographics (for 127.0.0.1 at 2012-12-14 11:27:33) [GET]
  Parameters: {"user_id"=>"", "field"=>"gender", "id"=>"78"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/edit_demographics
Completed in 65ms (View: 11, DB: 2) | 200 OK [http://localhost/edit_demographics/78?user_id=&field=gender]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#update_demographics (for 127.0.0.1 at 2012-12-14 11:27:35) [POST]
  Parameters: {"person_id"=>"78", "person"=>{"gender"=>"Female", "patient"=>""}, "id"=>"78"}
  [4;35;1mCorePerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCorePerson Update (0.3ms)[0m   [0mUPDATE `person` SET `date_changed` = '2012-12-14 09:27:35', `gender` = 'Female' WHERE `person_id` = 78[0m
  [4;36;1mSQL (64.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT count(*) AS count_all FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) [0m
Redirected to http://localhost:3003/demographics/78?user=
Completed in 88ms (DB: 67) | 302 Found [http://localhost/update_demographics/78]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#demographics (for 127.0.0.1 at 2012-12-14 11:27:35) [GET]
  Parameters: {"id"=>"78", "user"=>""}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 78) AND (person.voided = 0) [0m
Rendering template within layouts/application
Rendering core_patient_registration/demographics
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 107ms (View: 81, DB: 7) | 200 OK [http://localhost/demographics/78?user=]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-14 11:27:50) [GET]
  Parameters: {"id"=>"L2D25U"}
  [4;36;1mCorePerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'L2D25U')) [0m
  [4;35;1mCorePatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mCorePatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mCorePerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.person_id = 78 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mCorePatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mCorePersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (7.6ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCorePersonAddress Load (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCorePersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 102ms (View: 1, DB: 15) | 200 OK [http://localhost/scan/L2D25U]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-14 11:28:10) [GET]
  Parameters: {"id"=>"L2D25Ur"}
  [4;36;1mCorePerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mCorePersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mCorePersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mCorePatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mCorePatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'L2D25Ur')) [0m
Completed in 246ms (View: 0, DB: 4) | 200 OK [http://localhost/scan/L2D25Ur]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing CorePatientRegistrationController#scan (for 127.0.0.1 at 2012-12-14 11:28:20) [GET]
  Parameters: {"id"=>"L2D25U"}
  [4;35;1mCorePerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mCorePersonName Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mCorePersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mCorePatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mCorePatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`identifier` = 'L2D25U')) [0m
  [4;36;1mCorePatient Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mCorePerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.person_id = 78 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mCorePatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.patient_id = 78 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mCorePatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mCorePersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCorePersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.person_id = 78 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCorePersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.person_id = 78 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCorePersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.person_id = 78 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.patient_id = 78 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 111ms (View: 0, DB: 9) | 200 OK [http://localhost/scan/L2D25U]
